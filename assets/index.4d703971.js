import{S as ne,i as le,s as te,e as S,a as m,b as H,c as Oe,l as E,n as ae,d as B,r as ke,f as Gt,o as Pe,g as ve,h as Y,j as _n,w as Ke,q as De,k as pn,m as $,p as I,t as se,u as K,v as F,x as we,y as Be,z as q,A as X,B as Xe,C as x,D as N,E as W,F as y,G as re,H as fe,I as gn,J as $e,K as _e,L as nt,M as ut,N as Yt,O as mn,P as Ee,Q as pe,R as ye,T as qe,U as rt,V as lt,W as it,X as ot,Y as st,Z as Ne,_ as Re,$ as vn,a0 as bn,a1 as xe,a2 as ft,a3 as wn,a4 as Me,a5 as ct,a6 as kn}from"./vendor.70d987b1.js";const yn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}};yn();class Sn{constructor(e){this.callbacks={any:[]},this.data=e,this.loadFromLocalStorage()}setValue(e,t){if(this.data[e].value=t,this.callbacks[e])for(let l of this.callbacks[e])l(e);for(let l of this.callbacks.any)l(e)}subscribe(e,t){for(let l of e)this.callbacks[l]||(this.callbacks[l]=[]),this.callbacks[l].push(t),t(l);return()=>{for(let l of e)this.callbacks[l]=this.callbacks[l].filter(i=>i!=t)}}saveToLocalStorage(){let e={};for(var t in this.data)this.data[t].value!=this.data[t].auto&&(e[t]=this.data[t].value);localStorage.setItem("settings",JSON.stringify(e))}loadFromLocalStorage(){if(localStorage.getItem("settings")){let t=JSON.parse(localStorage.getItem("settings"));try{for(var e in t)this.setValue(e,t[e])}catch{localStorage.setItem("settings",JSON.stringify({})),this.resetToAuto()}}}resetToAuto(){for(var e in this.data)this.setValue(e,this.data[e].auto)}}let Z=new Sn({colorTheme:{name:"Color theme",type:"radio",value:0,auto:0,detail:{options:["System Default","Light theme","Dark theme"]}},accentHue:{name:"Primary color hue",type:"slider",value:192,auto:192,detail:{min:0,max:360,step:1,hue:!0}},accentSecondaryHue:{name:"Secondary color hue",type:"slider",value:26,auto:26,detail:{min:0,max:360,step:1,hue:!0}},transitionSpeed:{name:"Transition duration",type:"slider",value:300,auto:300,detail:{min:0,max:1e3,step:1}},fontSize:{name:"Font size",type:"slider",value:.9,auto:.9,detail:{min:.2,max:2,step:.01}},fontWeight:{name:"Font weight",type:"slider",value:300,auto:300,detail:{min:100,max:900,step:50}},fontFamily:{name:"Font",type:"radio",value:0,auto:0,detail:{options:["Merriweather Sans","Helvetica","Georgia","Courier New"],customOption:!0,customOptionValue:""}},borderRadius:{name:"Border radius",type:"slider",value:12,auto:12,detail:{min:0,max:30,step:1}},padding:{name:"Padding",value:8,auto:8,type:"slider",detail:{min:0,max:30,step:1}},gap:{name:"Grid Gap",value:12,auto:12,type:"slider",detail:{min:0,max:30,step:1}}});function Fn(n){let e,t,l,i;return{c(){e=S("textarea"),m(e,"spellcheck","false"),m(e,"placeholder",n[1]),m(e,"style",t=`--white-space:${n[2]};`),m(e,"class","svelte-1ggsm2f")},m(s,o){H(s,e,o),Oe(e,n[0]),n[13](e),l||(i=[E(e,"input",n[12]),E(e,"load",n[4]),E(e,"input",n[4]),E(e,"input",n[7]),E(e,"beforeinput",n[8]),E(e,"keydown",n[9]),E(e,"focus",n[10]),E(e,"blur",n[11])],l=!0)},p(s,[o]){o&2&&m(e,"placeholder",s[1]),o&4&&t!==(t=`--white-space:${s[2]};`)&&m(e,"style",t),o&1&&Oe(e,s[0])},i:ae,o:ae,d(s){s&&B(e),n[13](null),l=!1,ke(i)}}}function Cn(n,e,t){let{value:l}=e,{placeholder:i=""}=e,{nowrap:s=!1}=e,o,a;function u(){a&&(t(3,a.value=a.value.replace(/\r?\n|\r/g,""),a),t(3,a.style.height="0px",a),t(3,a.style.height=a.scrollHeight+"px",a))}Gt(function(){u()}),Pe(Z.subscribe(["fontSize"],function(){u()}));const r=()=>{a.focus()};function f(_){ve.call(this,n,_)}function c(_){ve.call(this,n,_)}function h(_){ve.call(this,n,_)}function d(_){ve.call(this,n,_)}function p(_){ve.call(this,n,_)}function g(){l=this.value,t(0,l)}function v(_){Y[_?"unshift":"push"](()=>{a=_,t(3,a)})}return n.$$set=_=>{"value"in _&&t(0,l=_.value),"placeholder"in _&&t(1,i=_.placeholder),"nowrap"in _&&t(5,s=_.nowrap)},n.$$.update=()=>{n.$$.dirty&32&&(s?t(2,o="nowrap"):t(2,o="auto"))},[l,i,o,a,u,s,r,f,c,h,d,p,g,v]}class at extends ne{constructor(e){super();le(this,e,Cn,Fn,te,{value:0,placeholder:1,nowrap:5,focus:6})}get focus(){return this.$$.ctx[6]}}function Ln(n){let e,t=n[1].svg+"",l;return{c(){e=_n("svg"),m(e,"style",l=`width:${n[0]};height:${n[0]};`),m(e,"viewBox","0 0 "+100+" "+100),m(e,"fill","none"),m(e,"stroke","var(--text)"),m(e,"class","svelte-2n1qug")},m(i,s){H(i,e,s),e.innerHTML=t},p(i,[s]){s&2&&t!==(t=i[1].svg+"")&&(e.innerHTML=t),s&1&&l!==(l=`width:${i[0]};height:${i[0]};`)&&m(e,"style",l)},i:ae,o:ae,d(i){i&&B(e)}}}function Mn(n,e,t){let{name:l}=e,{size:i="1rem"}=e,s=[{name:"arrowRight",svg:'<path d="M27 7L74 50L27 93" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowLeft",svg:'<path d="M74 93L27 50L74 7" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowUp",svg:'<path d="M7.5 73.5L50.5 26.5L93.5 73.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowDown",svg:'<path d="M93.5 26.5L50.5 73.5L7.5 26.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"delete",svg:`<path d="M78.5685 22L22 78.5685" stroke-width="10" stroke-linecap="round"/>
<path d="M22 22L78.5685 78.5685" stroke-width="10" stroke-linecap="round"/>`},{name:"add",svg:`<path d="M50 15L50 85" stroke-width="10" stroke-linecap="round"/>
<path d="M15 50H85" stroke-width="10" stroke-linecap="round"/>`},{name:"download",svg:`<path d="M71 45L50 68L29 45" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 66L50 14" stroke-width="10" stroke-linecap="round"/>`},{name:"upload",svg:`<path d="M29 37L50 14L71 37" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 16L50 68" stroke-width="10" stroke-linecap="round"/>`},{name:"addUp",svg:`<path d="M85 25V25C87.7614 25 90 27.2386 90 30V70C90 75.5228 85.5228 80 80 80H20C14.4772 80 10 75.5228 10 70L10 30C10 27.2386 12.2386 25 15 25V25" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 25H65" stroke-width="10" stroke-linecap="round"/>
<path d="M50 40V10" stroke-width="10" stroke-linecap="round"/>`},{name:"addDown",svg:`<path d="M15 75V75C12.2386 75 10 72.7614 10 70L10 30C10 24.4772 14.4772 20 20 20L80 20C85.5228 20 90 24.4772 90 30L90 70C90 72.7614 87.7614 75 85 75V75" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M65 75H35" stroke-width="10" stroke-linecap="round"/>
<path d="M50 60L50 90" stroke-width="10" stroke-linecap="round"/>`},{name:"addRight",svg:`<path d="M75 85V85C75 87.7614 72.7614 90 70 90H30C24.4772 90 20 85.5228 20 80V20C20 14.4772 24.4772 10 30 10H70C72.7614 10 75 12.2386 75 15V15" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M75 35V65" stroke-width="10" stroke-linecap="round"/>
<path d="M60 50H90" stroke-width="10" stroke-linecap="round"/>`},{name:"undo",svg:`<path d="M10 47H70C81.0457 47 90 55.9543 90 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M36 70L10 47L36 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"redo",svg:`<path d="M90 47H30C18.9543 47 10 55.9543 10 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M64 70L90 47L64 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"settings",svg:`<line x1="10" y1="50" x2="90" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="80" x2="90" y2="80" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>
<circle cx="26.25" cy="50.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="80.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="20.25" r="6.25" stroke-width="10"/>`},{name:"check",svg:'<path d="M88.7817 29.2843L39.2842 78.7817L11 50.4975" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'}],o;function a(){t(1,o=s.find(u=>u.name===l))}return a(),n.$$set=u=>{"name"in u&&t(2,l=u.name),"size"in u&&t(0,i=u.size)},n.$$.update=()=>{n.$$.dirty&4&&a()},[i,o,l]}class Qt extends ne{constructor(e){super();le(this,e,Mn,Ln,te,{name:2,size:0})}}const Ve=Ke(!0),oe=Ke([]);let Ae=Ke(0);const qn=Ke({aff:{columns:["1AC","1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!1},neg:{columns:["1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!0}});let Ie;oe.subscribe(n=>{Ie=n});let et;qn.subscribe(n=>{et=n});function je(n,e,t){return{content:"",children:[],index:n,level:e,focus:t}}function Tn(n,e){return{content:"",level:0,columns:et[e].columns,invert:et[e].invert,focus:!0,index:n,lastFocus:void 0,children:[je(0,1,!1)],history:new Zt}}function he(n,e=0){let t=Ie[n[0]];for(let l=1;l<n.length-e;l++)t=t.children[n[l]];return t}class Zt{constructor(){this.index=-1,this.data=[],this.lastFocus=void 0}lastAction(){return this.data[this.index]}add(e,t,l){this.resolveAllPending();let i={type:e,path:t,lastFocus:[...this.lastFocus],nextFocus:void 0,other:l,pending:!1};this.data=this.data.slice(0,this.index+1),this.data.push(i),this.index=this.data.length-1}addPending(e,t,l){this.data=this.data.slice(0,this.index+1),this.data.push({type:e,path:t,lastFocus:void 0,nextFocus:void 0,other:l,pending:!0}),this.index=this.data.length-1}resolveAllPending(){let e=!1;for(let t=0;t<this.data.length;t++){let l=this.data[t];if(l.pending){let i={type:l.type,path:l.path,lastFocus:l.path,nextFocus:l.path,other:l.other,pending:!1},s=!0;i.type=="edit"&&(i.other.lastContent=l.other.lastContent,i.other.nextContent=l.other.getNextContent(),i.other.lastContent==i.other.nextContent&&(s=!1),l.other.createEditBreak()),s?(e=!0,this.data[t]=i):(this.data[t]=null,this.index>=t&&(this.index-=1))}}this.data=this.data.filter(t=>t!=null),e&&console.log("resolving all pending")}addFocus(e){this.lastFocus=e,this.lastAction()&&this.lastAction().nextFocus==null&&(this.lastAction().nextFocus=e)}undoAction(e){console.log("undo",this.index,this.data);let t=he(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,1):e.type=="delete"?i.splice(l,0,e.other.box):e.type=="edit"&&(i[l].content=e.other.lastContent);for(let s=l;s<i.length;s++)i[s].index=s;t.children=[...i]}redoAction(e){console.log("redo",this.index,this.data);let t=he(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,0,je(l,t.level+1,!1)):e.type=="delete"?i.splice(l,1):e.type=="edit"&&(i[l].content=e.other.nextContent);for(let s=l;s<i.length;s++)i[s].index=s;t.children=[...i]}focus(e){let t=he(e);t.focus=!0}undo(){if(this.resolveAllPending(),this.index>-1){let e=this.lastAction();this.undoAction(e),this.focus(e.lastFocus),oe.set(Ie),this.index-=1}}redo(){if(this.resolveAllPending(),this.index<this.data.length-1){this.index+=1;let e=this.lastAction();this.redoAction(e),this.focus(e.nextFocus),oe.set(Ie)}}}function On(n,e){const t=n.clientHeight;return{duration:Z.data.transitionSpeed.value,css:l=>{const i=De(l);return`
        height: calc(${i*t}px - var(--padding) * 2);
        overflow: visible;
        clip-path: inset(${(1-i)*t-2}px 0 -${t}px 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function Pn(n,e){const t=n.clientHeight;return{duration:Z.data.transitionSpeed.value,css:l=>{const i=De(l);return`
        height: ${i*t}px;
        overflow: visible;
        clip-path: inset(${(1-i)*t}px 0 0 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function An(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>`
        opacity:${t};
      `}}function dt(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>{const l=De(t);return`
        clip-path:inset(0% ${(1-l)*100}% 0% 0%);
        transform: translateX(${(1-l)*50}%);
      `}}}function ht(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>{const l=pn(t);return`
      clip-path:inset(0% ${(1-l)*100}% 0% 0%);
      transform: translateX(${(1-l)*50}%)`}}}function Rn(n,e){const t=n.clientHeight;return{duration:Z.data.transitionSpeed.value,css:l=>{const i=De(l);return`
        height: ${t*i}px;
        overflow: hidden;
        transform: translateX(${-100*(1-i)}%);
      `}}}function _t(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>`
        transform: scale(${De(t)});
        opacity: ${t};
      `}}function pt(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>`
        transform: scale(${De(t)});
        opacity: ${t};
      `}}function gt(n,e){return{duration:Z.data.transitionSpeed.value,css:t=>`
        opacity: ${t};
      `}}function mt(n,e,t){const l=n.slice();return l[54]=e[t],l[55]=e,l[56]=t,l}function vt(n){let e,t,l,i,s,o,a;return t=new Qt({props:{name:"add"}}),{c(){e=S("button"),I(t.$$.fragment),m(e,"class",l=se(`add palette-${n[13]}`)+" svelte-1ino5d")},m(u,r){H(u,e,r),K(t,e,null),s=!0,o||(a=[E(e,"click",n[34]),E(e,"mousedown",tt)],o=!0)},p(u,r){(!s||r[0]&8192&&l!==(l=se(`add palette-${u[13]}`)+" svelte-1ino5d"))&&m(e,"class",l)},i(u){s||(F(t.$$.fragment,u),u&&(i||we(()=>{i=Be(e,An,{}),i.start()})),s=!0)},o(u){q(t.$$.fragment,u),s=!1},d(u){u&&B(e),X(t),o=!1,ke(a)}}}function bt(n,e){let t,l,i,s,o,a,u,r;function f(v){e[35](v,e[54])}function c(v){e[36](v,e[54])}function h(v){e[37](v,e[54])}function d(v){e[38](v,e[54])}function p(v){e[39](v,e[54])}let g={addSibling:e[22],deleteSelf:e[23],focusSibling:e[24],focusParent:e[25],dispatchSelfFocus:e[17],parentPath:e[8]};return e[54].content!==void 0&&(g.content=e[54].content),e[54].children!==void 0&&(g.children=e[54].children),e[54].index!==void 0&&(g.index=e[54].index),e[54].level!==void 0&&(g.level=e[54].level),e[54].focus!==void 0&&(g.focus=e[54].focus),l=new $t({props:g}),Y.push(()=>$(l,"content",f)),Y.push(()=>$(l,"children",c)),Y.push(()=>$(l,"index",h)),Y.push(()=>$(l,"level",d)),Y.push(()=>$(l,"focus",p)),l.$on("saveFocus",e[40]),{key:n,first:null,c(){t=Xe(),I(l.$$.fragment),this.first=t},m(v,_){H(v,t,_),K(l,v,_),r=!0},p(v,_){e=v;const b={};_[0]&256&&(b.parentPath=e[8]),!i&&_[0]&4&&(i=!0,b.content=e[54].content,x(()=>i=!1)),!s&&_[0]&4&&(s=!0,b.children=e[54].children,x(()=>s=!1)),!o&&_[0]&4&&(o=!0,b.index=e[54].index,x(()=>o=!1)),!a&&_[0]&4&&(a=!0,b.level=e[54].level,x(()=>a=!1)),!u&&_[0]&4&&(u=!0,b.focus=e[54].focus,x(()=>u=!1)),l.$set(b)},i(v){r||(F(l.$$.fragment,v),r=!0)},o(v){q(l.$$.fragment,v),r=!1},d(v){v&&B(t),X(l,v)}}}function Dn(n){let e,t,l,i,s,o,a,u,r,f,c,h,d,p,g,v,_,b=[],k=new Map,z,R,T,j,V,O;function A(M){n[31](M)}let w={placeholder:n[11]};n[1]!==void 0&&(w.value=n[1]),r=new at({props:w}),Y.push(()=>$(r,"value",A)),n[32](r),r.$on("keydown",n[20]),r.$on("beforeinput",n[21]),r.$on("blur",n[19]),r.$on("focus",n[18]);let P=n[2].length==0&&n[5]<n[15]&&vt(n),J=n[2];const D=M=>M[54];for(let M=0;M<J.length;M+=1){let U=mt(n,J,M),ce=D(U);k.set(ce,b[M]=bt(ce,U))}return{c(){e=S("div"),t=S("div"),l=S("div"),i=S("div"),a=N(),u=S("div"),I(r.$$.fragment),c=N(),h=S("div"),g=N(),P&&P.c(),v=N(),_=S("ul");for(let M=0;M<b.length;M+=1)b[M].c();m(i,"class","line above svelte-1ino5d"),W(i,"left",n[2].length>0),W(i,"right",n[4]==0&&n[5]>1),m(u,"class","text svelte-1ino5d"),m(h,"class","line below svelte-1ino5d"),m(l,"class","barcontainer svelte-1ino5d"),m(t,"class","content svelte-1ino5d"),m(t,"style",`--this-background: ${n[16]}`),W(t,"root",n[3]),W(t,"left",n[2].length>0),W(t,"right",n[4]==0&&n[5]>1),m(_,"class","children svelte-1ino5d"),m(e,"class",z=se(`top palette-${n[12]}`)+" svelte-1ino5d"),W(e,"empty",n[2].length==0),W(e,"focus",n[0]),W(e,"childFocus",n[10]),W(e,"activeMouse",n[14]),W(e,"highlight",n[10]||n[0])},m(M,U){H(M,e,U),y(e,t),y(t,l),y(l,i),y(l,a),y(l,u),K(r,u,null),y(l,c),y(l,h),y(t,g),P&&P.m(t,null),y(e,v),y(e,_);for(let ce=0;ce<b.length;ce+=1)b[ce].m(_,null);j=!0,V||(O=[E(i,"click",n[30]),E(i,"mousedown",tt),E(h,"click",n[33]),E(h,"mousedown",tt)],V=!0)},p(M,U){U[0]&4&&W(i,"left",M[2].length>0),U[0]&48&&W(i,"right",M[4]==0&&M[5]>1);const ce={};U[0]&2048&&(ce.placeholder=M[11]),!f&&U[0]&2&&(f=!0,ce.value=M[1],x(()=>f=!1)),r.$set(ce),M[2].length==0&&M[5]<M[15]?P?(P.p(M,U),U[0]&36&&F(P,1)):(P=vt(M),P.c(),F(P,1),P.m(t,null)):P&&(re(),q(P,1,1,()=>{P=null}),fe()),U[0]&8&&W(t,"root",M[3]),U[0]&4&&W(t,"left",M[2].length>0),U[0]&48&&W(t,"right",M[4]==0&&M[5]>1),U[0]&63045892&&(J=M[2],re(),b=gn(b,U,D,1,M,J,k,_,mn,bt,null,mt),fe()),(!j||U[0]&4096&&z!==(z=se(`top palette-${M[12]}`)+" svelte-1ino5d"))&&m(e,"class",z),U[0]&4100&&W(e,"empty",M[2].length==0),U[0]&4097&&W(e,"focus",M[0]),U[0]&5120&&W(e,"childFocus",M[10]),U[0]&20480&&W(e,"activeMouse",M[14]),U[0]&5121&&W(e,"highlight",M[10]||M[0])},i(M){if(!j){M&&we(()=>{o&&o.end(1),s=Be(i,dt,{}),s.start()}),F(r.$$.fragment,M),M&&we(()=>{p&&p.end(1),d=Be(h,dt,{}),d.start()}),F(P);for(let U=0;U<J.length;U+=1)F(b[U]);M&&we(()=>{T&&T.end(1),R=Be(e,On,{}),R.start()}),j=!0}},o(M){s&&s.invalidate(),M&&(o=$e(i,ht,{})),q(r.$$.fragment,M),d&&d.invalidate(),M&&(p=$e(h,ht,{})),q(P);for(let U=0;U<b.length;U+=1)q(b[U]);R&&R.invalidate(),M&&(T=$e(e,Pn,{})),j=!1},d(M){M&&B(e),M&&o&&o.end(),n[32](null),X(r),M&&p&&p.end(),P&&P.d();for(let U=0;U<b.length;U+=1)b[U].d();M&&T&&T.end(),V=!1,ke(O)}}}function tt(n){n.preventDefault()}function Hn(n,e,t){let l,i,s,o;_e(n,Ae,L=>t(43,i=L)),_e(n,oe,L=>t(44,s=L)),_e(n,Ve,L=>t(14,o=L));var a=this&&this.__awaiter||function(L,G,ie,de){function be(Fe){return Fe instanceof ie?Fe:new ie(function(Ce){Ce(Fe)})}return new(ie||(ie=Promise))(function(Fe,Ce){function dn(Le){try{Qe(de.next(Le))}catch(Ze){Ce(Ze)}}function hn(Le){try{Qe(de.throw(Le))}catch(Ze){Ce(Ze)}}function Qe(Le){Le.done?Fe(Le.value):be(Le.value).then(dn,hn)}Qe((de=de.apply(L,G||[])).next())})};const u=nt();let{root:r=!1}=e,{content:f=""}=e,{children:c}=e,{index:h}=e,{level:d}=e,{focus:p=!1}=e,{parentPath:g=[]}=e,{addSibling:v=()=>!1}=e,{deleteSelf:_=()=>{}}=e,{focusSibling:b=()=>{}}=e,{focusParent:k=()=>{}}=e,{dispatchSelfFocus:z=()=>{}}=e;const{getinvert:R}=ut("invert");let T=R();const{getColumnCount:j}=ut("columnCount");let V=j(),O,A,w=!1,P=-1;function J(L,G){G?(t(10,w=!0),P=L):L==P&&(t(10,w=!1),P=-1)}let D=!1;function M(){p?(z(h,!0),d>=1&&(s[i].history.addFocus([...l]),u("saveFocus",l),O&&O.focus())):(z(h,!1),D=!1)}Yt(M);function U(){p&&(z(h,!0),s[i].history.addFocus([...l]))}let ce="";function We(){p||He()}function Je(){p&&t(0,p=!1)}class me{constructor(G,ie=()=>!0,de=!0,be=!0,Fe=!0){this.require=ie,this.stopRepeat=de,this.preventDefault=be,this.blur=Fe,this.handle=function(Ce){return!this.require()||(this.preventDefault&&Ce.preventDefault(),this.stopRepeat&&Ce.repeat==!0)?!1:(this.blur&&t(0,p=!1),G(),!0)}}}const Te={shift:{Enter:new me(()=>{ee(0,0)&&Se(0,0)})},other:{Enter:new me(()=>{v(h,1)&&b(h,1)}),Backspace:new me(()=>{_(h)},()=>f.length==0),ArrowUp:new me(()=>b(h,-1)),ArrowDown:new me(()=>b(h,1)),ArrowLeft:new me(()=>k()),ArrowRight:new me(()=>{c.length>0?Se(0,0):b(h,1)})}};function C(L){L.shiftKey&&Te.shift[L.key]?Te.shift[L.key].handle(L):Te.other[L.key]&&Te.other[L.key].handle(L)}function Q(L){D||s[i].history.addPending("edit",[...l],{lastContent:f,getNextContent(){return f},createEditBreak(){D=!1}}),D=!0}function ee(L,G){let ie=L+G;if(d<V){let de=[...c];de.splice(ie,0,je(ie,d+1,!0));for(let be=ie;be<de.length;be++)de[be].index=be;return s[i].history.add("add",[...l,ie]),t(2,c=[...de]),!0}else return He(),!1}function ge(L){return a(this,void 0,void 0,function*(){if(c.length>1||d>=1){let G=[...c];s[i].history.add("delete",[...l,L],{box:G[L]}),G[L].focus=!1,t(2,c=[...G]),yield Ee(),G.splice(L,1);for(let ie=0;ie<G.length;ie++)G[ie].index=ie;return t(2,c=[...G]),c[L-1]?Se(L-1,0):c.length==0?He():L==0&&Se(0,0),!0}else return Se(0,0),!1})}function Se(L,G){let ie=L+G;if(ie<0){He();return}ie>=c.length?c[c.length-1].children.length>0?t(2,c[c.length-1].children[0].focus=!0,c):t(2,c[L].focus=!0,c):t(2,c[ie].focus=!0,c),t(2,c)}function He(){t(0,p=!0)}let Ge,Ye;const en=()=>{v(h,0)&&b(h,0)};function tn(L){f=L,t(1,f)}function nn(L){Y[L?"unshift":"push"](()=>{O=L,t(9,O)})}const ln=()=>{v(h,1)&&b(h,1)},on=()=>{ee(0,0),Se(0,0)};function sn(L,G){n.$$.not_equal(G.content,L)&&(G.content=L,t(2,c))}function an(L,G){n.$$.not_equal(G.children,L)&&(G.children=L,t(2,c))}function un(L,G){n.$$.not_equal(G.index,L)&&(G.index=L,t(2,c))}function rn(L,G){n.$$.not_equal(G.level,L)&&(G.level=L,t(2,c))}function fn(L,G){n.$$.not_equal(G.focus,L)&&(G.focus=L,t(2,c))}function cn(L){ve.call(this,n,L)}return n.$$set=L=>{"root"in L&&t(3,r=L.root),"content"in L&&t(1,f=L.content),"children"in L&&t(2,c=L.children),"index"in L&&t(4,h=L.index),"level"in L&&t(5,d=L.level),"focus"in L&&t(0,p=L.focus),"parentPath"in L&&t(26,g=L.parentPath),"addSibling"in L&&t(6,v=L.addSibling),"deleteSelf"in L&&t(27,_=L.deleteSelf),"focusSibling"in L&&t(7,b=L.focusSibling),"focusParent"in L&&t(28,k=L.focusParent),"dispatchSelfFocus"in L&&t(29,z=L.dispatchSelfFocus)},n.$$.update=()=>{n.$$.dirty[0]&67108880&&t(8,l=[...g,h]),n.$$.dirty[0]&1&&M(),n.$$.dirty[0]&256&&U(),n.$$.dirty[0]&48&&(d==1&&h==0?t(11,ce="type here"):t(11,ce="")),n.$$.dirty[0]&32&&(d%2==0&&!T||d%2==1&&T?t(12,Ge="accent-secondary"):t(12,Ge="accent")),n.$$.dirty[0]&32&&(d%2==0&&!T||d%2==1&&T?t(13,Ye="accent"):t(13,Ye="accent-secondary"))},[p,f,c,r,h,d,v,b,l,O,w,ce,Ge,Ye,o,V,A,J,We,Je,C,Q,ee,ge,Se,He,g,_,k,z,en,tn,nn,ln,on,sn,an,un,rn,fn,cn]}class $t extends ne{constructor(e){super();le(this,e,Hn,Dn,te,{root:3,content:1,children:2,index:4,level:5,focus:0,parentPath:26,addSibling:6,deleteSelf:27,focusSibling:7,focusParent:28,dispatchSelfFocus:29},null,[-1,-1])}}function Bn(n){let e,t;return{c(){e=S("div"),t=pe(n[0]),m(e,"class","top svelte-10zixka")},m(l,i){H(l,e,i),y(e,t)},p(l,[i]){i&1&&ye(t,l[0])},i:ae,o:ae,d(l){l&&B(e)}}}function Vn(n,e,t){let{column:l}=e;return n.$$set=i=>{"column"in i&&t(0,l=i.column)},[l]}class jn extends ne{constructor(e){super();le(this,e,Vn,Bn,te,{column:0})}}function wt(n,e,t){const l=n.slice();return l[8]=e[t],l[10]=t,l}function kt(n,e,t){const l=n.slice();return l[11]=e[t],l[10]=t,l}function yt(n){let e,t,l,i,s;return t=new jn({props:{column:n[11]}}),t.$on("focusFlow",n[7]),{c(){e=S("div"),I(t.$$.fragment),l=N(),m(e,"class",i=se(`header palette-${!!(n[10]%2)==n[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666")},m(o,a){H(o,e,a),K(t,e,null),y(e,l),s=!0},p(o,a){const u={};a&1&&(u.column=o[11]),t.$set(u),(!s||a&1&&i!==(i=se(`header palette-${!!(o[10]%2)==o[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666"))&&m(e,"class",i)},i(o){s||(F(t.$$.fragment,o),s=!0)},o(o){q(t.$$.fragment,o),s=!1},d(o){o&&B(e),X(t)}}}function St(n){let e,t;return{c(){e=S("div"),m(e,"class",t=se(`column palette-${!!(n[10]%2)==n[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")},m(l,i){H(l,e,i)},p(l,i){i&1&&t!==(t=se(`column palette-${!!(l[10]%2)==l[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")&&m(e,"class",t)},d(l){l&&B(e)}}}function Nn(n){let e,t,l,i,s,o,a,u,r,f,c,h,d,p,g;function v(w){n[2](w)}function _(w){n[3](w)}function b(w){n[4](w)}function k(w){n[5](w)}function z(w){n[6](w)}let R={root:!0};n[0].content!==void 0&&(R.content=n[0].content),n[0].children!==void 0&&(R.children=n[0].children),n[0].index!==void 0&&(R.index=n[0].index),n[0].level!==void 0&&(R.level=n[0].level),n[0].focus!==void 0&&(R.focus=n[0].focus),i=new $t({props:R}),Y.push(()=>$(i,"content",v)),Y.push(()=>$(i,"children",_)),Y.push(()=>$(i,"index",b)),Y.push(()=>$(i,"level",k)),Y.push(()=>$(i,"focus",z)),i.$on("saveFocus",n[1]);let T=n[0].columns,j=[];for(let w=0;w<T.length;w+=1)j[w]=yt(kt(n,T,w));const V=w=>q(j[w],1,1,()=>{j[w]=null});let O=n[0].columns,A=[];for(let w=0;w<O.length;w+=1)A[w]=St(wt(n,O,w));return{c(){e=S("div"),t=S("div"),l=S("div"),I(i.$$.fragment),f=N(),c=S("div");for(let w=0;w<j.length;w+=1)j[w].c();h=N(),d=S("div");for(let w=0;w<A.length;w+=1)A[w].c();m(l,"class","content svelte-150s666"),m(c,"class","headers svelte-150s666"),m(d,"class","columns svelte-150s666"),m(t,"class","viewer svelte-150s666"),m(e,"class","top svelte-150s666"),m(e,"style",p=`--column-count: ${n[0].columns.length};`),W(e,"invert",n[0].invert)},m(w,P){H(w,e,P),y(e,t),y(t,l),K(i,l,null),y(t,f),y(t,c);for(let J=0;J<j.length;J+=1)j[J].m(c,null);y(t,h),y(t,d);for(let J=0;J<A.length;J+=1)A[J].m(d,null);g=!0},p(w,[P]){const J={};if(!s&&P&1&&(s=!0,J.content=w[0].content,x(()=>s=!1)),!o&&P&1&&(o=!0,J.children=w[0].children,x(()=>o=!1)),!a&&P&1&&(a=!0,J.index=w[0].index,x(()=>a=!1)),!u&&P&1&&(u=!0,J.level=w[0].level,x(()=>u=!1)),!r&&P&1&&(r=!0,J.focus=w[0].focus,x(()=>r=!1)),i.$set(J),P&1){T=w[0].columns;let D;for(D=0;D<T.length;D+=1){const M=kt(w,T,D);j[D]?(j[D].p(M,P),F(j[D],1)):(j[D]=yt(M),j[D].c(),F(j[D],1),j[D].m(c,null))}for(re(),D=T.length;D<j.length;D+=1)V(D);fe()}if(P&1){O=w[0].columns;let D;for(D=0;D<O.length;D+=1){const M=wt(w,O,D);A[D]?A[D].p(M,P):(A[D]=St(M),A[D].c(),A[D].m(d,null))}for(;D<A.length;D+=1)A[D].d(1);A.length=O.length}(!g||P&1&&p!==(p=`--column-count: ${w[0].columns.length};`))&&m(e,"style",p),P&1&&W(e,"invert",w[0].invert)},i(w){if(!g){F(i.$$.fragment,w);for(let P=0;P<T.length;P+=1)F(j[P]);g=!0}},o(w){q(i.$$.fragment,w),j=j.filter(Boolean);for(let P=0;P<j.length;P+=1)q(j[P]);g=!1},d(w){w&&B(e),X(i),qe(j,w),qe(A,w)}}}function zn(n,e,t){let{root:l}=e;rt("invert",{getinvert:()=>l.invert}),rt("columnCount",{getColumnCount:()=>l.columns.length});function i(c){t(0,l.lastFocus=c.detail,l),t(0,l)}function s(c){n.$$.not_equal(l.content,c)&&(l.content=c,t(0,l))}function o(c){n.$$.not_equal(l.children,c)&&(l.children=c,t(0,l))}function a(c){n.$$.not_equal(l.index,c)&&(l.index=c,t(0,l))}function u(c){n.$$.not_equal(l.level,c)&&(l.level=c,t(0,l))}function r(c){n.$$.not_equal(l.focus,c)&&(l.focus=c,t(0,l))}function f(c){ve.call(this,n,c)}return n.$$set=c=>{"root"in c&&t(0,l=c.root)},[l,i,s,o,a,u,r,f]}class Un extends ne{constructor(e){super();le(this,e,zn,Nn,te,{root:0})}}function En(n){let e,t,l,i,s,o;function a(r){n[11](r)}let u={nowrap:!0,placeholder:"type name here"};return n[1]!==void 0&&(u.value=n[1]),l=new at({props:u}),Y.push(()=>$(l,"value",a)),n[12](l),l.$on("blur",n[5]),l.$on("focus",n[6]),l.$on("keydown",n[7]),l.$on("beforeinput",n[8]),{c(){e=S("div"),t=S("div"),I(l.$$.fragment),m(t,"class","content svelte-xvt21q"),W(t,"focus",n[0]),m(e,"class",s=se(`top palette-${n[4]}`)+" svelte-xvt21q"),W(e,"invert",n[2])},m(r,f){H(r,e,f),y(e,t),K(l,t,null),o=!0},p(r,[f]){const c={};!i&&f&2&&(i=!0,c.value=r[1],x(()=>i=!1)),l.$set(c),f&1&&W(t,"focus",r[0]),(!o||f&16&&s!==(s=se(`top palette-${r[4]}`)+" svelte-xvt21q"))&&m(e,"class",s),f&20&&W(e,"invert",r[2])},i(r){o||(F(l.$$.fragment,r),o=!0)},o(r){q(l.$$.fragment,r),o=!1},d(r){r&&B(e),n[12](null),X(l)}}}function In(n,e,t){let l,i,s;_e(n,Ae,T=>t(15,i=T)),_e(n,oe,T=>t(16,s=T));const o=nt();let{content:a}=e,{children:u}=e,{index:r}=e,{focus:f}=e,{invert:c}=e,h;function d(){f&&t(0,f=!1)}function p(){f||t(0,f=!0)}function g(T){(T.key=="Enter"||T.key=="ArrowDown")&&(T.preventDefault(),u.length>0&&(t(9,u[0].focus=!0,u),t(0,f=!1)))}let v=!1;function _(){f?(s[i].history.addFocus([...l]),o("saveFocus",l),h&&h.focus()):v=!1}Yt(_);function b(T){v||s[i].history.addPending("edit",[...l],{lastContent:a,getNextContent(){return a},createEditBreak(){v=!1}}),v=!0}let k="plain";function z(T){a=T,t(1,a)}function R(T){Y[T?"unshift":"push"](()=>{h=T,t(3,h)})}return n.$$set=T=>{"content"in T&&t(1,a=T.content),"children"in T&&t(9,u=T.children),"index"in T&&t(10,r=T.index),"focus"in T&&t(0,f=T.focus),"invert"in T&&t(2,c=T.invert)},n.$$.update=()=>{n.$$.dirty&1024&&(l=[r]),n.$$.dirty&1&&_(),n.$$.dirty&4&&(c?t(4,k="accent-secondary"):t(4,k="accent"))},[f,a,c,h,k,d,p,g,b,u,r,z,R]}class Kn extends ne{constructor(e){super();le(this,e,In,En,te,{content:1,children:9,index:10,focus:0,invert:2})}}function Ft(n,e,t){const l=n.slice();return l[1]=e[t],l[3]=t,l}function Xn(n){let e;return{c(){e=pe("+")},m(t,l){H(t,e,l)},d(t){t&&B(e)}}}function Ct(n){let e,t,l=n[1]+"",i,s=n[3]!=0&&Xn();return{c(){s&&s.c(),e=N(),t=S("kbd"),i=pe(l),m(t,"class","key svelte-eb7adw")},m(o,a){s&&s.m(o,a),H(o,e,a),H(o,t,a),y(t,i)},p(o,a){a&1&&l!==(l=o[1]+"")&&ye(i,l)},d(o){s&&s.d(o),o&&B(e),o&&B(t)}}}function Wn(n){let e,t=n[0],l=[];for(let i=0;i<t.length;i+=1)l[i]=Ct(Ft(n,t,i));return{c(){e=S("span");for(let i=0;i<l.length;i+=1)l[i].c();m(e,"class","top svelte-eb7adw")},m(i,s){H(i,e,s);for(let o=0;o<l.length;o+=1)l[o].m(e,null)},p(i,[s]){if(s&1){t=i[0];let o;for(o=0;o<t.length;o+=1){const a=Ft(i,t,o);l[o]?l[o].p(a,s):(l[o]=Ct(a),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},i:ae,o:ae,d(i){i&&B(e),qe(l,i)}}}function Jn(n,e,t){let{keys:l}=e;return n.$$set=i=>{"keys"in i&&t(0,l=i.keys)},[l]}class Gn extends ne{constructor(e){super();le(this,e,Jn,Wn,te,{keys:0})}}function Yn(n){let e;const t=n[13].default,l=lt(t,n,n[12],null);return{c(){l&&l.c()},m(i,s){l&&l.m(i,s),e=!0},p(i,s){l&&l.p&&(!e||s&4096)&&it(l,t,i,i[12],e?st(t,i[12],s,null):ot(i[12]),null)},i(i){e||(F(l,i),e=!0)},o(i){q(l,i),e=!1},d(i){l&&l.d(i)}}}function Qn(n){let e,t,l,i,s,o;const a=n[13].default,u=lt(a,n,n[12],null);let r=n[4]&&Lt(n);return{c(){e=S("div"),u&&u.c(),t=N(),r&&r.c(),l=Xe(),m(e,"class","element svelte-1p8z6bu")},m(f,c){H(f,e,c),u&&u.m(e,null),n[14](e),H(f,t,c),r&&r.m(f,c),H(f,l,c),i=!0,s||(o=[E(e,"mouseover",n[8]),E(e,"focus",n[8]),E(e,"mouseleave",n[10]),E(e,"blur",n[10]),E(e,"mousemove",n[9])],s=!0)},p(f,c){u&&u.p&&(!i||c&4096)&&it(u,a,f,f[12],i?st(a,f[12],c,null):ot(f[12]),null),f[4]?r?(r.p(f,c),c&16&&F(r,1)):(r=Lt(f),r.c(),F(r,1),r.m(l.parentNode,l)):r&&(re(),q(r,1,1,()=>{r=null}),fe())},i(f){i||(F(u,f),F(r),i=!0)},o(f){q(u,f),q(r),i=!1},d(f){f&&B(e),u&&u.d(f),n[14](null),f&&B(t),r&&r.d(f),f&&B(l),s=!1,ke(o)}}}function Lt(n){let e,t,l,i,s,o,a,u=!n[2]&&n[1]&&Mt(n),r=n[2]&&qt(n);return{c(){e=S("div"),t=S("div"),l=pe(n[0]),i=N(),u&&u.c(),s=N(),r&&r.c(),m(t,"class","content"),Ne(e,"top",n[6]+"px"),Ne(e,"left",n[5]+"px"),m(e,"class","tooltip svelte-1p8z6bu")},m(f,c){H(f,e,c),y(e,t),y(t,l),y(e,i),u&&u.m(e,null),y(e,s),r&&r.m(e,null),n[15](e),a=!0},p(f,c){(!a||c&1)&&ye(l,f[0]),!f[2]&&f[1]?u?(u.p(f,c),c&6&&F(u,1)):(u=Mt(f),u.c(),F(u,1),u.m(e,s)):u&&(re(),q(u,1,1,()=>{u=null}),fe()),f[2]?r?r.p(f,c):(r=qt(f),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!a||c&64)&&Ne(e,"top",f[6]+"px"),(!a||c&32)&&Ne(e,"left",f[5]+"px")},i(f){a||(F(u),we(()=>{o||(o=Re(e,_t,{},!0)),o.run(1)}),a=!0)},o(f){q(u),o||(o=Re(e,_t,{},!1)),o.run(0),a=!1},d(f){f&&B(e),u&&u.d(),r&&r.d(),n[15](null),f&&o&&o.end()}}}function Mt(n){let e,t;return e=new Gn({props:{keys:n[1]}}),{c(){I(e.$$.fragment)},m(l,i){K(e,l,i),t=!0},p(l,i){const s={};i&2&&(s.keys=l[1]),e.$set(s)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function qt(n){let e,t;return{c(){e=S("div"),t=pe(n[2]),m(e,"class","disabled svelte-1p8z6bu")},m(l,i){H(l,e,i),y(e,t)},p(l,i){i&4&&ye(t,l[2])},d(l){l&&B(e)}}}function Zn(n){let e,t,l,i;const s=[Qn,Yn],o=[];function a(u,r){return u[0]?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),l=Xe()},m(u,r){o[e].m(u,r),H(u,l,r),i=!0},p(u,[r]){let f=e;e=a(u),e===f?o[e].p(u,r):(re(),q(o[f],1,1,()=>{o[f]=null}),fe(),t=o[e],t?t.p(u,r):(t=o[e]=s[e](u),t.c()),F(t,1),t.m(l.parentNode,l))},i(u){i||(F(t),i=!0)},o(u){q(t),i=!1},d(u){o[e].d(u),u&&B(l)}}}function $n(n,e,t){let{$$slots:l={},$$scope:i}=e;var s=this&&this.__awaiter||function(R,T,j,V){function O(A){return A instanceof j?A:new j(function(w){w(A)})}return new(j||(j=Promise))(function(A,w){function P(M){try{D(V.next(M))}catch(U){w(U)}}function J(M){try{D(V.throw(M))}catch(U){w(U)}}function D(M){M.done?A(M.value):O(M.value).then(P,J)}D((V=V.apply(R,T||[])).next())})};let{content:o}=e,{shortcut:a}=e,{disabled:u=!1}=e,{layout:r="bottom"}=e,f=!1,c=0,h=0,d,p;function g(){t(4,f=!0),v()}function v(){if(p){let R=d.getBoundingClientRect();r=="bottom"||r=="top"?(t(5,c=R.left-p.offsetWidth/2+R.width/2),c<4?t(5,c=4):c+p.offsetWidth>window.innerWidth-4&&t(5,c=window.innerWidth-p.offsetWidth-4),r=="bottom"?t(6,h=R.bottom+4):r=="top"&&t(6,h=R.top-p.offsetHeight-4)):(r=="left"||r=="right")&&(t(6,h=R.top-p.offsetHeight/2+R.height/2),h<4?t(6,h=4):h+p.offsetHeight>window.innerHeight-4&&t(6,h=window.innerHeight-p.offsetHeight-4),r=="left"?t(5,c=R.left-p.offsetWidth-4):r=="right"&&t(5,c=R.right+4))}}function _(){return s(this,void 0,void 0,function*(){yield Ee(),v()})}function b(){t(4,f=!1)}function k(R){Y[R?"unshift":"push"](()=>{d=R,t(7,d)})}function z(R){Y[R?"unshift":"push"](()=>{p=R,t(3,p)})}return n.$$set=R=>{"content"in R&&t(0,o=R.content),"shortcut"in R&&t(1,a=R.shortcut),"disabled"in R&&t(2,u=R.disabled),"layout"in R&&t(11,r=R.layout),"$$scope"in R&&t(12,i=R.$$scope)},n.$$.update=()=>{n.$$.dirty&2063&&_()},[o,a,u,p,f,c,h,d,g,v,b,r,i,l,k,z]}class xn extends ne{constructor(e){super();le(this,e,$n,Zn,te,{content:0,shortcut:1,disabled:2,layout:11})}}function Tt(n){let e,t;return{c(){e=S("p"),t=pe(n[1]),m(e,"class","svelte-1ganils")},m(l,i){H(l,e,i),y(e,t)},p(l,i){i&2&&ye(t,l[1])},d(l){l&&B(e)}}}function el(n){let e,t,l,i,s,o,a,u;t=new Qt({props:{name:n[0],size:"var(--button-size)"}});let r=n[1]&&Tt(n);return{c(){e=S("button"),I(t.$$.fragment),l=N(),r&&r.c(),m(e,"class",i=se(`top palette-${n[3]?"disabled":n[4]}`)+" svelte-1ganils"),e.disabled=s=!!n[3],W(e,"disabled",n[3])},m(f,c){H(f,e,c),K(t,e,null),y(e,l),r&&r.m(e,null),o=!0,a||(u=[E(e,"click",n[8]),E(e,"mousedown",nl)],a=!0)},p(f,c){const h={};c&1&&(h.name=f[0]),t.$set(h),f[1]?r?r.p(f,c):(r=Tt(f),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!o||c&24&&i!==(i=se(`top palette-${f[3]?"disabled":f[4]}`)+" svelte-1ganils"))&&m(e,"class",i),(!o||c&8&&s!==(s=!!f[3]))&&(e.disabled=s),c&24&&W(e,"disabled",f[3])},i(f){o||(F(t.$$.fragment,f),o=!0)},o(f){q(t.$$.fragment,f),o=!1},d(f){f&&B(e),X(t),r&&r.d(),a=!1,ke(u)}}}function tl(n){let e,t;return e=new xn({props:{content:n[2],disabled:n[3]&&n[6],shortcut:n[5],layout:n[7],$$slots:{default:[el]},$$scope:{ctx:n}}}),{c(){I(e.$$.fragment)},m(l,i){K(e,l,i),t=!0},p(l,[i]){const s={};i&4&&(s.content=l[2]),i&72&&(s.disabled=l[3]&&l[6]),i&32&&(s.shortcut=l[5]),i&128&&(s.layout=l[7]),i&539&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function nl(n){n.preventDefault()}function ll(n,e,t){let{icon:l}=e,{text:i=null}=e,{tooltip:s=null}=e,{disabled:o=!1}=e,{palette:a="plain"}=e,{shortcut:u=null}=e,{disabledReason:r="disabled"}=e,{tooltipLayout:f="bottom"}=e;function c(h){ve.call(this,n,h)}return n.$$set=h=>{"icon"in h&&t(0,l=h.icon),"text"in h&&t(1,i=h.text),"tooltip"in h&&t(2,s=h.tooltip),"disabled"in h&&t(3,o=h.disabled),"palette"in h&&t(4,a=h.palette),"shortcut"in h&&t(5,u=h.shortcut),"disabledReason"in h&&t(6,r=h.disabledReason),"tooltipLayout"in h&&t(7,f=h.tooltipLayout)},[l,i,s,o,a,u,r,f,c]}class ue extends ne{constructor(e){super();le(this,e,ll,tl,te,{icon:0,text:1,tooltip:2,disabled:3,palette:4,shortcut:5,disabledReason:6,tooltipLayout:7})}}function il(n){let e,t;const l=n[1].default,i=lt(l,n,n[0],null);return{c(){e=S("div"),i&&i.c(),m(e,"class","top svelte-p5tbxi")},m(s,o){H(s,e,o),i&&i.m(e,null),t=!0},p(s,[o]){i&&i.p&&(!t||o&1)&&it(i,l,s,s[0],t?st(l,s[0],o,null):ot(s[0]),null)},i(s){t||(F(i,s),t=!0)},o(s){q(i,s),t=!1},d(s){s&&B(e),i&&i.d(s)}}}function ol(n,e,t){let{$$slots:l={},$$scope:i}=e;return n.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,l]}class xt extends ne{constructor(e){super();le(this,e,ol,il,te,{})}}function sl(n){let e,t,l,i,s,o,a,u,r,f,c,h;return e=new ue({props:{icon:"undo",disabled:n[2][n[1]].history.index==-1,tooltip:"undo",shortcut:["cmd","z"],disabledReason:"nothing to undo"}}),e.$on("click",n[7]),l=new ue({props:{disabled:n[2][n[1]].history.index==n[2][n[1]].history.data.length-1,icon:"redo",tooltip:"redo",shortcut:["cmd","shift","z"],disabledReason:"nothing to redo"}}),l.$on("click",n[8]),s=new ue({props:{icon:"addRight",disabled:!n[0],disabledReason:ze,tooltip:"add response",shortcut:["shift","enter"]}}),s.$on("click",n[4]),a=new ue({props:{icon:"addUp",disabled:!n[0],disabledReason:ze,tooltip:"add arguement above"}}),a.$on("click",n[9]),r=new ue({props:{icon:"addDown",disabled:!n[0],disabledReason:ze,tooltip:"add arguement below",shortcut:["enter"]}}),r.$on("click",n[10]),c=new ue({props:{icon:"delete",disabled:!n[0],disabledReason:ze,tooltip:"delete selected"}}),c.$on("click",n[3]),{c(){I(e.$$.fragment),t=N(),I(l.$$.fragment),i=N(),I(s.$$.fragment),o=N(),I(a.$$.fragment),u=N(),I(r.$$.fragment),f=N(),I(c.$$.fragment)},m(d,p){K(e,d,p),H(d,t,p),K(l,d,p),H(d,i,p),K(s,d,p),H(d,o,p),K(a,d,p),H(d,u,p),K(r,d,p),H(d,f,p),K(c,d,p),h=!0},p(d,p){const g={};p&6&&(g.disabled=d[2][d[1]].history.index==-1),e.$set(g);const v={};p&6&&(v.disabled=d[2][d[1]].history.index==d[2][d[1]].history.data.length-1),l.$set(v);const _={};p&1&&(_.disabled=!d[0]),s.$set(_);const b={};p&1&&(b.disabled=!d[0]),a.$set(b);const k={};p&1&&(k.disabled=!d[0]),r.$set(k);const z={};p&1&&(z.disabled=!d[0]),c.$set(z)},i(d){h||(F(e.$$.fragment,d),F(l.$$.fragment,d),F(s.$$.fragment,d),F(a.$$.fragment,d),F(r.$$.fragment,d),F(c.$$.fragment,d),h=!0)},o(d){q(e.$$.fragment,d),q(l.$$.fragment,d),q(s.$$.fragment,d),q(a.$$.fragment,d),q(r.$$.fragment,d),q(c.$$.fragment,d),h=!1},d(d){X(e,d),d&&B(t),X(l,d),d&&B(i),X(s,d),d&&B(o),X(a,d),d&&B(u),X(r,d),d&&B(f),X(c,d)}}}function al(n){let e,t,l,i,s,o;return l=new xt({props:{$$slots:{default:[sl]},$$scope:{ctx:n}}}),{c(){e=S("div"),t=S("div"),I(l.$$.fragment),m(t,"class","buttons-wrapper svelte-psed4t"),m(e,"class","top svelte-psed4t")},m(a,u){H(a,e,u),y(e,t),K(l,t,null),i=!0,s||(o=E(e,"mousedown",ul),s=!0)},p(a,[u]){const r={};u&8199&&(r.$$scope={dirty:u,ctx:a}),l.$set(r)},i(a){i||(F(l.$$.fragment,a),i=!0)},o(a){q(l.$$.fragment,a),i=!1},d(a){a&&B(e),X(l),s=!1,o()}}}let ze="no cell selected";function ul(n){n.preventDefault()}function rl(n,e,t){let l,i;_e(n,Ae,v=>t(1,l=v)),_e(n,oe,v=>t(2,i=v));var s=this&&this.__awaiter||function(v,_,b,k){function z(R){return R instanceof b?R:new b(function(T){T(R)})}return new(b||(b=Promise))(function(R,T){function j(A){try{O(k.next(A))}catch(w){T(w)}}function V(A){try{O(k.throw(A))}catch(w){T(w)}}function O(A){A.done?R(A.value):z(A.value).then(j,V)}O((k=k.apply(v,_||[])).next())})};let{flow:o}=e,a=!1;function u(){return s(this,void 0,void 0,function*(){if(yield Ee(),o.lastFocus&&o.lastFocus.length>1){let v=he(o.lastFocus);t(0,a=v==null?void 0:v.focus)}})}Gt(function(){u()});function r(){return s(this,void 0,void 0,function*(){if(!a)return;let v=he(o.lastFocus,1),_=he(o.lastFocus),b=[...v.children];if(b.length>1||v.level>=1){i[l].history.add("delete",o.lastFocus,{box:b[_.index]}),b[_.index].focus=!1,v.children=[...b],t(6,o),yield Ee(),b.splice(_.index,1);for(let k=_.index;k<b.length;k++)b[k].index=k;b.length<=0?v.focus=!0:_.index>=b.length?b[b.length-1].focus=!0:b[_.index].focus=!0,v.children=[...b],t(6,o)}})}function f(){if(!a)return;let v=he(o.lastFocus),_=[...v.children];if(v.level<o.columns.length){_.splice(0,0,je(0,v.level+1,!1));for(let b=0;b<_.length;b++)_[b].index=b;i[l].history.add("add",[...o.lastFocus,0]),v.children=[..._],t(6,o)}}function c(v){if(!a)return;let _=he(o.lastFocus,1),b=he(o.lastFocus),k=[..._.children];k.splice(b.index+v,0,je(b.index+v,b.level,!1));for(let R=b.index;R<k.length;R++)k[R].index=R;let z=[...o.lastFocus];v==0?(z[z.length-1]-=0,t(6,o.lastFocus[o.lastFocus.length-1]+=1,o)):z[z.length-1]+=1,i[l].history.add("add",z),_.children=[...k],t(6,o)}const h=()=>i[l].history.undo(),d=()=>i[l].history.redo(),p=()=>c(0),g=()=>c(1);return n.$$set=v=>{"flow"in v&&t(6,o=v.flow)},[a,l,i,r,f,c,o,h,d,p,g]}class fl extends ne{constructor(e){super();le(this,e,rl,al,te,{flow:6})}}function cl(n){let e,t,l,i,s,o,a,u,r;l=new ue({props:{icon:"delete",tooltip:"close"}}),l.$on("click",function(){vn(n[1])&&n[1].apply(this,arguments)});var f=n[0];function c(h){return{props:{closePopup:h[1]}}}return f&&(s=new f(c(n))),{c(){e=S("div"),t=S("div"),I(l.$$.fragment),i=N(),s&&I(s.$$.fragment),m(t,"class","close svelte-xzcwlv"),m(e,"class","top svelte-xzcwlv")},m(h,d){H(h,e,d),y(e,t),K(l,t,null),y(e,i),s&&K(s,e,null),a=!0,u||(r=E(window,"keydown",n[2]),u=!0)},p(h,[d]){n=h;const p={};if(d&2&&(p.closePopup=n[1]),f!==(f=n[0])){if(s){re();const g=s;q(g.$$.fragment,1,0,()=>{X(g,1)}),fe()}f?(s=new f(c(n)),I(s.$$.fragment),F(s.$$.fragment,1),K(s,e,null)):s=null}else f&&s.$set(p)},i(h){a||(F(l.$$.fragment,h),s&&F(s.$$.fragment,h),we(()=>{o||(o=Re(e,pt,{},!0)),o.run(1)}),a=!0)},o(h){q(l.$$.fragment,h),s&&q(s.$$.fragment,h),o||(o=Re(e,pt,{},!1)),o.run(0),a=!1},d(h){h&&B(e),X(l),s&&X(s),h&&o&&o.end(),u=!1,r()}}}function dl(n,e,t){let{component:l}=e,{closeSelf:i}=e;function s(o){o.key==="Escape"&&i()}return n.$$set=o=>{"component"in o&&t(0,l=o.component),"closeSelf"in o&&t(1,i=o.closeSelf)},[l,i,s]}class hl extends ne{constructor(e){super();le(this,e,dl,cl,te,{component:0,closeSelf:1})}}function _l(n){let e,t,l,i,s,o,a,u,r,f,c;return l=new ue({props:{icon:"download",text:"download as JSON",tooltip:"saves JSON file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),l.$on("click",n[1]),u=new ue({props:{icon:"download",text:"download as XLSX",tooltip:"saves XLSX file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),u.$on("click",n[2]),{c(){e=S("div"),t=S("section"),I(l.$$.fragment),i=N(),s=S("ul"),s.innerHTML=`<li>Can reopen file in this editor</li> 
      <li>More data is saved (last focused cell etc.)</li>`,o=N(),a=S("section"),I(u.$$.fragment),r=N(),f=S("ul"),f.innerHTML="<li>Anyone can view it</li>",m(s,"class","svelte-87ygo3"),m(t,"class","json svelte-87ygo3"),m(f,"class","svelte-87ygo3"),m(a,"class","xlsx svelte-87ygo3"),m(e,"class","top svelte-87ygo3")},m(h,d){H(h,e,d),y(e,t),K(l,t,null),y(t,i),y(t,s),y(e,o),y(e,a),K(u,a,null),y(a,r),y(a,f),c=!0},p(h,[d]){const p={};d&1&&(p.disabled=h[0].length==0),l.$set(p);const g={};d&1&&(g.disabled=h[0].length==0),u.$set(g)},i(h){c||(F(l.$$.fragment,h),F(u.$$.fragment,h),c=!0)},o(h){q(l.$$.fragment,h),q(u.$$.fragment,h),c=!1},d(h){h&&B(e),X(l),X(u)}}}function pl(n,e,t){let l;_e(n,oe,a=>t(0,l=a));let{closePopup:i}=e;function s(){let a=JSON.stringify(l,(r,f)=>{if(r!=="history")return f}),u=document.createElement("a");u.setAttribute("href","data:text/json;charset=utf-8, "+encodeURIComponent(a)),u.setAttribute("download","flow.json"),document.body.appendChild(u),u.click(),document.body.removeChild(u),i()}function o(){let a=new bn.exports.Workbook;for(let u of l){let f=function(d,p,g){for(;!r[g];){let v=[];for(let _=0;_<u.columns.length;_++)v.push("");r.push(v)}p>=0&&(r[g][p]=d.content),d.children.forEach(function(v,_){f(v,p+1,g+_)})},r=[];f(u,-1,0);let c=u.content;c.length>=31&&(c=c.substring(0,31));let h=a.addWorksheet(c);h.columns=u.columns.map(function(d){return{header:d,width:25}});for(let d=0;d<r.length;d++){let p=h.getRow(d+2);for(let g=0;g<r[d].length;g++)p.getCell(g+1).value=r[d][g]}h.getRow(1).font={bold:!0}}a.xlsx.writeBuffer({base64:!0}).then(function(u){let r=document.createElement("a"),f=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=URL.createObjectURL(f);r.href=c,r.download="flow.xlsx",document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(c)},0)}).catch(function(u){console.log(u.message)}),i()}return n.$$set=a=>{"closePopup"in a&&t(3,i=a.closePopup)},[l,s,o,i]}class gl extends ne{constructor(e){super();le(this,e,pl,_l,te,{closePopup:3})}}function ml(n){let e,t,l,i,s;return t=new ue({props:{icon:"upload",text:"choose file from computer",tooltip:"upload a JSON file from your computer",tooltipLayout:"top"}}),t.$on("click",vl),{c(){e=S("div"),I(t.$$.fragment),l=N(),i=S("p"),i.textContent="Or drag and drop a JSON file anywhere in this window",m(i,"class","svelte-1vv9x21"),m(e,"class","top svelte-1vv9x21")},m(o,a){H(o,e,a),K(t,e,null),y(e,l),y(e,i),s=!0},p:ae,i(o){s||(F(t.$$.fragment,o),s=!0)},o(o){q(t.$$.fragment,o),s=!1},d(o){o&&B(e),X(t)}}}function vl(){document.getElementById("uploadId").click()}function bl(n,e,t){let{closePopup:l}=e;return n.$$set=i=>{"closePopup"in i&&t(0,l=i.closePopup)},[l]}class wl extends ne{constructor(e){super();le(this,e,bl,ml,te,{closePopup:0})}}function kl(n){let e,t,l,i,s,o,a;return{c(){e=S("label"),t=S("input"),l=N(),i=S("div"),i.innerHTML='<div class="switch svelte-8bq301"></div>',m(t,"type","checkbox"),m(t,"class","svelte-8bq301"),m(i,"class","background svelte-8bq301"),m(e,"class",s=se(`palette-${n[1]}`)+" svelte-8bq301")},m(u,r){H(u,e,r),y(e,t),t.checked=n[0],y(e,l),y(e,i),o||(a=E(t,"change",n[4]),o=!0)},p(u,[r]){r&1&&(t.checked=u[0]),r&2&&s!==(s=se(`palette-${u[1]}`)+" svelte-8bq301")&&m(e,"class",s)},i:ae,o:ae,d(u){u&&B(e),o=!1,a()}}}function yl(n,e,t){let{value:l=1}=e,{auto:i=1}=e,s,o=!!l;function a(){o=this.checked,t(0,o)}return n.$$set=u=>{"value"in u&&t(2,l=u.value),"auto"in u&&t(3,i=u.auto)},n.$$.update=()=>{n.$$.dirty&1&&t(2,l=o?1:0),n.$$.dirty&12&&(l?l==i?t(1,s="accent-secondary"):t(1,s="accent"):t(1,s="plain"))},[o,s,l,i,a]}class Sl extends ne{constructor(e){super();le(this,e,yl,kl,te,{value:2,auto:3})}}function Ot(n,e,t){const l=n.slice();return l[11]=e[t],l[13]=t,l}function Pt(n){let e;return{c(){e=S("p"),e.textContent="default",m(e,"class","option-info svelte-ac5xa2")},m(t,l){H(t,e,l)},d(t){t&&B(e)}}}function At(n){let e,t,l,i,s,o,a,u=n[11]+"",r,f,c,h,d=n[13]==n[3]&&Pt();return{c(){e=S("label"),t=S("input"),s=N(),o=S("li"),a=S("p"),r=pe(u),f=N(),d&&d.c(),m(t,"type","radio"),m(t,"name",n[2]),t.checked=l=n[13]==n[0],t.__value=i=n[13],t.value=t.__value,m(t,"class","svelte-ac5xa2"),n[7][0].push(t),m(a,"class","svelte-ac5xa2"),m(o,"class","svelte-ac5xa2"),m(e,"class","svelte-ac5xa2")},m(p,g){H(p,e,g),y(e,t),t.checked=t.__value===n[0],y(e,s),y(e,o),y(o,a),y(a,r),y(o,f),d&&d.m(o,null),c||(h=E(t,"change",n[6]),c=!0)},p(p,g){g&4&&m(t,"name",p[2]),g&1&&l!==(l=p[13]==p[0])&&(t.checked=l),g&1&&(t.checked=t.__value===p[0]),g&2&&u!==(u=p[11]+"")&&ye(r,u),p[13]==p[3]?d||(d=Pt(),d.c(),d.m(o,null)):d&&(d.d(1),d=null)},d(p){p&&B(e),n[7][0].splice(n[7][0].indexOf(t),1),d&&d.d(),c=!1,h()}}}function Rt(n){let e,t,l,i,s,o,a,u,r,f,c,h;function d(v){n[9](v)}let p={placeholder:"custom",nowrap:!0};n[1].customOptionValue!==void 0&&(p.value=n[1].customOptionValue),a=new at({props:p}),Y.push(()=>$(a,"value",d)),a.$on("input",n[10]);let g=n[1].customOptionValue!=""&&Dt();return{c(){e=S("label"),t=S("input"),s=N(),o=S("li"),I(a.$$.fragment),r=N(),g&&g.c(),m(t,"type","radio"),m(t,"name",n[2]),t.checked=l=n[0]==n[1].options.length,t.__value=i=n[1].options.length,t.value=t.__value,m(t,"class","svelte-ac5xa2"),n[7][0].push(t),m(o,"class","svelte-ac5xa2"),m(e,"class","svelte-ac5xa2")},m(v,_){H(v,e,_),y(e,t),t.checked=t.__value===n[0],y(e,s),y(e,o),K(a,o,null),y(o,r),g&&g.m(o,null),f=!0,c||(h=E(t,"change",n[8]),c=!0)},p(v,_){(!f||_&4)&&m(t,"name",v[2]),(!f||_&3&&l!==(l=v[0]==v[1].options.length))&&(t.checked=l),(!f||_&2&&i!==(i=v[1].options.length))&&(t.__value=i,t.value=t.__value),_&1&&(t.checked=t.__value===v[0]);const b={};!u&&_&2&&(u=!0,b.value=v[1].customOptionValue,x(()=>u=!1)),a.$set(b),v[1].customOptionValue!=""?g||(g=Dt(),g.c(),g.m(o,null)):g&&(g.d(1),g=null)},i(v){f||(F(a.$$.fragment,v),f=!0)},o(v){q(a.$$.fragment,v),f=!1},d(v){v&&B(e),n[7][0].splice(n[7][0].indexOf(t),1),X(a),g&&g.d(),c=!1,h()}}}function Dt(n){let e;return{c(){e=S("p"),e.textContent="custom",m(e,"class","option-info svelte-ac5xa2")},m(t,l){H(t,e,l)},d(t){t&&B(e)}}}function Fl(n){let e,t,l,i,s,o,a,u,r,f=n[1].options,c=[];for(let d=0;d<f.length;d+=1)c[d]=At(Ot(n,f,d));let h=n[1].customOption&&Rt(n);return{c(){e=S("div"),t=S("div"),l=S("div"),s=N(),o=S("ul");for(let d=0;d<c.length;d+=1)c[d].c();a=N(),h&&h.c(),m(l,"class","switch svelte-ac5xa2"),m(l,"style",i=`--pos:calc(${n[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`),m(t,"class","background svelte-ac5xa2"),m(o,"class","svelte-ac5xa2"),m(e,"class",u=se(`top palette-${n[4]}`)+" svelte-ac5xa2")},m(d,p){H(d,e,p),y(e,t),y(t,l),y(e,s),y(e,o);for(let g=0;g<c.length;g+=1)c[g].m(o,null);y(o,a),h&&h.m(o,null),r=!0},p(d,[p]){if((!r||p&1&&i!==(i=`--pos:calc(${d[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`))&&m(l,"style",i),p&15){f=d[1].options;let g;for(g=0;g<f.length;g+=1){const v=Ot(d,f,g);c[g]?c[g].p(v,p):(c[g]=At(v),c[g].c(),c[g].m(o,a))}for(;g<c.length;g+=1)c[g].d(1);c.length=f.length}d[1].customOption?h?(h.p(d,p),p&2&&F(h,1)):(h=Rt(d),h.c(),F(h,1),h.m(o,null)):h&&(re(),q(h,1,1,()=>{h=null}),fe()),(!r||p&16&&u!==(u=se(`top palette-${d[4]}`)+" svelte-ac5xa2"))&&m(e,"class",u)},i(d){r||(F(h),r=!0)},o(d){q(h),r=!1},d(d){d&&B(e),qe(c,d),h&&h.d()}}}function Cl(n,e,t){let l,{name:i}=e,{value:s}=e,{auto:o}=e;const a=nt();let{detail:u}=e;const r=[[]];function f(){s=this.__value,t(0,s)}function c(){s=this.__value,t(0,s)}function h(p){n.$$.not_equal(u.customOptionValue,p)&&(u.customOptionValue=p,t(1,u))}const d=()=>a("forceUpdate");return n.$$set=p=>{"name"in p&&t(2,i=p.name),"value"in p&&t(0,s=p.value),"auto"in p&&t(3,o=p.auto),"detail"in p&&t(1,u=p.detail)},n.$$.update=()=>{n.$$.dirty&9&&t(4,l=o==s?"accent-secondary":"accent")},[s,u,i,o,l,a,f,r,c,h,d]}class Ll extends ne{constructor(e){super();le(this,e,Cl,Fl,te,{name:2,value:0,auto:3,detail:1})}}function Ml(n){let e,t,l,i,s,o,a,u,r,f,c,h,d,p,g,v;return{c(){e=S("div"),t=S("label"),l=S("div"),s=N(),o=S("input"),f=N(),c=S("label"),h=S("input"),m(l,"class","switch svelte-12gyw47"),m(l,"style",i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(n[0],n[1].max),n[1].min)-n[1].min)/(n[1].max-n[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${n[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`),m(o,"class","slider svelte-12gyw47"),m(o,"type","range"),m(o,"min",a=n[1].min),m(o,"max",u=n[1].max),m(o,"step",r=n[1].step),m(t,"class","svelte-12gyw47"),m(h,"type","number"),m(h,"class","svelte-12gyw47"),m(c,"class","small svelte-12gyw47"),m(e,"class",d=se(`top palette-${n[3]}`)+" svelte-12gyw47"),m(e,"style",p=`--value: ${n[0]}`),W(e,"hue",n[1].hue)},m(_,b){H(_,e,b),y(e,t),y(t,l),y(t,s),y(t,o),Oe(o,n[0]),y(e,f),y(e,c),y(c,h),Oe(h,n[0]),g||(v=[E(o,"change",n[8]),E(o,"input",n[8]),E(h,"input",n[9]),E(e,"mousedown",n[4]),E(e,"mousemove",n[5]),E(e,"mouseup",n[6])],g=!0)},p(_,[b]){b&7&&i!==(i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(_[0],_[1].max),_[1].min)-_[1].min)/(_[1].max-_[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${_[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`)&&m(l,"style",i),b&2&&a!==(a=_[1].min)&&m(o,"min",a),b&2&&u!==(u=_[1].max)&&m(o,"max",u),b&2&&r!==(r=_[1].step)&&m(o,"step",r),b&1&&Oe(o,_[0]),b&1&&xe(h.value)!==_[0]&&Oe(h,_[0]),b&8&&d!==(d=se(`top palette-${_[3]}`)+" svelte-12gyw47")&&m(e,"class",d),b&1&&p!==(p=`--value: ${_[0]}`)&&m(e,"style",p),b&10&&W(e,"hue",_[1].hue)},i:ae,o:ae,d(_){_&&B(e),g=!1,ke(v)}}}function ql(n,e,t){let l,{value:i}=e,{auto:s}=e,{detail:o}=e,a=!1,u=!1,r=0;function f(g){a=!0,r=g.pageX,t(2,u=!1)}function c(g){a&&Math.abs(r-g.pageX)>3&&t(2,u=!0)}function h(g){a=!1,t(2,u=!1)}function d(){i=xe(this.value),t(0,i)}function p(){i=xe(this.value),t(0,i)}return n.$$set=g=>{"value"in g&&t(0,i=g.value),"auto"in g&&t(7,s=g.auto),"detail"in g&&t(1,o=g.detail)},n.$$.update=()=>{n.$$.dirty&129&&t(3,l=s==i?"accent-secondary":"accent")},[i,o,u,l,f,c,h,s,d,p]}class Tl extends ne{constructor(e){super();le(this,e,ql,Ml,te,{value:0,auto:7,detail:1})}}function Ht(n){let e,t,l;function i(o){n[9](o)}let s={auto:n[0].auto};return n[1]!==void 0&&(s.value=n[1]),e=new Sl({props:s}),Y.push(()=>$(e,"value",i)),{c(){I(e.$$.fragment)},m(o,a){K(e,o,a),l=!0},p(o,a){const u={};a&1&&(u.auto=o[0].auto),!t&&a&2&&(t=!0,u.value=o[1],x(()=>t=!1)),e.$set(u)},i(o){l||(F(e.$$.fragment,o),l=!0)},o(o){q(e.$$.fragment,o),l=!1},d(o){X(e,o)}}}function Bt(n){let e,t,l;function i(o){n[10](o)}let s={name:n[0].name,auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(s.value=n[1]),e=new Ll({props:s}),Y.push(()=>$(e,"value",i)),e.$on("forceUpdate",n[11]),{c(){I(e.$$.fragment)},m(o,a){K(e,o,a),l=!0},p(o,a){const u={};a&1&&(u.name=o[0].name),a&1&&(u.auto=o[0].auto),a&1&&(u.detail=o[0].detail),!t&&a&2&&(t=!0,u.value=o[1],x(()=>t=!1)),e.$set(u)},i(o){l||(F(e.$$.fragment,o),l=!0)},o(o){q(e.$$.fragment,o),l=!1},d(o){X(e,o)}}}function Vt(n){let e,t,l;function i(o){n[12](o)}let s={auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(s.value=n[1]),e=new Tl({props:s}),Y.push(()=>$(e,"value",i)),{c(){I(e.$$.fragment)},m(o,a){K(e,o,a),l=!0},p(o,a){const u={};a&1&&(u.auto=o[0].auto),a&1&&(u.detail=o[0].detail),!t&&a&2&&(t=!0,u.value=o[1],x(()=>t=!1)),e.$set(u)},i(o){l||(F(e.$$.fragment,o),l=!0)},o(o){q(e.$$.fragment,o),l=!1},d(o){X(e,o)}}}function Ol(n){let e,t,l,i=n[0].name+"",s,o,a,u,r,f,c,h,d;u=new ue({props:{icon:"delete",tooltip:"reset to default",tooltipLayout:"right"}}),u.$on("click",n[6]);let p=n[0].type=="toggle"&&Ht(n),g=n[0].type=="radio"&&Bt(n),v=n[0].type=="slider"&&Vt(n);return{c(){e=S("div"),t=S("span"),l=S("h1"),s=pe(i),o=N(),a=S("div"),I(u.$$.fragment),r=N(),p&&p.c(),f=N(),g&&g.c(),c=N(),v&&v.c(),m(a,"class","reset svelte-1y1vqy1"),W(a,"hidden",n[1]==n[0].auto),m(t,"class","above svelte-1y1vqy1"),m(e,"class","top svelte-1y1vqy1"),m(e,"style",h=`--spotlight:${n[4]}`)},m(_,b){H(_,e,b),y(e,t),y(t,l),y(l,s),y(t,o),y(t,a),K(u,a,null),y(t,r),p&&p.m(t,null),y(e,f),g&&g.m(e,null),y(e,c),v&&v.m(e,null),n[13](e),d=!0},p(_,[b]){(!d||b&1)&&i!==(i=_[0].name+"")&&ye(s,i),b&3&&W(a,"hidden",_[1]==_[0].auto),_[0].type=="toggle"?p?(p.p(_,b),b&1&&F(p,1)):(p=Ht(_),p.c(),F(p,1),p.m(t,null)):p&&(re(),q(p,1,1,()=>{p=null}),fe()),_[0].type=="radio"?g?(g.p(_,b),b&1&&F(g,1)):(g=Bt(_),g.c(),F(g,1),g.m(e,c)):g&&(re(),q(g,1,1,()=>{g=null}),fe()),_[0].type=="slider"?v?(v.p(_,b),b&1&&F(v,1)):(v=Vt(_),v.c(),F(v,1),v.m(e,null)):v&&(re(),q(v,1,1,()=>{v=null}),fe()),(!d||b&16&&h!==(h=`--spotlight:${_[4]}`))&&m(e,"style",h)},i(_){d||(F(u.$$.fragment,_),F(p),F(g),F(v),d=!0)},o(_){q(u.$$.fragment,_),q(p),q(g),q(v),d=!1},d(_){_&&B(e),X(u),p&&p.d(),g&&g.d(),v&&v.d(),n[13](null)}}}function Pl(n,e,t){let l,i=ae,s=()=>(i(),i=wn(c,k=>t(4,l=k)),c);n.$$.on_destroy.push(()=>i());let{setting:o}=e,{key:a}=e,u=o.value;function r(k){Z.setValue(a,k),k=o.value}function f(){Z.setValue(a,o.auto),t(1,u=o.value)}Pe(Z.subscribe([a],function(k){o.value!=u&&t(1,u=o.value)}));let c=ft(0);s();let h;function d(){h.scrollIntoView({block:"center"}),s(t(2,c=ft(1,{duration:2e3}))),Me(c,l=0,l)}function p(k){u=k,t(1,u)}function g(k){u=k,t(1,u)}const v=()=>r(u);function _(k){u=k,t(1,u)}function b(k){Y[k?"unshift":"push"](()=>{h=k,t(3,h)})}return n.$$set=k=>{"setting"in k&&t(0,o=k.setting),"key"in k&&t(7,a=k.key)},n.$$.update=()=>{n.$$.dirty&2&&r(u)},[o,u,c,h,l,r,f,a,d,p,g,v,_,b]}class Al extends ne{constructor(e){super();le(this,e,Pl,Ol,te,{setting:0,key:7,scrollToSelf:8})}get scrollToSelf(){return this.$$.ctx[8]}}function jt(n,e,t){const l=n.slice();return l[6]=e[t],l[7]=e,l[8]=t,l}function Nt(n,e,t){const l=n.slice();return l[6]=e[t],l[8]=t,l}function zt(n){let e,t,l=Z.data[n[6]].name+"",i,s,o,a;function u(){return n[3](n[8])}return{c(){e=S("li"),t=S("button"),i=pe(l),s=N(),m(t,"class","svelte-s4ows6")},m(r,f){H(r,e,f),y(e,t),y(t,i),y(e,s),o||(a=E(t,"click",u),o=!0)},p(r,f){n=r},d(r){r&&B(e),o=!1,a()}}}function Ut(n){let e,t=n[8],l;const i=()=>n[5](e,t),s=()=>n[5](null,t);let o={key:n[6],setting:Z.data[n[6]]};return e=new Al({props:o}),i(),{c(){I(e.$$.fragment)},m(a,u){K(e,a,u),l=!0},p(a,u){t!==a[8]&&(s(),t=a[8],i());const r={};e.$set(r)},i(a){l||(F(e.$$.fragment,a),l=!0)},o(a){q(e.$$.fragment,a),l=!1},d(a){s(),X(e,a)}}}function Rl(n){let e,t,l,i,s,o,a,u,r,f,c,h=Object.keys(Z.data),d=[];for(let _=0;_<h.length;_+=1)d[_]=zt(Nt(n,h,_));a=new ue({props:{icon:"delete",text:"reset all settings"}}),a.$on("click",n[4]);let p=Object.keys(Z.data),g=[];for(let _=0;_<p.length;_+=1)g[_]=Ut(jt(n,p,_));const v=_=>q(g[_],1,1,()=>{g[_]=null});return{c(){e=S("div"),t=S("div"),l=S("ul");for(let _=0;_<d.length;_+=1)d[_].c();i=N(),s=S("div"),o=S("section"),I(a.$$.fragment),u=N(),r=S("section"),f=S("ul");for(let _=0;_<g.length;_+=1)g[_].c();m(l,"class","svelte-s4ows6"),m(t,"class","outline svelte-s4ows6"),m(o,"class","controls svelte-s4ows6"),m(f,"class","svelte-s4ows6"),m(r,"class","settings svelte-s4ows6"),m(s,"class","content svelte-s4ows6"),m(e,"class","top palette-plain svelte-s4ows6")},m(_,b){H(_,e,b),y(e,t),y(t,l);for(let k=0;k<d.length;k+=1)d[k].m(l,null);y(e,i),y(e,s),y(s,o),K(a,o,null),y(s,u),y(s,r),y(r,f);for(let k=0;k<g.length;k+=1)g[k].m(f,null);c=!0},p(_,[b]){if(b&2){h=Object.keys(Z.data);let k;for(k=0;k<h.length;k+=1){const z=Nt(_,h,k);d[k]?d[k].p(z,b):(d[k]=zt(z),d[k].c(),d[k].m(l,null))}for(;k<d.length;k+=1)d[k].d(1);d.length=h.length}if(b&1){p=Object.keys(Z.data);let k;for(k=0;k<p.length;k+=1){const z=jt(_,p,k);g[k]?(g[k].p(z,b),F(g[k],1)):(g[k]=Ut(z),g[k].c(),F(g[k],1),g[k].m(f,null))}for(re(),k=p.length;k<g.length;k+=1)v(k);fe()}},i(_){if(!c){F(a.$$.fragment,_);for(let b=0;b<p.length;b+=1)F(g[b]);c=!0}},o(_){q(a.$$.fragment,_),g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)q(g[b]);c=!1},d(_){_&&B(e),qe(d,_),X(a),qe(g,_)}}}function Dl(n,e,t){let{closePopup:l}=e;Pe(()=>{Z.saveToLocalStorage()});let i=[];function s(r){i[r].scrollToSelf()}const o=r=>s(r),a=()=>Z.resetToAuto();function u(r,f){Y[r?"unshift":"push"](()=>{i[f]=r,t(0,i)})}return n.$$set=r=>{"closePopup"in r&&t(2,l=r.closePopup)},[i,s,l,o,a,u]}class Hl extends ne{constructor(e){super();le(this,e,Dl,Rl,te,{closePopup:2})}}function Bl(n){let e;return{c(){e=pe("no name")},m(t,l){H(t,e,l)},p:ae,d(t){t&&B(e)}}}function Vl(n){let e=n[0].content+"",t;return{c(){t=pe(e)},m(l,i){H(l,t,i)},p(l,i){i&1&&e!==(e=l[0].content+"")&&ye(t,e)},d(l){l&&B(t)}}}function jl(n){let e,t,l,i,s,o;function a(f,c){return f[0].content?Vl:Bl}let u=a(n),r=u(n);return{c(){e=S("div"),t=S("button"),r.c(),m(t,"class","svelte-wa6l8r"),W(t,"selected",n[1]),W(t,"empty",n[0].content.length==0),m(e,"class",l=se(`top palette-${n[2]}`)+" svelte-wa6l8r"),W(e,"invert",n[0].invert)},m(f,c){H(f,e,c),y(e,t),r.m(t,null),s||(o=E(t,"click",n[3]),s=!0)},p(f,[c]){u===(u=a(f))&&r?r.p(f,c):(r.d(1),r=u(f),r&&(r.c(),r.m(t,null))),c&2&&W(t,"selected",f[1]),c&1&&W(t,"empty",f[0].content.length==0),c&4&&l!==(l=se(`top palette-${f[2]}`)+" svelte-wa6l8r")&&m(e,"class",l),c&5&&W(e,"invert",f[0].invert)},i(f){i||we(()=>{i=Be(e,Rn,{}),i.start()})},o:ae,d(f){f&&B(e),r.d(),s=!1,o()}}}function Nl(n,e,t){let{flow:l}=e,{selected:i}=e,s;function o(a){ve.call(this,n,a)}return n.$$set=a=>{"flow"in a&&t(0,l=a.flow),"selected"in a&&t(1,i=a.selected)},n.$$.update=()=>{n.$$.dirty&1&&(l.invert?t(2,s="accent-secondary"):t(2,s="accent"))},[l,i,s,o]}class zl extends ne{constructor(e){super();le(this,e,Nl,jl,te,{flow:0,selected:1})}}const{document:Ue}=kn;function Et(n,e,t){const l=n.slice();return l[35]=e[t],l[36]=e,l[37]=t,l}function It(n){let e,t,l=n[0],i,s,o,a,u=Kt(n);return{c(){e=S("div"),t=S("div"),u.c(),m(t,"class","popups svelte-1tqht2a"),m(e,"class","screen svelte-1tqht2a")},m(r,f){H(r,e,f),y(e,t),u.m(t,null),s=!0,o||(a=[E(t,"click",ct(n[13])),E(e,"click",ct(n[14]))],o=!0)},p(r,f){f[0]&1&&te(l,l=r[0])?(re(),q(u,1,1,ae),fe(),u=Kt(r),u.c(),F(u),u.m(t,null)):u.p(r,f)},i(r){s||(F(u),we(()=>{i||(i=Re(e,gt,{},!0)),i.run(1)}),s=!0)},o(r){q(u),i||(i=Re(e,gt,{},!1)),i.run(0),s=!1},d(r){r&&B(e),u.d(r),r&&i&&i.end(),o=!1,ke(a)}}}function Kt(n){let e,t;return e=new hl({props:{component:n[0][0],closeSelf:n[12]}}),{c(){I(e.$$.fragment)},m(l,i){K(e,l,i),t=!0},p(l,i){const s={};i[0]&1&&(s.component=l[0][0]),e.$set(s)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){q(e.$$.fragment,l),t=!1},d(l){X(e,l)}}}function Ul(n){let e,t,l,i,s,o;return e=new ue({props:{icon:"settings",tooltip:"settings"}}),e.$on("click",n[15]),l=new ue({props:{icon:"download",disabled:n[1].length==0,disabledReason:"nothing to download",tooltip:"download as file"}}),l.$on("click",n[16]),s=new ue({props:{icon:"upload",tooltip:"import file"}}),s.$on("click",n[17]),{c(){I(e.$$.fragment),t=N(),I(l.$$.fragment),i=N(),I(s.$$.fragment)},m(a,u){K(e,a,u),H(a,t,u),K(l,a,u),H(a,i,u),K(s,a,u),o=!0},p(a,u){const r={};u[0]&2&&(r.disabled=a[1].length==0),l.$set(r)},i(a){o||(F(e.$$.fragment,a),F(l.$$.fragment,a),F(s.$$.fragment,a),o=!0)},o(a){q(e.$$.fragment,a),q(l.$$.fragment,a),q(s.$$.fragment,a),o=!1},d(a){X(e,a),a&&B(t),X(l,a),a&&B(i),X(s,a)}}}function Xt(n){let e,t,l;function i(a){n[18](a,n[37])}function s(){return n[19](n[37])}let o={selected:n[37]==n[2]};return n[1][n[37]]!==void 0&&(o.flow=n[1][n[37]]),e=new zl({props:o}),Y.push(()=>$(e,"flow",i)),e.$on("click",s),{c(){I(e.$$.fragment)},m(a,u){K(e,a,u),l=!0},p(a,u){n=a;const r={};u[0]&4&&(r.selected=n[37]==n[2]),!t&&u[0]&2&&(t=!0,r.flow=n[1][n[37]],x(()=>t=!1)),e.$set(r)},i(a){l||(F(e.$$.fragment,a),l=!0)},o(a){q(e.$$.fragment,a),l=!1},d(a){X(e,a)}}}function Wt(n){let e,t,l,i,s,o,a,u,r,f,c,h,d=n[2],p,g;function v(O){n[22](O)}function _(O){n[23](O)}function b(O){n[24](O)}function k(O){n[25](O)}function z(O){n[26](O)}let R={};n[1][n[2]].content!==void 0&&(R.content=n[1][n[2]].content),n[1][n[2]].children!==void 0&&(R.children=n[1][n[2]].children),n[1][n[2]].index!==void 0&&(R.index=n[1][n[2]].index),n[1][n[2]].focus!==void 0&&(R.focus=n[1][n[2]].focus),n[1][n[2]].invert!==void 0&&(R.invert=n[1][n[2]].invert),t=new Kn({props:R}),Y.push(()=>$(t,"content",v)),Y.push(()=>$(t,"children",_)),Y.push(()=>$(t,"index",b)),Y.push(()=>$(t,"focus",k)),Y.push(()=>$(t,"invert",z));function T(O){n[27](O)}let j={};n[1][n[2]]!==void 0&&(j.flow=n[1][n[2]]),f=new fl({props:j}),Y.push(()=>$(f,"flow",T));let V=Jt(n);return{c(){e=S("div"),I(t.$$.fragment),u=N(),r=S("div"),I(f.$$.fragment),h=N(),V.c(),p=Xe(),m(e,"class","title svelte-1tqht2a"),m(r,"class","box-control svelte-1tqht2a")},m(O,A){H(O,e,A),K(t,e,null),H(O,u,A),H(O,r,A),K(f,r,null),H(O,h,A),V.m(O,A),H(O,p,A),g=!0},p(O,A){const w={};!l&&A[0]&6&&(l=!0,w.content=O[1][O[2]].content,x(()=>l=!1)),!i&&A[0]&6&&(i=!0,w.children=O[1][O[2]].children,x(()=>i=!1)),!s&&A[0]&6&&(s=!0,w.index=O[1][O[2]].index,x(()=>s=!1)),!o&&A[0]&6&&(o=!0,w.focus=O[1][O[2]].focus,x(()=>o=!1)),!a&&A[0]&6&&(a=!0,w.invert=O[1][O[2]].invert,x(()=>a=!1)),t.$set(w);const P={};!c&&A[0]&6&&(c=!0,P.flow=O[1][O[2]],x(()=>c=!1)),f.$set(P),A[0]&4&&te(d,d=O[2])?(re(),q(V,1,1,ae),fe(),V=Jt(O),V.c(),F(V),V.m(p.parentNode,p)):V.p(O,A)},i(O){g||(F(t.$$.fragment,O),F(f.$$.fragment,O),F(V),g=!0)},o(O){q(t.$$.fragment,O),q(f.$$.fragment,O),q(V),g=!1},d(O){O&&B(e),X(t),O&&B(u),O&&B(r),X(f),O&&B(h),O&&B(p),V.d(O)}}}function Jt(n){let e,t,l,i;function s(a){n[28](a)}let o={};return n[1][n[2]]!==void 0&&(o.root=n[1][n[2]]),t=new Un({props:o}),Y.push(()=>$(t,"root",s)),t.$on("focusFlow",n[4]),{c(){e=S("div"),I(t.$$.fragment),m(e,"class","flow svelte-1tqht2a")},m(a,u){H(a,e,u),K(t,e,null),i=!0},p(a,u){const r={};!l&&u[0]&6&&(l=!0,r.root=a[1][a[2]],x(()=>l=!1)),t.$set(r)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){q(t.$$.fragment,a),i=!1},d(a){a&&B(e),X(t)}}}function El(n){let e,t,l,i,s,o,a,u,r,f,c,h,d,p,g,v,_,b,k,z,R,T=n[0].length>0&&It(n);r=new xt({props:{$$slots:{default:[Ul]},$$scope:{ctx:n}}});let j=n[1],V=[];for(let w=0;w<j.length;w+=1)V[w]=Xt(Et(n,j,w));const O=w=>q(V[w],1,1,()=>{V[w]=null});g=new ue({props:{text:"on case",palette:"accent",icon:"add",tooltip:"create new oncase flow"}}),g.$on("click",n[20]),_=new ue({props:{text:"off case",palette:"accent-secondary",icon:"add",tooltip:"create new offcase flow"}}),_.$on("click",n[21]);let A=n[1].length>0&&Wt(n);return{c(){e=N(),t=S("main"),T&&T.c(),l=N(),i=S("input"),s=N(),o=S("div"),a=S("div"),u=S("div"),I(r.$$.fragment),f=N(),c=S("div"),h=S("ul");for(let w=0;w<V.length;w+=1)V[w].c();d=N(),p=S("div"),I(g.$$.fragment),v=N(),I(_.$$.fragment),b=N(),A&&A.c(),m(i,"id","uploadId"),m(i,"type","file"),i.hidden=!0,m(u,"class","header svelte-1tqht2a"),m(p,"class","add-tab svelte-1tqht2a"),m(h,"class","svelte-1tqht2a"),m(c,"class","tabs svelte-1tqht2a"),m(a,"class","sidebar svelte-1tqht2a"),m(o,"class","grid svelte-1tqht2a"),m(t,"class","palette-plain"),W(t,"activeMouse",Ve)},m(w,P){H(w,e,P),H(w,t,P),T&&T.m(t,null),y(t,l),y(t,i),y(t,s),y(t,o),y(o,a),y(a,u),K(r,u,null),y(a,f),y(a,c),y(c,h);for(let J=0;J<V.length;J+=1)V[J].m(h,null);y(h,d),y(h,p),K(g,p,null),y(p,v),K(_,p,null),y(o,b),A&&A.m(o,null),k=!0,z||(R=[E(Ue.body,"keydown",n[7]),E(Ue.body,"mousemove",n[6]),E(Ue.body,"dragenter",Il),E(Ue.body,"drop",n[8]),E(i,"change",n[9])],z=!0)},p(w,P){w[0].length>0?T?(T.p(w,P),P[0]&1&&F(T,1)):(T=It(w),T.c(),F(T,1),T.m(t,l)):T&&(re(),q(T,1,1,()=>{T=null}),fe());const J={};if(P[0]&2|P[1]&128&&(J.$$scope={dirty:P,ctx:w}),r.$set(J),P[0]&14){j=w[1];let D;for(D=0;D<j.length;D+=1){const M=Et(w,j,D);V[D]?(V[D].p(M,P),F(V[D],1)):(V[D]=Xt(M),V[D].c(),F(V[D],1),V[D].m(h,d))}for(re(),D=j.length;D<V.length;D+=1)O(D);fe()}w[1].length>0?A?(A.p(w,P),P[0]&2&&F(A,1)):(A=Wt(w),A.c(),F(A,1),A.m(o,null)):A&&(re(),q(A,1,1,()=>{A=null}),fe())},i(w){if(!k){F(T),F(r.$$.fragment,w);for(let P=0;P<j.length;P+=1)F(V[P]);F(g.$$.fragment,w),F(_.$$.fragment,w),F(A),k=!0}},o(w){q(T),q(r.$$.fragment,w),V=V.filter(Boolean);for(let P=0;P<V.length;P+=1)q(V[P]);q(g.$$.fragment,w),q(_.$$.fragment,w),q(A),k=!1},d(w){w&&B(e),w&&B(t),T&&T.d(),X(r),qe(V,w),X(g),X(_),A&&A.d(),z=!1,ke(R)}}}function Il(n){n.preventDefault()}function Kl(n,e,t){let l,i,s;_e(n,oe,C=>t(1,l=C)),_e(n,Ae,C=>t(2,i=C)),_e(n,Ve,C=>t(29,s=C));let o=window.matchMedia("(prefers-color-scheme: dark)");function a(){Z.data.colorTheme.value==0&&document.body.classList.toggle("dark",o.matches)}o.addEventListener("change",a),Pe(Z.subscribe(["colorTheme"],function(C){Z.data.colorTheme.value==1?document.body.classList.remove("dark"):Z.data.colorTheme.value==2?document.body.classList.add("dark"):a()}));let u={accentHue:{name:"accent-hue",unit:""},accentSecondaryHue:{name:"accent-secondary-hue",unit:""},transitionSpeed:{name:"transition-speed",unit:"ms"},borderRadius:{name:"border-radius",unit:"px"},padding:{name:"padding",unit:"px"},fontSize:{name:"font-size",unit:"rem"},fontWeight:{name:"font-weight",unit:""},gap:{name:"gap",unit:"px"}};Pe(Z.subscribe(Object.keys(u),function(C){let Q=u[C].name,ee=Z.data[C].value,ge=u[C].unit;document.body.style.setProperty(`--${Q}`,`${ee}${ge}`)})),Pe(Z.subscribe(["fontFamily"],function(C){let Q=Z.data.fontFamily;if(Q.type!="radio")return;let ee=Q.value,ge;Q.detail.customOption&&Q.detail.options.length==ee?ge=Q.detail.customOptionValue:Q.detail.options[ee]&&(ge=Q.detail.options[ee]),ge?document.body.style.setProperty("--font-family",`'${ge}', 'Merriweather Sans', sans-serif`):document.body.style.setProperty("--font-family","'Merriweather Sans', sans-serif")}));function r(C){Me(Ae,i=C,i),f()}function f(){var C,Q;let ee=((C=l[i])===null||C===void 0?void 0:C.lastFocus)&&he((Q=l[i])===null||Q===void 0?void 0:Q.lastFocus);ee?ee.focus=!0:Me(oe,l[i].children[0].focus=!0,l),oe.set(l)}function c(){var C,Q;let ee=((C=l[i])===null||C===void 0?void 0:C.lastFocus)&&he((Q=l[i])===null||Q===void 0?void 0:Q.lastFocus);ee&&(ee.focus=!1)}function h(C){c(),l.push(Tn(l.length,C)),Me(Ae,i=l.length-1,i),oe.set(l)}function d(C){Me(Ve,s=!0,s)}function p(C){Me(Ve,s=!1,s),C.ctrlKey&&C.shiftKey&&C.key=="N"?(C.preventDefault(),h("aff")):C.ctrlKey&&C.key=="n"&&(C.preventDefault(),h("neg")),C.metaKey&&C.shiftKey&&C.key=="z"?(C.preventDefault(),l[i].history.redo()):C.metaKey&&C.key=="z"&&(C.preventDefault(),l[i].history.undo())}function g(C){C.preventDefault();let Q=C.dataTransfer.files[0],ee=new FileReader;ee.onload=function(ge){_(ge.target.result.toString())},ee.readAsText(Q,"UTF-8")}function v(){let C=document.getElementById("uploadId").files[0],Q=new FileReader;Q.onload=function(ee){_(ee.target.result.toString())},Q.readAsText(C,"UTF-8")}function _(C){let Q=JSON.parse(C);Me(oe,l=[],l);for(let ee of Q)ee.history=new Zt,l.push(ee)}window.addEventListener("dragover",function(C){C.preventDefault()},!1),window.addEventListener("drop",function(C){C.preventDefault()},!1);let b=[];function k(C){b.splice(C,1),t(0,b)}function z(C){b.push(C),t(0,b)}const R=()=>k(0),T=()=>{k(0)},j=()=>{k(0)},V=()=>z(Hl),O=()=>z(gl),A=()=>z(wl);function w(C,Q){n.$$.not_equal(l[Q],C)&&(l[Q]=C,oe.set(l))}const P=C=>r(C),J=()=>h("aff"),D=()=>h("neg");function M(C){n.$$.not_equal(l[i].content,C)&&(l[i].content=C,oe.set(l))}function U(C){n.$$.not_equal(l[i].children,C)&&(l[i].children=C,oe.set(l))}function ce(C){n.$$.not_equal(l[i].index,C)&&(l[i].index=C,oe.set(l))}function We(C){n.$$.not_equal(l[i].focus,C)&&(l[i].focus=C,oe.set(l))}function Je(C){n.$$.not_equal(l[i].invert,C)&&(l[i].invert=C,oe.set(l))}function me(C){n.$$.not_equal(l[i],C)&&(l[i]=C,oe.set(l))}function Te(C){n.$$.not_equal(l[i],C)&&(l[i]=C,oe.set(l))}return[b,l,i,r,f,h,d,p,g,v,k,z,R,T,j,V,O,A,w,P,J,D,M,U,ce,We,Je,me,Te]}class Xl extends ne{constructor(e){super();le(this,e,Kl,El,te,{},null,[-1,-1])}}new Xl({target:document.body});
