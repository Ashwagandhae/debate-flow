import{S as ie,i as oe,s as te,e as S,a as v,b as P,c as De,l as K,n as ce,d as D,r as Fe,f as tn,o as He,g as be,h as Z,j as _n,w as ut,q as Ce,k as pn,m as x,p as U,t as le,u as E,v as C,x as Se,y as Be,z as R,A as I,B as Qe,C as ee,D as j,E as W,F as y,G as re,H as fe,I as gn,J as Ue,K as ke,L as at,M as pt,N as nn,O as mn,P as Je,Q as he,R as we,T as Oe,U as gt,V as rt,W as ft,X as ct,Y as dt,Z as Xe,_ as Ge,$ as ln,a0 as ge,a1 as vn,a2 as ot,a3 as mt,a4 as bn,a5 as vt,a6 as kn}from"./vendor.dae6e1c7.js";const wn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};wn();class yn{constructor(e){this.callbacks={any:[]},this.data=e,this.loadFromLocalStorage()}setValue(e,t){if(this.data[e].value=t,this.callbacks[e])for(let l of this.callbacks[e])l(e);for(let l of this.callbacks.any)l(e)}subscribe(e,t){for(let l of e)this.callbacks[l]||(this.callbacks[l]=[]),this.callbacks[l].push(t),t(l);return()=>{for(let l of e)this.callbacks[l]=this.callbacks[l].filter(i=>i!=t)}}saveToLocalStorage(){let e={};for(var t in this.data)this.data[t].value!=this.data[t].auto&&(e[t]=this.data[t].value);localStorage.setItem("settings",JSON.stringify(e))}loadFromLocalStorage(){if(localStorage.getItem("settings")){let t=JSON.parse(localStorage.getItem("settings"));try{for(var e in t)this.setValue(e,t[e])}catch{localStorage.setItem("settings",JSON.stringify({})),this.resetToAuto()}}}resetToAuto(){for(var e in this.data)this.setValue(e,this.data[e].auto)}}let Q=new yn({debateStyle:{name:"Debate Style",type:"radio",value:0,auto:0,detail:{options:["Policy","Public forum","Lincoln douglass"]},info:"Already created flows won't be affected by this setting"},colorTheme:{name:"Color theme",type:"radio",value:0,auto:0,detail:{options:["System default","Light theme","Dark theme"]}},columnWidth:{name:"Column width",type:"slider",value:150,auto:150,detail:{min:50,max:300,step:1}},accentHue:{name:"Primary color hue",type:"slider",value:192,auto:192,detail:{min:0,max:360,step:1,hue:!0},info:"This color will be used for aff"},accentSecondaryHue:{name:"Secondary color hue",type:"slider",value:26,auto:26,detail:{min:0,max:360,step:1,hue:!0},info:"This color will be used for neg"},transitionSpeed:{name:"Transition duration",type:"slider",value:300,auto:300,detail:{min:0,max:1e3,step:1}},fontSize:{name:"Font size",type:"slider",value:.9,auto:.9,detail:{min:.2,max:2,step:.01}},fontWeight:{name:"Font weight",type:"slider",value:300,auto:300,detail:{min:100,max:900,step:50}},fontFamily:{name:"Font",type:"radio",value:0,auto:0,detail:{options:["Merriweather Sans","Helvetica","Georgia","Courier New"],customOption:!0,customOptionValue:""},info:"Type in a custom font name if it is installed on your computer"},borderRadius:{name:"Border radius",type:"slider",value:12,auto:12,detail:{min:0,max:30,step:1}},padding:{name:"Padding",value:8,auto:8,type:"slider",detail:{min:0,max:30,step:1}},gap:{name:"Grid Gap",value:12,auto:12,type:"slider",detail:{min:0,max:30,step:1}}});function Sn(n){let e,t,l,i;return{c(){e=S("textarea"),v(e,"spellcheck","false"),v(e,"placeholder",n[1]),v(e,"style",t=`--white-space:${n[3]};`),v(e,"class","svelte-1ggsm2f")},m(o,s){P(o,e,s),De(e,n[0]),n[13](e),l||(i=[K(e,"input",n[12]),K(e,"load",n[2]),K(e,"input",n[2]),K(e,"input",n[7]),K(e,"beforeinput",n[8]),K(e,"keydown",n[9]),K(e,"focus",n[10]),K(e,"blur",n[11])],l=!0)},p(o,[s]){s&2&&v(e,"placeholder",o[1]),s&8&&t!==(t=`--white-space:${o[3]};`)&&v(e,"style",t),s&1&&De(e,o[0])},i:ce,o:ce,d(o){o&&D(e),n[13](null),l=!1,Fe(i)}}}function Fn(n,e,t){let{value:l}=e,{placeholder:i=""}=e,{nowrap:o=!1}=e,s,u;function a(){u&&(t(4,u.value=u.value.replace(/\r?\n|\r/g,""),u),t(4,u.style.height="0px",u),t(4,u.style.height=u.scrollHeight+"px",u))}tn(function(){a()}),He(Q.subscribe(["fontSize"],a));const r=()=>{u.focus()};function h(g){be.call(this,n,g)}function c(g){be.call(this,n,g)}function d(g){be.call(this,n,g)}function f(g){be.call(this,n,g)}function p(g){be.call(this,n,g)}function _(){l=this.value,t(0,l)}function b(g){Z[g?"unshift":"push"](()=>{u=g,t(4,u)})}return n.$$set=g=>{"value"in g&&t(0,l=g.value),"placeholder"in g&&t(1,i=g.placeholder),"nowrap"in g&&t(5,o=g.nowrap)},n.$$.update=()=>{n.$$.dirty&32&&(o?t(3,s="nowrap"):t(3,s="auto"))},[l,i,a,s,u,o,r,h,c,d,f,p,_,b]}class ht extends ie{constructor(e){super();oe(this,e,Fn,Sn,te,{value:0,placeholder:1,nowrap:5,autoHeight:2,focus:6})}get autoHeight(){return this.$$.ctx[2]}get focus(){return this.$$.ctx[6]}}function Cn(n){let e,t=n[1].svg+"",l;return{c(){e=_n("svg"),v(e,"style",l=`width:${n[0]};height:${n[0]};`),v(e,"viewBox","0 0 "+100+" "+100),v(e,"fill","none"),v(e,"stroke","var(--text)"),v(e,"class","svelte-1pducja")},m(i,o){P(i,e,o),e.innerHTML=t},p(i,[o]){o&2&&t!==(t=i[1].svg+"")&&(e.innerHTML=t),o&1&&l!==(l=`width:${i[0]};height:${i[0]};`)&&v(e,"style",l)},i:ce,o:ce,d(i){i&&D(e)}}}function Ln(n,e,t){let{name:l}=e,{size:i="1rem"}=e,o=[{name:"arrowRight",svg:'<path d="M27 7L74 50L27 93" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowLeft",svg:'<path d="M74 93L27 50L74 7" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowUp",svg:'<path d="M7.5 73.5L50.5 26.5L93.5 73.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowDown",svg:'<path d="M93.5 26.5L50.5 73.5L7.5 26.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"delete",svg:`<path d="M78.5685 22L22 78.5685" stroke-width="10" stroke-linecap="round"/>
<path d="M22 22L78.5685 78.5685" stroke-width="10" stroke-linecap="round"/>`},{name:"add",svg:`<path d="M50 15L50 85" stroke-width="10" stroke-linecap="round"/>
<path d="M15 50H85" stroke-width="10" stroke-linecap="round"/>`},{name:"download",svg:`<path d="M71 45L50 68L29 45" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 66L50 14" stroke-width="10" stroke-linecap="round"/>`},{name:"upload",svg:`<path d="M29 37L50 14L71 37" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 16L50 68" stroke-width="10" stroke-linecap="round"/>`},{name:"addUp",svg:`<path d="M85 25V25C87.7614 25 90 27.2386 90 30V70C90 75.5228 85.5228 80 80 80H20C14.4772 80 10 75.5228 10 70L10 30C10 27.2386 12.2386 25 15 25V25" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 25H65" stroke-width="10" stroke-linecap="round"/>
<path d="M50 40V10" stroke-width="10" stroke-linecap="round"/>`},{name:"addDown",svg:`<path d="M15 75V75C12.2386 75 10 72.7614 10 70L10 30C10 24.4772 14.4772 20 20 20L80 20C85.5228 20 90 24.4772 90 30L90 70C90 72.7614 87.7614 75 85 75V75" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M65 75H35" stroke-width="10" stroke-linecap="round"/>
<path d="M50 60L50 90" stroke-width="10" stroke-linecap="round"/>`},{name:"addRight",svg:`<path d="M75 85V85C75 87.7614 72.7614 90 70 90H30C24.4772 90 20 85.5228 20 80V20C20 14.4772 24.4772 10 30 10H70C72.7614 10 75 12.2386 75 15V15" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M75 35V65" stroke-width="10" stroke-linecap="round"/>
<path d="M60 50H90" stroke-width="10" stroke-linecap="round"/>`},{name:"undo",svg:`<path d="M10 47H70C81.0457 47 90 55.9543 90 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M36 70L10 47L36 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"redo",svg:`<path d="M90 47H30C18.9543 47 10 55.9543 10 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M64 70L90 47L64 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"settings",svg:`<line x1="10" y1="50" x2="90" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="80" x2="90" y2="80" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>
<circle cx="26.25" cy="50.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="80.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="20.25" r="6.25" stroke-width="10"/>`},{name:"check",svg:'<path d="M88.7817 29.2843L39.2842 78.7817L11 50.4975" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'}],s;function u(){t(1,s=o.find(a=>a.name===l))}return u(),n.$$set=a=>{"name"in a&&t(2,l=a.name),"size"in a&&t(0,i=a.size)},n.$$.update=()=>{n.$$.dirty&4&&u()},[i,s,l]}class on extends ie{constructor(e){super();oe(this,e,Ln,Cn,te,{name:2,size:0})}}const Ee=ut(!0),ne=ut([]);let Re=ut(0),Mn={policy:{aff:{columns:["1AC","1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!1},neg:{columns:["1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!0}},publicForum:{aff:{columns:["1AC","1NC","2AC","2NC","AS","NS","AFF","NFF"],invert:!1},neg:{columns:["1NC","2AC","2NC","AS","NS","AFF","NFF"],invert:!0}},lincolnDouglas:{aff:{columns:["AC","NC","1AR","1NR","2AR"],invert:!1},neg:{columns:["NC","1AR","1NR","2AR"],invert:!0}}},An=["policy","publicForum","lincolnDouglas"],Ye;ne.subscribe(n=>{Ye=n});function Ie(n,e,t){return{content:"",children:[],index:n,level:e,focus:t}}function Tn(n,e){let t=Mn[An[Q.data.debateStyle.value]];return{content:"",level:0,columns:t[e].columns,invert:t[e].invert,focus:!0,index:n,lastFocus:[n],children:[Ie(0,1,!1)],history:new sn}}function pe(n,e=0){let t=Ye[n[0]];for(let l=1;l<n.length-e;l++)if(t=t==null?void 0:t.children[n[l]],!t)return null;return t}class sn{constructor(){this.index=-1,this.data=[],this.lastFocus=void 0}lastAction(){return this.data[this.index]}add(e,t,l){this.resolveAllPending();let i={type:e,path:t,lastFocus:[...this.lastFocus],nextFocus:void 0,other:l,pending:!1};this.data=this.data.slice(0,this.index+1),this.data.push(i),this.index=this.data.length-1}addPending(e,t,l){this.data=this.data.slice(0,this.index+1),this.data.push({type:e,path:t,lastFocus:void 0,nextFocus:void 0,other:l,pending:!0}),this.index=this.data.length-1}resolveAllPending(){let e=!1;for(let t=0;t<this.data.length;t++){let l=this.data[t];if(l.pending){let i={type:l.type,path:l.path,lastFocus:l.path,nextFocus:l.path,other:l.other,pending:!1},o=!0;i.type=="edit"&&(i.other.lastContent=l.other.lastContent,i.other.nextContent=l.other.getNextContent(),i.other.lastContent==i.other.nextContent&&(o=!1),l.other.createEditBreak()),o?(e=!0,this.data[t]=i):(this.data[t]=null,this.index>=t&&(this.index-=1))}}this.data=this.data.filter(t=>t!=null),e&&console.log("resolving all pending")}addFocus(e){this.lastFocus=e,this.lastAction()&&this.lastAction().nextFocus==null&&(this.lastAction().nextFocus=e)}undoAction(e){console.log("undo",this.index,this.data);let t=pe(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,1):e.type=="delete"?i.splice(l,0,e.other.box):e.type=="edit"&&(i[l].content=e.other.lastContent);for(let o=l;o<i.length;o++)i[o].index=o;t.children=[...i]}redoAction(e){console.log("redo",this.index,this.data);let t=pe(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,0,Ie(l,t.level+1,!1)):e.type=="delete"?i.splice(l,1):e.type=="edit"&&(i[l].content=e.other.nextContent);for(let o=l;o<i.length;o++)i[o].index=o;t.children=[...i]}focus(e){let t=pe(e);t.focus=!0}undo(){if(this.resolveAllPending(),this.index>-1){let e=this.lastAction();this.undoAction(e),this.focus(e.lastFocus),ne.set(Ye),this.index-=1}}redo(){if(this.resolveAllPending(),this.index<this.data.length-1){this.index+=1;let e=this.lastAction();this.redoAction(e),this.focus(e.nextFocus),ne.set(Ye)}}}function Rn(n,e){const t=n.clientHeight;return{duration:Q.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: calc(${i*t}px - var(--padding) * 2);
        overflow: visible;
        clip-path: inset(${(1-i)*t-2}px 0 -${t}px 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function On(n,e){const t=n.clientHeight;return{duration:Q.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${i*t}px;
        overflow: visible;
        clip-path: inset(${(1-i)*t}px 0 0 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function Nn(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>`
        opacity:${t};
      `}}function bt(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>{const l=Ce(t);return`
        clip-path:inset(0% ${(1-l)*100}% 0% 0%);
        transform: translateX(${(1-l)*50}%);
      `}}}function kt(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>{const l=pn(t);return`
      clip-path:inset(0% ${(1-l)*100}% 0% 0%);
      transform: translateX(${(1-l)*50}%)`}}}function Pn(n,e){const t=n.clientHeight;return{duration:Q.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${t*i}px;
        margin-bottom: calc(${i} * var(--padding));
        overflow: hidden;
        transform: translateX(${-100*(1-i)}%);
      `}}}function Dn(n,e){const t=n.clientHeight;return{duration:Q.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${t*i}px;
        margin-bottom: calc(${i} * var(--padding));
        overflow: hidden;
        transform: translateX(${-100*(1-i)}%);
      `}}}function wt(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function Hn(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function Bn(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function yt(n,e){return{duration:Q.data.transitionSpeed.value,css:t=>`
        opacity: ${t};
      `}}function St(n,e,t){const l=n.slice();return l[54]=e[t],l[55]=e,l[56]=t,l}function Ft(n){let e,t,l,i,o,s,u;return t=new on({props:{name:"add"}}),{c(){e=S("button"),U(t.$$.fragment),v(e,"class",l=le(`add palette-${n[13]}`)+" svelte-m947dr")},m(a,r){P(a,e,r),E(t,e,null),o=!0,s||(u=[K(e,"click",n[34]),K(e,"mousedown",st)],s=!0)},p(a,r){(!o||r[0]&8192&&l!==(l=le(`add palette-${a[13]}`)+" svelte-m947dr"))&&v(e,"class",l)},i(a){o||(C(t.$$.fragment,a),a&&(i||Se(()=>{i=Be(e,Nn,{}),i.start()})),o=!0)},o(a){R(t.$$.fragment,a),o=!1},d(a){a&&D(e),I(t),s=!1,Fe(u)}}}function Ct(n,e){let t,l,i,o,s,u,a,r;function h(b){e[35](b,e[54])}function c(b){e[36](b,e[54])}function d(b){e[37](b,e[54])}function f(b){e[38](b,e[54])}function p(b){e[39](b,e[54])}let _={addSibling:e[22],deleteSelf:e[23],focusSibling:e[24],focusParent:e[25],dispatchSelfFocus:e[17],parentPath:e[8]};return e[54].content!==void 0&&(_.content=e[54].content),e[54].children!==void 0&&(_.children=e[54].children),e[54].index!==void 0&&(_.index=e[54].index),e[54].level!==void 0&&(_.level=e[54].level),e[54].focus!==void 0&&(_.focus=e[54].focus),l=new un({props:_}),Z.push(()=>x(l,"content",h)),Z.push(()=>x(l,"children",c)),Z.push(()=>x(l,"index",d)),Z.push(()=>x(l,"level",f)),Z.push(()=>x(l,"focus",p)),l.$on("saveFocus",e[40]),{key:n,first:null,c(){t=Qe(),U(l.$$.fragment),this.first=t},m(b,g){P(b,t,g),E(l,b,g),r=!0},p(b,g){e=b;const w={};g[0]&256&&(w.parentPath=e[8]),!i&&g[0]&4&&(i=!0,w.content=e[54].content,ee(()=>i=!1)),!o&&g[0]&4&&(o=!0,w.children=e[54].children,ee(()=>o=!1)),!s&&g[0]&4&&(s=!0,w.index=e[54].index,ee(()=>s=!1)),!u&&g[0]&4&&(u=!0,w.level=e[54].level,ee(()=>u=!1)),!a&&g[0]&4&&(a=!0,w.focus=e[54].focus,ee(()=>a=!1)),l.$set(w)},i(b){r||(C(l.$$.fragment,b),r=!0)},o(b){R(l.$$.fragment,b),r=!1},d(b){b&&D(t),I(l,b)}}}function jn(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b,g,w=[],k=new Map,N,H,B,T,V,$;function q(A){n[31](A)}let m={placeholder:n[11]};n[1]!==void 0&&(m.value=n[1]),r=new ht({props:m}),Z.push(()=>x(r,"value",q)),n[32](r),r.$on("keydown",n[20]),r.$on("beforeinput",n[21]),r.$on("blur",n[19]),r.$on("focus",n[18]);let L=n[2].length==0&&n[5]<n[15]&&Ft(n),X=n[2];const O=A=>A[54];for(let A=0;A<X.length;A+=1){let z=St(n,X,A),de=O(z);k.set(de,w[A]=Ct(de,z))}return{c(){e=S("div"),t=S("div"),l=S("div"),i=S("div"),u=j(),a=S("div"),U(r.$$.fragment),c=j(),d=S("div"),_=j(),L&&L.c(),b=j(),g=S("ul");for(let A=0;A<w.length;A+=1)w[A].c();v(i,"class","line above svelte-m947dr"),W(i,"left",n[2].length>0),W(i,"right",n[4]==0&&n[5]>1),v(a,"class","text svelte-m947dr"),v(d,"class","line below svelte-m947dr"),v(l,"class","barcontainer svelte-m947dr"),v(t,"class","content svelte-m947dr"),v(t,"style",`--this-background: ${n[16]}`),W(t,"root",n[3]),W(t,"left",n[2].length>0),W(t,"right",n[4]==0&&n[5]>1),v(g,"class","children svelte-m947dr"),v(e,"class",N=le(`top palette-${n[12]}`)+" svelte-m947dr"),W(e,"empty",n[2].length==0),W(e,"focus",n[0]),W(e,"childFocus",n[10]),W(e,"activeMouse",n[14]),W(e,"highlight",n[10]||n[0])},m(A,z){P(A,e,z),y(e,t),y(t,l),y(l,i),y(l,u),y(l,a),E(r,a,null),y(l,c),y(l,d),y(t,_),L&&L.m(t,null),y(e,b),y(e,g);for(let de=0;de<w.length;de+=1)w[de].m(g,null);T=!0,V||($=[K(i,"click",n[30]),K(i,"mousedown",st),K(d,"click",n[33]),K(d,"mousedown",st)],V=!0)},p(A,z){z[0]&4&&W(i,"left",A[2].length>0),z[0]&48&&W(i,"right",A[4]==0&&A[5]>1);const de={};z[0]&2048&&(de.placeholder=A[11]),!h&&z[0]&2&&(h=!0,de.value=A[1],ee(()=>h=!1)),r.$set(de),A[2].length==0&&A[5]<A[15]?L?(L.p(A,z),z[0]&36&&C(L,1)):(L=Ft(A),L.c(),C(L,1),L.m(t,null)):L&&(re(),R(L,1,1,()=>{L=null}),fe()),z[0]&8&&W(t,"root",A[3]),z[0]&4&&W(t,"left",A[2].length>0),z[0]&48&&W(t,"right",A[4]==0&&A[5]>1),z[0]&63045892&&(X=A[2],re(),w=gn(w,z,O,1,A,X,k,g,mn,Ct,null,St),fe()),(!T||z[0]&4096&&N!==(N=le(`top palette-${A[12]}`)+" svelte-m947dr"))&&v(e,"class",N),z[0]&4100&&W(e,"empty",A[2].length==0),z[0]&4097&&W(e,"focus",A[0]),z[0]&5120&&W(e,"childFocus",A[10]),z[0]&20480&&W(e,"activeMouse",A[14]),z[0]&5121&&W(e,"highlight",A[10]||A[0])},i(A){if(!T){A&&Se(()=>{s&&s.end(1),o=Be(i,bt,{}),o.start()}),C(r.$$.fragment,A),A&&Se(()=>{p&&p.end(1),f=Be(d,bt,{}),f.start()}),C(L);for(let z=0;z<X.length;z+=1)C(w[z]);A&&Se(()=>{B&&B.end(1),H=Be(e,Rn,{}),H.start()}),T=!0}},o(A){o&&o.invalidate(),A&&(s=Ue(i,kt,{})),R(r.$$.fragment,A),f&&f.invalidate(),A&&(p=Ue(d,kt,{})),R(L);for(let z=0;z<w.length;z+=1)R(w[z]);H&&H.invalidate(),A&&(B=Ue(e,On,{})),T=!1},d(A){A&&D(e),A&&s&&s.end(),n[32](null),I(r),A&&p&&p.end(),L&&L.d();for(let z=0;z<w.length;z+=1)w[z].d();A&&B&&B.end(),V=!1,Fe($)}}}function st(n){n.preventDefault()}function Vn(n,e,t){let l,i,o,s;ke(n,Re,M=>t(43,i=M)),ke(n,ne,M=>t(44,o=M)),ke(n,Ee,M=>t(14,s=M));var u=this&&this.__awaiter||function(M,Y,se,_e){function ye(Me){return Me instanceof se?Me:new se(function(Ae){Ae(Me)})}return new(se||(se=Promise))(function(Me,Ae){function dn(Te){try{lt(_e.next(Te))}catch(it){Ae(it)}}function hn(Te){try{lt(_e.throw(Te))}catch(it){Ae(it)}}function lt(Te){Te.done?Me(Te.value):ye(Te.value).then(dn,hn)}lt((_e=_e.apply(M,Y||[])).next())})};const a=at();let{root:r=!1}=e,{content:h=""}=e,{children:c}=e,{index:d}=e,{level:f}=e,{focus:p=!1}=e,{parentPath:_=[]}=e,{addSibling:b=()=>!1}=e,{deleteSelf:g=()=>{}}=e,{focusSibling:w=()=>{}}=e,{focusParent:k=()=>{}}=e,{dispatchSelfFocus:N=()=>{}}=e;const{getinvert:H}=pt("invert");let B=H();const{getColumnCount:T}=pt("columnCount");let V=T(),$,q,m=!1,L=-1;function X(M,Y){Y?(t(10,m=!0),L=M):M==L&&(t(10,m=!1),L=-1)}let O=!1;function A(){p?(N(d,!0),f>=1&&(o[i].history.addFocus([...l]),a("saveFocus",l),$&&$.focus())):(N(d,!1),O=!1)}nn(A);function z(){p&&(N(d,!0),o[i].history.addFocus([...l]))}let de="";function Ze(){p||G()}function $e(){p&&t(0,p=!1)}class me{constructor(Y,se=()=>!0,_e=!0,ye=!0,Me=!0){this.require=se,this.stopRepeat=_e,this.preventDefault=ye,this.blur=Me,this.handle=function(Ae){return!this.require()||(this.preventDefault&&Ae.preventDefault(),this.stopRepeat&&Ae.repeat==!0)?!1:(this.blur&&t(0,p=!1),Y(),!0)}}}const Ne={shift:{Enter:new me(()=>{je(0,0)&&J(0,0)})},other:{Enter:new me(()=>{b(d,1)&&w(d,1)}),Backspace:new me(()=>{g(d)},()=>h.length==0),ArrowUp:new me(()=>w(d,-1)),ArrowDown:new me(()=>w(d,1)),ArrowLeft:new me(()=>k()),ArrowRight:new me(()=>{c.length>0?J(0,0):w(d,1)})}};function xe(M){M.shiftKey&&Ne.shift[M.key]?Ne.shift[M.key].handle(M):Ne.other[M.key]&&Ne.other[M.key].handle(M)}function et(M){O||o[i].history.addPending("edit",[...l],{lastContent:h,getNextContent(){return h},createEditBreak(){O=!1}}),O=!0}function je(M,Y){let se=M+Y;if(f<V){let _e=[...c];_e.splice(se,0,Ie(se,f+1,!0));for(let ye=se;ye<_e.length;ye++)_e[ye].index=ye;return o[i].history.add("add",[...l,se]),t(2,c=[..._e]),!0}else return G(),!1}function F(M){return u(this,void 0,void 0,function*(){if(c.length>1||f>=1){let Y=[...c];o[i].history.add("delete",[...l,M],{box:Y[M]}),Y[M].focus=!1,t(2,c=[...Y]),yield Je(),Y.splice(M,1);for(let se=0;se<Y.length;se++)Y[se].index=se;return t(2,c=[...Y]),c[M-1]?J(M-1,0):c.length==0?G():M==0&&J(0,0),!0}else return J(0,0),!1})}function J(M,Y){let se=M+Y;if(se<0){G();return}se>=c.length?c[c.length-1].children.length>0?t(2,c[c.length-1].children[0].focus=!0,c):t(2,c[M].focus=!0,c):t(2,c[se].focus=!0,c),t(2,c)}function G(){t(0,p=!0)}let ae,Ve;const Le=()=>{b(d,0)&&w(d,0)};function Pe(M){h=M,t(1,h)}function tt(M){Z[M?"unshift":"push"](()=>{$=M,t(9,$)})}const nt=()=>{b(d,1)&&w(d,1)},qe=()=>{je(0,0),J(0,0)};function ve(M,Y){n.$$.not_equal(Y.content,M)&&(Y.content=M,t(2,c))}function ze(M,Y){n.$$.not_equal(Y.children,M)&&(Y.children=M,t(2,c))}function an(M,Y){n.$$.not_equal(Y.index,M)&&(Y.index=M,t(2,c))}function rn(M,Y){n.$$.not_equal(Y.level,M)&&(Y.level=M,t(2,c))}function fn(M,Y){n.$$.not_equal(Y.focus,M)&&(Y.focus=M,t(2,c))}function cn(M){be.call(this,n,M)}return n.$$set=M=>{"root"in M&&t(3,r=M.root),"content"in M&&t(1,h=M.content),"children"in M&&t(2,c=M.children),"index"in M&&t(4,d=M.index),"level"in M&&t(5,f=M.level),"focus"in M&&t(0,p=M.focus),"parentPath"in M&&t(26,_=M.parentPath),"addSibling"in M&&t(6,b=M.addSibling),"deleteSelf"in M&&t(27,g=M.deleteSelf),"focusSibling"in M&&t(7,w=M.focusSibling),"focusParent"in M&&t(28,k=M.focusParent),"dispatchSelfFocus"in M&&t(29,N=M.dispatchSelfFocus)},n.$$.update=()=>{n.$$.dirty[0]&67108880&&t(8,l=[..._,d]),n.$$.dirty[0]&1&&A(),n.$$.dirty[0]&256&&z(),n.$$.dirty[0]&48&&(f==1&&d==0?t(11,de="type here"):t(11,de="")),n.$$.dirty[0]&32&&(f%2==0&&!B||f%2==1&&B?t(12,ae="accent-secondary"):t(12,ae="accent")),n.$$.dirty[0]&32&&(f%2==0&&!B||f%2==1&&B?t(13,Ve="accent"):t(13,Ve="accent-secondary"))},[p,h,c,r,d,f,b,w,l,$,m,de,ae,Ve,s,V,q,X,Ze,$e,xe,et,je,F,J,G,_,g,k,N,Le,Pe,tt,nt,qe,ve,ze,an,rn,fn,cn]}class un extends ie{constructor(e){super();oe(this,e,Vn,jn,te,{root:3,content:1,children:2,index:4,level:5,focus:0,parentPath:26,addSibling:6,deleteSelf:27,focusSibling:7,focusParent:28,dispatchSelfFocus:29},null,[-1,-1])}}function qn(n){let e,t;return{c(){e=S("div"),t=he(n[0]),v(e,"class","top svelte-10zixka")},m(l,i){P(l,e,i),y(e,t)},p(l,[i]){i&1&&we(t,l[0])},i:ce,o:ce,d(l){l&&D(e)}}}function zn(n,e,t){let{column:l}=e;return n.$$set=i=>{"column"in i&&t(0,l=i.column)},[l]}class Un extends ie{constructor(e){super();oe(this,e,zn,qn,te,{column:0})}}function Lt(n,e,t){const l=n.slice();return l[8]=e[t],l[10]=t,l}function Mt(n,e,t){const l=n.slice();return l[11]=e[t],l[10]=t,l}function At(n){let e,t,l,i,o;return t=new Un({props:{column:n[11]}}),t.$on("focusFlow",n[7]),{c(){e=S("div"),U(t.$$.fragment),l=j(),v(e,"class",i=le(`header palette-${!!(n[10]%2)==n[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666")},m(s,u){P(s,e,u),E(t,e,null),y(e,l),o=!0},p(s,u){const a={};u&1&&(a.column=s[11]),t.$set(a),(!o||u&1&&i!==(i=le(`header palette-${!!(s[10]%2)==s[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666"))&&v(e,"class",i)},i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){R(t.$$.fragment,s),o=!1},d(s){s&&D(e),I(t)}}}function Tt(n){let e,t;return{c(){e=S("div"),v(e,"class",t=le(`column palette-${!!(n[10]%2)==n[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")},m(l,i){P(l,e,i)},p(l,i){i&1&&t!==(t=le(`column palette-${!!(l[10]%2)==l[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")&&v(e,"class",t)},d(l){l&&D(e)}}}function En(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_;function b(m){n[2](m)}function g(m){n[3](m)}function w(m){n[4](m)}function k(m){n[5](m)}function N(m){n[6](m)}let H={root:!0};n[0].content!==void 0&&(H.content=n[0].content),n[0].children!==void 0&&(H.children=n[0].children),n[0].index!==void 0&&(H.index=n[0].index),n[0].level!==void 0&&(H.level=n[0].level),n[0].focus!==void 0&&(H.focus=n[0].focus),i=new un({props:H}),Z.push(()=>x(i,"content",b)),Z.push(()=>x(i,"children",g)),Z.push(()=>x(i,"index",w)),Z.push(()=>x(i,"level",k)),Z.push(()=>x(i,"focus",N)),i.$on("saveFocus",n[1]);let B=n[0].columns,T=[];for(let m=0;m<B.length;m+=1)T[m]=At(Mt(n,B,m));const V=m=>R(T[m],1,1,()=>{T[m]=null});let $=n[0].columns,q=[];for(let m=0;m<$.length;m+=1)q[m]=Tt(Lt(n,$,m));return{c(){e=S("div"),t=S("div"),l=S("div"),U(i.$$.fragment),h=j(),c=S("div");for(let m=0;m<T.length;m+=1)T[m].c();d=j(),f=S("div");for(let m=0;m<q.length;m+=1)q[m].c();v(l,"class","content svelte-150s666"),v(c,"class","headers svelte-150s666"),v(f,"class","columns svelte-150s666"),v(t,"class","viewer svelte-150s666"),v(e,"class","top svelte-150s666"),v(e,"style",p=`--column-count: ${n[0].columns.length};`),W(e,"invert",n[0].invert)},m(m,L){P(m,e,L),y(e,t),y(t,l),E(i,l,null),y(t,h),y(t,c);for(let X=0;X<T.length;X+=1)T[X].m(c,null);y(t,d),y(t,f);for(let X=0;X<q.length;X+=1)q[X].m(f,null);_=!0},p(m,[L]){const X={};if(!o&&L&1&&(o=!0,X.content=m[0].content,ee(()=>o=!1)),!s&&L&1&&(s=!0,X.children=m[0].children,ee(()=>s=!1)),!u&&L&1&&(u=!0,X.index=m[0].index,ee(()=>u=!1)),!a&&L&1&&(a=!0,X.level=m[0].level,ee(()=>a=!1)),!r&&L&1&&(r=!0,X.focus=m[0].focus,ee(()=>r=!1)),i.$set(X),L&1){B=m[0].columns;let O;for(O=0;O<B.length;O+=1){const A=Mt(m,B,O);T[O]?(T[O].p(A,L),C(T[O],1)):(T[O]=At(A),T[O].c(),C(T[O],1),T[O].m(c,null))}for(re(),O=B.length;O<T.length;O+=1)V(O);fe()}if(L&1){$=m[0].columns;let O;for(O=0;O<$.length;O+=1){const A=Lt(m,$,O);q[O]?q[O].p(A,L):(q[O]=Tt(A),q[O].c(),q[O].m(f,null))}for(;O<q.length;O+=1)q[O].d(1);q.length=$.length}(!_||L&1&&p!==(p=`--column-count: ${m[0].columns.length};`))&&v(e,"style",p),L&1&&W(e,"invert",m[0].invert)},i(m){if(!_){C(i.$$.fragment,m);for(let L=0;L<B.length;L+=1)C(T[L]);_=!0}},o(m){R(i.$$.fragment,m),T=T.filter(Boolean);for(let L=0;L<T.length;L+=1)R(T[L]);_=!1},d(m){m&&D(e),I(i),Oe(T,m),Oe(q,m)}}}function In(n,e,t){let{root:l}=e;gt("invert",{getinvert:()=>l.invert}),gt("columnCount",{getColumnCount:()=>l.columns.length});function i(c){t(0,l.lastFocus=c.detail,l),t(0,l)}function o(c){n.$$.not_equal(l.content,c)&&(l.content=c,t(0,l))}function s(c){n.$$.not_equal(l.children,c)&&(l.children=c,t(0,l))}function u(c){n.$$.not_equal(l.index,c)&&(l.index=c,t(0,l))}function a(c){n.$$.not_equal(l.level,c)&&(l.level=c,t(0,l))}function r(c){n.$$.not_equal(l.focus,c)&&(l.focus=c,t(0,l))}function h(c){be.call(this,n,c)}return n.$$set=c=>{"root"in c&&t(0,l=c.root)},[l,i,o,s,u,a,r,h]}class Xn extends ie{constructor(e){super();oe(this,e,In,En,te,{root:0})}}function Rt(n,e,t){const l=n.slice();return l[1]=e[t],l[3]=t,l}function Kn(n){let e;return{c(){e=he("+")},m(t,l){P(t,e,l)},d(t){t&&D(e)}}}function Ot(n){let e,t,l=n[1]+"",i,o=n[3]!=0&&Kn();return{c(){o&&o.c(),e=j(),t=S("kbd"),i=he(l),v(t,"class","key svelte-eb7adw")},m(s,u){o&&o.m(s,u),P(s,e,u),P(s,t,u),y(t,i)},p(s,u){u&1&&l!==(l=s[1]+"")&&we(i,l)},d(s){o&&o.d(s),s&&D(e),s&&D(t)}}}function Wn(n){let e,t=n[0],l=[];for(let i=0;i<t.length;i+=1)l[i]=Ot(Rt(n,t,i));return{c(){e=S("span");for(let i=0;i<l.length;i+=1)l[i].c();v(e,"class","top svelte-eb7adw")},m(i,o){P(i,e,o);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(i,[o]){if(o&1){t=i[0];let s;for(s=0;s<t.length;s+=1){const u=Rt(i,t,s);l[s]?l[s].p(u,o):(l[s]=Ot(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},i:ce,o:ce,d(i){i&&D(e),Oe(l,i)}}}function Jn(n,e,t){let{keys:l}=e;return n.$$set=i=>{"keys"in i&&t(0,l=i.keys)},[l]}class Gn extends ie{constructor(e){super();oe(this,e,Jn,Wn,te,{keys:0})}}function Yn(n){let e;const t=n[13].default,l=rt(t,n,n[12],null);return{c(){l&&l.c()},m(i,o){l&&l.m(i,o),e=!0},p(i,o){l&&l.p&&(!e||o&4096)&&ft(l,t,i,i[12],e?dt(t,i[12],o,null):ct(i[12]),null)},i(i){e||(C(l,i),e=!0)},o(i){R(l,i),e=!1},d(i){l&&l.d(i)}}}function Qn(n){let e,t,l,i,o,s;const u=n[13].default,a=rt(u,n,n[12],null);let r=n[4]&&Nt(n);return{c(){e=S("div"),a&&a.c(),t=j(),r&&r.c(),l=Qe(),v(e,"class","element svelte-1vroict")},m(h,c){P(h,e,c),a&&a.m(e,null),n[14](e),P(h,t,c),r&&r.m(h,c),P(h,l,c),i=!0,o||(s=[K(e,"mouseover",n[8]),K(e,"focus",n[8]),K(e,"mouseleave",n[10]),K(e,"blur",n[10]),K(e,"mousemove",n[9])],o=!0)},p(h,c){a&&a.p&&(!i||c&4096)&&ft(a,u,h,h[12],i?dt(u,h[12],c,null):ct(h[12]),null),h[4]?r?(r.p(h,c),c&16&&C(r,1)):(r=Nt(h),r.c(),C(r,1),r.m(l.parentNode,l)):r&&(re(),R(r,1,1,()=>{r=null}),fe())},i(h){i||(C(a,h),C(r),i=!0)},o(h){R(a,h),R(r),i=!1},d(h){h&&D(e),a&&a.d(h),n[14](null),h&&D(t),r&&r.d(h),h&&D(l),o=!1,Fe(s)}}}function Nt(n){let e,t,l,i,o,s,u,a=!n[2]&&n[1]&&Pt(n),r=n[2]&&Dt(n);return{c(){e=S("div"),t=S("div"),l=he(n[0]),i=j(),a&&a.c(),o=j(),r&&r.c(),v(t,"class","content"),Xe(e,"top",n[6]+"px"),Xe(e,"left",n[5]+"px"),v(e,"class","tooltip svelte-1vroict")},m(h,c){P(h,e,c),y(e,t),y(t,l),y(e,i),a&&a.m(e,null),y(e,o),r&&r.m(e,null),n[15](e),u=!0},p(h,c){(!u||c&1)&&we(l,h[0]),!h[2]&&h[1]?a?(a.p(h,c),c&6&&C(a,1)):(a=Pt(h),a.c(),C(a,1),a.m(e,o)):a&&(re(),R(a,1,1,()=>{a=null}),fe()),h[2]?r?r.p(h,c):(r=Dt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!u||c&64)&&Xe(e,"top",h[6]+"px"),(!u||c&32)&&Xe(e,"left",h[5]+"px")},i(h){u||(C(a),Se(()=>{s||(s=Ge(e,wt,{},!0)),s.run(1)}),u=!0)},o(h){R(a),s||(s=Ge(e,wt,{},!1)),s.run(0),u=!1},d(h){h&&D(e),a&&a.d(),r&&r.d(),n[15](null),h&&s&&s.end()}}}function Pt(n){let e,t;return e=new Gn({props:{keys:n[1]}}),{c(){U(e.$$.fragment)},m(l,i){E(e,l,i),t=!0},p(l,i){const o={};i&2&&(o.keys=l[1]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function Dt(n){let e,t;return{c(){e=S("div"),t=he(n[2]),v(e,"class","disabled svelte-1vroict")},m(l,i){P(l,e,i),y(e,t)},p(l,i){i&4&&we(t,l[2])},d(l){l&&D(e)}}}function Zn(n){let e,t,l,i;const o=[Qn,Yn],s=[];function u(a,r){return a[0]?0:1}return e=u(n),t=s[e]=o[e](n),{c(){t.c(),l=Qe()},m(a,r){s[e].m(a,r),P(a,l,r),i=!0},p(a,[r]){let h=e;e=u(a),e===h?s[e].p(a,r):(re(),R(s[h],1,1,()=>{s[h]=null}),fe(),t=s[e],t?t.p(a,r):(t=s[e]=o[e](a),t.c()),C(t,1),t.m(l.parentNode,l))},i(a){i||(C(t),i=!0)},o(a){R(t),i=!1},d(a){s[e].d(a),a&&D(l)}}}function $n(n,e,t){let{$$slots:l={},$$scope:i}=e;var o=this&&this.__awaiter||function(H,B,T,V){function $(q){return q instanceof T?q:new T(function(m){m(q)})}return new(T||(T=Promise))(function(q,m){function L(A){try{O(V.next(A))}catch(z){m(z)}}function X(A){try{O(V.throw(A))}catch(z){m(z)}}function O(A){A.done?q(A.value):$(A.value).then(L,X)}O((V=V.apply(H,B||[])).next())})};let{content:s}=e,{shortcut:u}=e,{disabled:a=!1}=e,{layout:r="bottom"}=e,h=!1,c=0,d=0,f,p;function _(){t(4,h=!0),b()}function b(){if(p){let H=f.getBoundingClientRect();r=="bottom"||r=="top"?(t(5,c=H.left-p.offsetWidth/2+H.width/2),c<4?t(5,c=4):c+p.offsetWidth>window.innerWidth-4&&t(5,c=window.innerWidth-p.offsetWidth-4),r=="bottom"?t(6,d=H.bottom+4):r=="top"&&t(6,d=H.top-p.offsetHeight-4)):(r=="left"||r=="right")&&(t(6,d=H.top-p.offsetHeight/2+H.height/2),d<4?t(6,d=4):d+p.offsetHeight>window.innerHeight-4&&t(6,d=window.innerHeight-p.offsetHeight-4),r=="left"?t(5,c=H.left-p.offsetWidth-4):r=="right"&&t(5,c=H.right+4))}}function g(){return o(this,void 0,void 0,function*(){yield Je(),b()})}function w(){t(4,h=!1)}function k(H){Z[H?"unshift":"push"](()=>{f=H,t(7,f)})}function N(H){Z[H?"unshift":"push"](()=>{p=H,t(3,p)})}return n.$$set=H=>{"content"in H&&t(0,s=H.content),"shortcut"in H&&t(1,u=H.shortcut),"disabled"in H&&t(2,a=H.disabled),"layout"in H&&t(11,r=H.layout),"$$scope"in H&&t(12,i=H.$$scope)},n.$$.update=()=>{n.$$.dirty&2063&&g()},[s,u,a,p,h,c,d,f,_,b,w,r,i,l,k,N]}class xn extends ie{constructor(e){super();oe(this,e,$n,Zn,te,{content:0,shortcut:1,disabled:2,layout:11})}}function Ht(n){let e,t;return{c(){e=S("p"),t=he(n[1]),v(e,"class","svelte-14fho1m")},m(l,i){P(l,e,i),y(e,t)},p(l,i){i&2&&we(t,l[1])},d(l){l&&D(e)}}}function el(n){let e,t,l,i,o,s,u,a;t=new on({props:{name:n[0],size:"var(--button-size)"}});let r=n[1]&&Ht(n);return{c(){e=S("button"),U(t.$$.fragment),l=j(),r&&r.c(),v(e,"class",i=le(`top ${n[5]?"palette-"+n[5]:""}`)+" svelte-14fho1m"),e.disabled=o=!!n[3],W(e,"disabled",n[3])},m(h,c){P(h,e,c),E(t,e,null),y(e,l),r&&r.m(e,null),s=!0,u||(a=[K(e,"click",n[8]),K(e,"mousedown",nl)],u=!0)},p(h,c){const d={};c&1&&(d.name=h[0]),t.$set(d),h[1]?r?r.p(h,c):(r=Ht(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!s||c&32&&i!==(i=le(`top ${h[5]?"palette-"+h[5]:""}`)+" svelte-14fho1m"))&&v(e,"class",i),(!s||c&8&&o!==(o=!!h[3]))&&(e.disabled=o),c&40&&W(e,"disabled",h[3])},i(h){s||(C(t.$$.fragment,h),s=!0)},o(h){R(t.$$.fragment,h),s=!1},d(h){h&&D(e),I(t),r&&r.d(),u=!1,Fe(a)}}}function tl(n){let e,t;return e=new xn({props:{content:n[2],disabled:n[3]&&n[6],shortcut:n[4],layout:n[7],$$slots:{default:[el]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(l,i){E(e,l,i),t=!0},p(l,[i]){const o={};i&4&&(o.content=l[2]),i&72&&(o.disabled=l[3]&&l[6]),i&16&&(o.shortcut=l[4]),i&128&&(o.layout=l[7]),i&555&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function nl(n){n.preventDefault()}function ll(n,e,t){let{icon:l}=e,{text:i=null}=e,{tooltip:o=null}=e,{disabled:s=!1}=e,{shortcut:u=null}=e,{palette:a=null}=e,{disabledReason:r="disabled"}=e,{tooltipLayout:h="bottom"}=e;function c(d){be.call(this,n,d)}return n.$$set=d=>{"icon"in d&&t(0,l=d.icon),"text"in d&&t(1,i=d.text),"tooltip"in d&&t(2,o=d.tooltip),"disabled"in d&&t(3,s=d.disabled),"shortcut"in d&&t(4,u=d.shortcut),"palette"in d&&t(5,a=d.palette),"disabledReason"in d&&t(6,r=d.disabledReason),"tooltipLayout"in d&&t(7,h=d.tooltipLayout)},[l,i,o,s,u,a,r,h,c]}class ue extends ie{constructor(e){super();oe(this,e,ll,tl,te,{icon:0,text:1,tooltip:2,disabled:3,shortcut:4,palette:5,disabledReason:6,tooltipLayout:7})}}function il(n){let e,t;const l=n[1].default,i=rt(l,n,n[0],null);return{c(){e=S("div"),i&&i.c(),v(e,"class","top svelte-p5tbxi")},m(o,s){P(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&ft(i,l,o,o[0],t?dt(l,o[0],s,null):ct(o[0]),null)},i(o){t||(C(i,o),t=!0)},o(o){R(i,o),t=!1},d(o){o&&D(e),i&&i.d(o)}}}function ol(n,e,t){let{$$slots:l={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,l]}class _t extends ie{constructor(e){super();oe(this,e,ol,il,te,{})}}function sl(n){let e,t;return e=new ue({props:{icon:"delete",tooltip:"delete flow"}}),e.$on("click",function(){ln(n[3])&&n[3].apply(this,arguments)}),{c(){U(e.$$.fragment)},m(l,i){E(e,l,i),t=!0},p(l,i){n=l},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function ul(n){let e,t,l,i,o,s,u,a,r;function h(d){n[12](d)}let c={nowrap:!0,placeholder:"type name here"};return n[1]!==void 0&&(c.value=n[1]),i=new ht({props:c}),Z.push(()=>x(i,"value",h)),n[13](i),i.$on("blur",n[6]),i.$on("focus",n[7]),i.$on("keydown",n[8]),i.$on("beforeinput",n[9]),u=new _t({props:{$$slots:{default:[sl]},$$scope:{ctx:n}}}),{c(){e=S("div"),t=S("div"),l=S("div"),U(i.$$.fragment),s=j(),U(u.$$.fragment),v(l,"class","text svelte-1ys6vmc"),W(l,"focus",n[0]),v(t,"class",a=le(`content palette-${n[5]}`)+" svelte-1ys6vmc"),v(e,"class",le("top")+" svelte-1ys6vmc"),W(e,"invert",n[2])},m(d,f){P(d,e,f),y(e,t),y(t,l),E(i,l,null),y(t,s),E(u,t,null),r=!0},p(d,[f]){const p={};!o&&f&2&&(o=!0,p.value=d[1],ee(()=>o=!1)),i.$set(p),f&1&&W(l,"focus",d[0]);const _={};f&1048584&&(_.$$scope={dirty:f,ctx:d}),u.$set(_),(!r||f&32&&a!==(a=le(`content palette-${d[5]}`)+" svelte-1ys6vmc"))&&v(t,"class",a),f&4&&W(e,"invert",d[2])},i(d){r||(C(i.$$.fragment,d),C(u.$$.fragment,d),r=!0)},o(d){R(i.$$.fragment,d),R(u.$$.fragment,d),r=!1},d(d){d&&D(e),n[13](null),I(i),I(u)}}}function al(n,e,t){let l,i,o;ke(n,Re,T=>t(16,i=T)),ke(n,ne,T=>t(17,o=T));const s=at();let{content:u}=e,{children:a}=e,{index:r}=e,{focus:h}=e,{invert:c}=e,{deleteSelf:d=()=>{}}=e,f;function p(){h&&t(0,h=!1)}function _(){h||t(0,h=!0)}function b(T){(T.key=="Enter"||T.key=="ArrowDown")&&(T.preventDefault(),a.length>0&&(t(10,a[0].focus=!0,a),t(0,h=!1)))}let g=!1;function w(){h?(o[i].history.addFocus([...l]),s("saveFocus",l),ge(ne,o[i].lastFocus=[...l],o),ne.set(o),f&&f.focus()):g=!1}nn(w);function k(T){g||o[i].history.addPending("edit",[...l],{lastContent:u,getNextContent(){return u},createEditBreak(){g=!1}}),g=!0}let N="plain";function H(T){u=T,t(1,u)}function B(T){Z[T?"unshift":"push"](()=>{f=T,t(4,f)})}return n.$$set=T=>{"content"in T&&t(1,u=T.content),"children"in T&&t(10,a=T.children),"index"in T&&t(11,r=T.index),"focus"in T&&t(0,h=T.focus),"invert"in T&&t(2,c=T.invert),"deleteSelf"in T&&t(3,d=T.deleteSelf)},n.$$.update=()=>{n.$$.dirty&2048&&(l=[r]),n.$$.dirty&1&&w(),n.$$.dirty&4&&(c?t(5,N="accent-secondary"):t(5,N="accent"))},[h,u,c,d,f,N,p,_,b,k,a,r,H,B]}class rl extends ie{constructor(e){super();oe(this,e,al,ul,te,{content:1,children:10,index:11,focus:0,invert:2,deleteSelf:3})}}function fl(n){let e,t,l,i,o,s,u,a,r,h,c,d;return e=new ue({props:{icon:"undo",disabled:n[0].history.index==-1,tooltip:"undo",shortcut:["cmd","z"],disabledReason:"nothing to undo"}}),e.$on("click",n[5]),l=new ue({props:{disabled:n[0].history.index==n[0].history.data.length-1,icon:"redo",tooltip:"redo",shortcut:["cmd","shift","z"],disabledReason:"nothing to redo"}}),l.$on("click",n[6]),o=new ue({props:{icon:"addRight",disabled:!n[1],disabledReason:Ke,tooltip:"add response",shortcut:["shift","enter"]}}),o.$on("click",n[3]),u=new ue({props:{icon:"addUp",disabled:!n[1],disabledReason:Ke,tooltip:"add arguement above"}}),u.$on("click",n[7]),r=new ue({props:{icon:"addDown",disabled:!n[1],disabledReason:Ke,tooltip:"add arguement below",shortcut:["enter"]}}),r.$on("click",n[8]),c=new ue({props:{icon:"delete",disabled:!n[1],disabledReason:Ke,tooltip:"delete selected"}}),c.$on("click",n[2]),{c(){U(e.$$.fragment),t=j(),U(l.$$.fragment),i=j(),U(o.$$.fragment),s=j(),U(u.$$.fragment),a=j(),U(r.$$.fragment),h=j(),U(c.$$.fragment)},m(f,p){E(e,f,p),P(f,t,p),E(l,f,p),P(f,i,p),E(o,f,p),P(f,s,p),E(u,f,p),P(f,a,p),E(r,f,p),P(f,h,p),E(c,f,p),d=!0},p(f,p){const _={};p&1&&(_.disabled=f[0].history.index==-1),e.$set(_);const b={};p&1&&(b.disabled=f[0].history.index==f[0].history.data.length-1),l.$set(b);const g={};p&2&&(g.disabled=!f[1]),o.$set(g);const w={};p&2&&(w.disabled=!f[1]),u.$set(w);const k={};p&2&&(k.disabled=!f[1]),r.$set(k);const N={};p&2&&(N.disabled=!f[1]),c.$set(N)},i(f){d||(C(e.$$.fragment,f),C(l.$$.fragment,f),C(o.$$.fragment,f),C(u.$$.fragment,f),C(r.$$.fragment,f),C(c.$$.fragment,f),d=!0)},o(f){R(e.$$.fragment,f),R(l.$$.fragment,f),R(o.$$.fragment,f),R(u.$$.fragment,f),R(r.$$.fragment,f),R(c.$$.fragment,f),d=!1},d(f){I(e,f),f&&D(t),I(l,f),f&&D(i),I(o,f),f&&D(s),I(u,f),f&&D(a),I(r,f),f&&D(h),I(c,f)}}}function cl(n){let e,t,l,i,o,s;return l=new _t({props:{$$slots:{default:[fl]},$$scope:{ctx:n}}}),{c(){e=S("div"),t=S("div"),U(l.$$.fragment),v(t,"class","buttons-wrapper svelte-psed4t"),v(e,"class","top svelte-psed4t")},m(u,a){P(u,e,a),y(e,t),E(l,t,null),i=!0,o||(s=K(e,"mousedown",dl),o=!0)},p(u,[a]){const r={};a&2051&&(r.$$scope={dirty:a,ctx:u}),l.$set(r)},i(u){i||(C(l.$$.fragment,u),i=!0)},o(u){R(l.$$.fragment,u),i=!1},d(u){u&&D(e),I(l),o=!1,s()}}}let Ke="no cell selected";function dl(n){n.preventDefault()}function hl(n,e,t){var l=this&&this.__awaiter||function(p,_,b,g){function w(k){return k instanceof b?k:new b(function(N){N(k)})}return new(b||(b=Promise))(function(k,N){function H(V){try{T(g.next(V))}catch($){N($)}}function B(V){try{T(g.throw(V))}catch($){N($)}}function T(V){V.done?k(V.value):w(V.value).then(H,B)}T((g=g.apply(p,_||[])).next())})};let{flow:i}=e,o=!1;function s(){return l(this,void 0,void 0,function*(){if(yield Je(),i.lastFocus&&i.lastFocus.length>1){let p=pe(i.lastFocus);t(1,o=p==null?void 0:p.focus)}})}tn(function(){s()});function u(){return l(this,void 0,void 0,function*(){if(!o)return;let p=pe(i.lastFocus,1),_=pe(i.lastFocus),b=[...p.children];if(b.length>1||p.level>=1){i.history.add("delete",i.lastFocus,{box:b[_.index]}),b[_.index].focus=!1,p.children=[...b],t(0,i),yield Je(),b.splice(_.index,1);for(let g=_.index;g<b.length;g++)b[g].index=g;b.length<=0?p.focus=!0:_.index>=b.length?b[b.length-1].focus=!0:b[_.index].focus=!0,p.children=[...b],t(0,i)}})}function a(){if(!o)return;let p=pe(i.lastFocus),_=[...p.children];if(p.level<i.columns.length){_.splice(0,0,Ie(0,p.level+1,!1));for(let b=0;b<_.length;b++)_[b].index=b;i.history.add("add",[...i.lastFocus,0]),p.children=[..._],t(0,i)}}function r(p){if(!o)return;let _=pe(i.lastFocus,1),b=pe(i.lastFocus),g=[..._.children];g.splice(b.index+p,0,Ie(b.index+p,b.level,!1));for(let k=b.index;k<g.length;k++)g[k].index=k;let w=[...i.lastFocus];p==0?(w[w.length-1]-=0,t(0,i.lastFocus[i.lastFocus.length-1]+=1,i)):w[w.length-1]+=1,i.history.add("add",w),_.children=[...g],t(0,i)}const h=()=>i.history.undo(),c=()=>i.history.redo(),d=()=>r(0),f=()=>r(1);return n.$$set=p=>{"flow"in p&&t(0,i=p.flow)},[i,o,u,a,r,h,c,d,f]}class _l extends ie{constructor(e){super();oe(this,e,hl,cl,te,{flow:0})}}function pl(n){let e,t,l,i,o,s,u,a,r,h;l=new ue({props:{icon:"delete",tooltip:"close"}}),l.$on("click",function(){ln(n[1])&&n[1].apply(this,arguments)});var c=n[0];function d(f){return{props:{closePopup:f[1]}}}return c&&(o=new c(d(n))),{c(){e=S("div"),t=S("div"),U(l.$$.fragment),i=j(),o&&U(o.$$.fragment),v(t,"class","close svelte-xzcwlv"),v(e,"class","top svelte-xzcwlv")},m(f,p){P(f,e,p),y(e,t),E(l,t,null),y(e,i),o&&E(o,e,null),a=!0,r||(h=K(window,"keydown",n[2]),r=!0)},p(f,[p]){n=f;const _={};if(p&2&&(_.closePopup=n[1]),c!==(c=n[0])){if(o){re();const b=o;R(b.$$.fragment,1,0,()=>{I(b,1)}),fe()}c?(o=new c(d(n)),U(o.$$.fragment),C(o.$$.fragment,1),E(o,e,null)):o=null}else c&&o.$set(_)},i(f){a||(C(l.$$.fragment,f),o&&C(o.$$.fragment,f),Se(()=>{u&&u.end(1),s=Be(e,Hn,{}),s.start()}),a=!0)},o(f){R(l.$$.fragment,f),o&&R(o.$$.fragment,f),s&&s.invalidate(),u=Ue(e,Bn,{}),a=!1},d(f){f&&D(e),I(l),o&&I(o),f&&u&&u.end(),r=!1,h()}}}function gl(n,e,t){let{component:l}=e,{closeSelf:i}=e;function o(s){s.key==="Escape"&&i()}return n.$$set=s=>{"component"in s&&t(0,l=s.component),"closeSelf"in s&&t(1,i=s.closeSelf)},[l,i,o]}class ml extends ie{constructor(e){super();oe(this,e,gl,pl,te,{component:0,closeSelf:1})}}function vl(n){let e,t,l,i,o,s,u,a,r,h,c;return l=new ue({props:{icon:"download",text:"download as JSON",tooltip:"saves JSON file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),l.$on("click",n[1]),a=new ue({props:{icon:"download",text:"download as XLSX",tooltip:"saves XLSX file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),a.$on("click",n[2]),{c(){e=S("div"),t=S("section"),U(l.$$.fragment),i=j(),o=S("ul"),o.innerHTML=`<li>Can reopen file in this editor</li> 
      <li>More data is saved (last focused cell etc.)</li>`,s=j(),u=S("section"),U(a.$$.fragment),r=j(),h=S("ul"),h.innerHTML="<li>Anyone can view it</li>",v(o,"class","svelte-87ygo3"),v(t,"class","json svelte-87ygo3"),v(h,"class","svelte-87ygo3"),v(u,"class","xlsx svelte-87ygo3"),v(e,"class","top svelte-87ygo3")},m(d,f){P(d,e,f),y(e,t),E(l,t,null),y(t,i),y(t,o),y(e,s),y(e,u),E(a,u,null),y(u,r),y(u,h),c=!0},p(d,[f]){const p={};f&1&&(p.disabled=d[0].length==0),l.$set(p);const _={};f&1&&(_.disabled=d[0].length==0),a.$set(_)},i(d){c||(C(l.$$.fragment,d),C(a.$$.fragment,d),c=!0)},o(d){R(l.$$.fragment,d),R(a.$$.fragment,d),c=!1},d(d){d&&D(e),I(l),I(a)}}}function bl(n,e,t){let l;ke(n,ne,u=>t(0,l=u));let{closePopup:i}=e;function o(){let u=JSON.stringify(l,(r,h)=>{if(r!=="history")return h}),a=document.createElement("a");a.setAttribute("href","data:text/json;charset=utf-8, "+encodeURIComponent(u)),a.setAttribute("download","flow.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),i()}function s(){let u=new vn.exports.Workbook;for(let a of l){let h=function(f,p,_){for(;!r[_];){let b=[];for(let g=0;g<a.columns.length;g++)b.push("");r.push(b)}p>=0&&(r[_][p]=f.content),f.children.forEach(function(b,g){h(b,p+1,_+g)})},r=[];h(a,-1,0);let c=a.content;c.length>=31&&(c=c.substring(0,31));let d=u.addWorksheet(c);d.columns=a.columns.map(function(f){return{header:f,width:25}});for(let f=0;f<r.length;f++){let p=d.getRow(f+2);for(let _=0;_<r[f].length;_++)p.getCell(_+1).value=r[f][_]}d.getRow(1).font={bold:!0}}u.xlsx.writeBuffer({base64:!0}).then(function(a){let r=document.createElement("a"),h=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=URL.createObjectURL(h);r.href=c,r.download="flow.xlsx",document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(c)},0)}).catch(function(a){console.log(a.message)}),i()}return n.$$set=u=>{"closePopup"in u&&t(3,i=u.closePopup)},[l,o,s,i]}class kl extends ie{constructor(e){super();oe(this,e,bl,vl,te,{closePopup:3})}}function wl(n){let e,t,l,i,o;return t=new ue({props:{icon:"upload",text:"choose file from computer",tooltip:"upload a JSON file from your computer",tooltipLayout:"top"}}),t.$on("click",n[0]),{c(){e=S("div"),U(t.$$.fragment),l=j(),i=S("p"),i.textContent="Or drag and drop a JSON file anywhere in this window",v(i,"class","svelte-1vv9x21"),v(e,"class","top svelte-1vv9x21")},m(s,u){P(s,e,u),E(t,e,null),y(e,l),y(e,i),o=!0},p:ce,i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){R(t.$$.fragment,s),o=!1},d(s){s&&D(e),I(t)}}}function yl(n,e,t){let{closePopup:l}=e;function i(){document.getElementById("uploadId").click(),l()}return n.$$set=o=>{"closePopup"in o&&t(1,l=o.closePopup)},[i,l]}class Sl extends ie{constructor(e){super();oe(this,e,yl,wl,te,{closePopup:1})}}function Fl(n){let e,t,l,i,o,s,u;return{c(){e=S("label"),t=S("input"),l=j(),i=S("div"),i.innerHTML='<div class="switch svelte-8bq301"></div>',v(t,"type","checkbox"),v(t,"class","svelte-8bq301"),v(i,"class","background svelte-8bq301"),v(e,"class",o=le(`palette-${n[1]}`)+" svelte-8bq301")},m(a,r){P(a,e,r),y(e,t),t.checked=n[0],y(e,l),y(e,i),s||(u=K(t,"change",n[4]),s=!0)},p(a,[r]){r&1&&(t.checked=a[0]),r&2&&o!==(o=le(`palette-${a[1]}`)+" svelte-8bq301")&&v(e,"class",o)},i:ce,o:ce,d(a){a&&D(e),s=!1,u()}}}function Cl(n,e,t){let{value:l=1}=e,{auto:i=1}=e,o,s=!!l;function u(){s=this.checked,t(0,s)}return n.$$set=a=>{"value"in a&&t(2,l=a.value),"auto"in a&&t(3,i=a.auto)},n.$$.update=()=>{n.$$.dirty&1&&t(2,l=s?1:0),n.$$.dirty&12&&(l?l==i?t(1,o="accent-secondary"):t(1,o="accent"):t(1,o="plain"))},[s,o,l,i,u]}class Ll extends ie{constructor(e){super();oe(this,e,Cl,Fl,te,{value:2,auto:3})}}function Bt(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function jt(n){let e;return{c(){e=S("p"),e.textContent="default",v(e,"class","option-info svelte-ac5xa2")},m(t,l){P(t,e,l)},d(t){t&&D(e)}}}function Vt(n){let e,t,l,i,o,s,u,a=n[12]+"",r,h,c,d,f=n[14]==n[3]&&jt();return{c(){e=S("label"),t=S("input"),o=j(),s=S("li"),u=S("p"),r=he(a),h=j(),f&&f.c(),v(t,"type","radio"),v(t,"name",n[2]),t.checked=l=n[14]==n[0],t.__value=i=n[14],t.value=t.__value,v(t,"class","svelte-ac5xa2"),n[7][0].push(t),v(u,"class","svelte-ac5xa2"),v(s,"class","svelte-ac5xa2"),v(e,"class","svelte-ac5xa2")},m(p,_){P(p,e,_),y(e,t),t.checked=t.__value===n[0],y(e,o),y(e,s),y(s,u),y(u,r),y(s,h),f&&f.m(s,null),c||(d=K(t,"change",n[6]),c=!0)},p(p,_){_&4&&v(t,"name",p[2]),_&1&&l!==(l=p[14]==p[0])&&(t.checked=l),_&1&&(t.checked=t.__value===p[0]),_&2&&a!==(a=p[12]+"")&&we(r,a),p[14]==p[3]?f||(f=jt(),f.c(),f.m(s,null)):f&&(f.d(1),f=null)},d(p){p&&D(e),n[7][0].splice(n[7][0].indexOf(t),1),f&&f.d(),c=!1,d()}}}function qt(n){let e,t,l,i,o,s,u,a,r,h,c,d;function f(b){n[9](b)}let p={placeholder:"custom",nowrap:!0};n[1].customOptionValue!==void 0&&(p.value=n[1].customOptionValue),u=new ht({props:p}),Z.push(()=>x(u,"value",f)),u.$on("input",n[10]),u.$on("focus",n[11]);let _=n[1].customOptionValue!=""&&zt();return{c(){e=S("label"),t=S("input"),o=j(),s=S("li"),U(u.$$.fragment),r=j(),_&&_.c(),v(t,"type","radio"),v(t,"name",n[2]),t.checked=l=n[0]==n[1].options.length,t.__value=i=n[1].options.length,t.value=t.__value,v(t,"class","svelte-ac5xa2"),n[7][0].push(t),v(s,"class","svelte-ac5xa2"),v(e,"class","svelte-ac5xa2")},m(b,g){P(b,e,g),y(e,t),t.checked=t.__value===n[0],y(e,o),y(e,s),E(u,s,null),y(s,r),_&&_.m(s,null),h=!0,c||(d=K(t,"change",n[8]),c=!0)},p(b,g){(!h||g&4)&&v(t,"name",b[2]),(!h||g&3&&l!==(l=b[0]==b[1].options.length))&&(t.checked=l),(!h||g&2&&i!==(i=b[1].options.length))&&(t.__value=i,t.value=t.__value),g&1&&(t.checked=t.__value===b[0]);const w={};!a&&g&2&&(a=!0,w.value=b[1].customOptionValue,ee(()=>a=!1)),u.$set(w),b[1].customOptionValue!=""?_||(_=zt(),_.c(),_.m(s,null)):_&&(_.d(1),_=null)},i(b){h||(C(u.$$.fragment,b),h=!0)},o(b){R(u.$$.fragment,b),h=!1},d(b){b&&D(e),n[7][0].splice(n[7][0].indexOf(t),1),I(u),_&&_.d(),c=!1,d()}}}function zt(n){let e;return{c(){e=S("p"),e.textContent="custom",v(e,"class","option-info svelte-ac5xa2")},m(t,l){P(t,e,l)},d(t){t&&D(e)}}}function Ml(n){let e,t,l,i,o,s,u,a,r,h=n[1].options,c=[];for(let f=0;f<h.length;f+=1)c[f]=Vt(Bt(n,h,f));let d=n[1].customOption&&qt(n);return{c(){e=S("div"),t=S("div"),l=S("div"),o=j(),s=S("ul");for(let f=0;f<c.length;f+=1)c[f].c();u=j(),d&&d.c(),v(l,"class","switch svelte-ac5xa2"),v(l,"style",i=`--pos:calc(${n[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`),v(t,"class","background svelte-ac5xa2"),v(s,"class","svelte-ac5xa2"),v(e,"class",a=le(`top palette-${n[4]}`)+" svelte-ac5xa2")},m(f,p){P(f,e,p),y(e,t),y(t,l),y(e,o),y(e,s);for(let _=0;_<c.length;_+=1)c[_].m(s,null);y(s,u),d&&d.m(s,null),r=!0},p(f,[p]){if((!r||p&1&&i!==(i=`--pos:calc(${f[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`))&&v(l,"style",i),p&15){h=f[1].options;let _;for(_=0;_<h.length;_+=1){const b=Bt(f,h,_);c[_]?c[_].p(b,p):(c[_]=Vt(b),c[_].c(),c[_].m(s,u))}for(;_<c.length;_+=1)c[_].d(1);c.length=h.length}f[1].customOption?d?(d.p(f,p),p&2&&C(d,1)):(d=qt(f),d.c(),C(d,1),d.m(s,null)):d&&(re(),R(d,1,1,()=>{d=null}),fe()),(!r||p&16&&a!==(a=le(`top palette-${f[4]}`)+" svelte-ac5xa2"))&&v(e,"class",a)},i(f){r||(C(d),r=!0)},o(f){R(d),r=!1},d(f){f&&D(e),Oe(c,f),d&&d.d()}}}function Al(n,e,t){let l,{name:i}=e,{value:o}=e,{auto:s}=e;const u=at();let{detail:a}=e;const r=[[]];function h(){o=this.__value,t(0,o)}function c(){o=this.__value,t(0,o)}function d(_){n.$$.not_equal(a.customOptionValue,_)&&(a.customOptionValue=_,t(1,a))}const f=()=>u("forceUpdate"),p=()=>t(0,o=a.options.length);return n.$$set=_=>{"name"in _&&t(2,i=_.name),"value"in _&&t(0,o=_.value),"auto"in _&&t(3,s=_.auto),"detail"in _&&t(1,a=_.detail)},n.$$.update=()=>{n.$$.dirty&9&&t(4,l=s==o?"accent-secondary":"accent")},[o,a,i,s,l,u,h,r,c,d,f,p]}class Tl extends ie{constructor(e){super();oe(this,e,Al,Ml,te,{name:2,value:0,auto:3,detail:1})}}function Rl(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b;return{c(){e=S("div"),t=S("label"),l=S("div"),o=j(),s=S("input"),h=j(),c=S("label"),d=S("input"),v(l,"class","switch svelte-12gyw47"),v(l,"style",i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(n[0],n[1].max),n[1].min)-n[1].min)/(n[1].max-n[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${n[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`),v(s,"class","slider svelte-12gyw47"),v(s,"type","range"),v(s,"min",u=n[1].min),v(s,"max",a=n[1].max),v(s,"step",r=n[1].step),v(t,"class","svelte-12gyw47"),v(d,"type","number"),v(d,"class","svelte-12gyw47"),v(c,"class","small svelte-12gyw47"),v(e,"class",f=le(`top palette-${n[3]}`)+" svelte-12gyw47"),v(e,"style",p=`--value: ${n[0]}`),W(e,"hue",n[1].hue)},m(g,w){P(g,e,w),y(e,t),y(t,l),y(t,o),y(t,s),De(s,n[0]),y(e,h),y(e,c),y(c,d),De(d,n[0]),_||(b=[K(s,"change",n[8]),K(s,"input",n[8]),K(d,"input",n[9]),K(e,"mousedown",n[4]),K(e,"mousemove",n[5]),K(e,"mouseup",n[6])],_=!0)},p(g,[w]){w&7&&i!==(i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(g[0],g[1].max),g[1].min)-g[1].min)/(g[1].max-g[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${g[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`)&&v(l,"style",i),w&2&&u!==(u=g[1].min)&&v(s,"min",u),w&2&&a!==(a=g[1].max)&&v(s,"max",a),w&2&&r!==(r=g[1].step)&&v(s,"step",r),w&1&&De(s,g[0]),w&1&&ot(d.value)!==g[0]&&De(d,g[0]),w&8&&f!==(f=le(`top palette-${g[3]}`)+" svelte-12gyw47")&&v(e,"class",f),w&1&&p!==(p=`--value: ${g[0]}`)&&v(e,"style",p),w&10&&W(e,"hue",g[1].hue)},i:ce,o:ce,d(g){g&&D(e),_=!1,Fe(b)}}}function Ol(n,e,t){let l,{value:i}=e,{auto:o}=e,{detail:s}=e,u=!1,a=!1,r=0;function h(_){u=!0,r=_.pageX,t(2,a=!1)}function c(_){u&&Math.abs(r-_.pageX)>3&&t(2,a=!0)}function d(_){u=!1,t(2,a=!1)}function f(){i=ot(this.value),t(0,i)}function p(){i=ot(this.value),t(0,i)}return n.$$set=_=>{"value"in _&&t(0,i=_.value),"auto"in _&&t(7,o=_.auto),"detail"in _&&t(1,s=_.detail)},n.$$.update=()=>{n.$$.dirty&129&&t(3,l=o==i?"accent-secondary":"accent")},[i,s,a,l,h,c,d,o,f,p]}class Nl extends ie{constructor(e){super();oe(this,e,Ol,Rl,te,{value:0,auto:7,detail:1})}}function Ut(n){let e,t,l;function i(s){n[9](s)}let o={auto:n[0].auto};return n[1]!==void 0&&(o.value=n[1]),e=new Ll({props:o}),Z.push(()=>x(e,"value",i)),{c(){U(e.$$.fragment)},m(s,u){E(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.auto=s[0].auto),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){I(e,s)}}}function Et(n){let e,t=n[0].info+"",l;return{c(){e=S("p"),l=he(t),v(e,"class","svelte-1il06s5")},m(i,o){P(i,e,o),y(e,l)},p(i,o){o&1&&t!==(t=i[0].info+"")&&we(l,t)},d(i){i&&D(e)}}}function It(n){let e,t,l;function i(s){n[10](s)}let o={name:n[0].name,auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(o.value=n[1]),e=new Tl({props:o}),Z.push(()=>x(e,"value",i)),e.$on("forceUpdate",n[11]),{c(){U(e.$$.fragment)},m(s,u){E(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.name=s[0].name),u&1&&(a.auto=s[0].auto),u&1&&(a.detail=s[0].detail),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){I(e,s)}}}function Xt(n){let e,t,l;function i(s){n[12](s)}let o={auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(o.value=n[1]),e=new Nl({props:o}),Z.push(()=>x(e,"value",i)),{c(){U(e.$$.fragment)},m(s,u){E(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.auto=s[0].auto),u&1&&(a.detail=s[0].detail),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){I(e,s)}}}function Pl(n){let e,t,l,i=n[0].name+"",o,s,u,a,r,h,c,d,f,p;a=new ue({props:{icon:"delete",tooltip:"reset to default",tooltipLayout:"right"}}),a.$on("click",n[6]);let _=n[0].type=="toggle"&&Ut(n),b=n[0].info&&Et(n),g=n[0].type=="radio"&&It(n),w=n[0].type=="slider"&&Xt(n);return{c(){e=S("div"),t=S("span"),l=S("h1"),o=he(i),s=j(),u=S("div"),U(a.$$.fragment),r=j(),_&&_.c(),h=j(),b&&b.c(),c=j(),g&&g.c(),d=j(),w&&w.c(),v(l,"class","svelte-1il06s5"),v(u,"class","reset svelte-1il06s5"),W(u,"hidden",n[1]==n[0].auto),v(t,"class","above svelte-1il06s5"),v(e,"class","top svelte-1il06s5"),v(e,"style",f=`--spotlight:${n[4]}`)},m(k,N){P(k,e,N),y(e,t),y(t,l),y(l,o),y(t,s),y(t,u),E(a,u,null),y(t,r),_&&_.m(t,null),y(t,h),b&&b.m(t,null),y(e,c),g&&g.m(e,null),y(e,d),w&&w.m(e,null),n[13](e),p=!0},p(k,[N]){(!p||N&1)&&i!==(i=k[0].name+"")&&we(o,i),N&3&&W(u,"hidden",k[1]==k[0].auto),k[0].type=="toggle"?_?(_.p(k,N),N&1&&C(_,1)):(_=Ut(k),_.c(),C(_,1),_.m(t,h)):_&&(re(),R(_,1,1,()=>{_=null}),fe()),k[0].info?b?b.p(k,N):(b=Et(k),b.c(),b.m(t,null)):b&&(b.d(1),b=null),k[0].type=="radio"?g?(g.p(k,N),N&1&&C(g,1)):(g=It(k),g.c(),C(g,1),g.m(e,d)):g&&(re(),R(g,1,1,()=>{g=null}),fe()),k[0].type=="slider"?w?(w.p(k,N),N&1&&C(w,1)):(w=Xt(k),w.c(),C(w,1),w.m(e,null)):w&&(re(),R(w,1,1,()=>{w=null}),fe()),(!p||N&16&&f!==(f=`--spotlight:${k[4]}`))&&v(e,"style",f)},i(k){p||(C(a.$$.fragment,k),C(_),C(g),C(w),p=!0)},o(k){R(a.$$.fragment,k),R(_),R(g),R(w),p=!1},d(k){k&&D(e),I(a),_&&_.d(),b&&b.d(),g&&g.d(),w&&w.d(),n[13](null)}}}function Dl(n,e,t){let l,i=ce,o=()=>(i(),i=bn(c,k=>t(4,l=k)),c);n.$$.on_destroy.push(()=>i());let{setting:s}=e,{key:u}=e,a=s.value;function r(k){Q.setValue(u,k),k=s.value}function h(){Q.setValue(u,s.auto),t(1,a=s.value)}He(Q.subscribe([u],function(k){s.value!=a&&t(1,a=s.value)}));let c=mt(0);o();let d;function f(){d.scrollIntoView({block:"center"}),o(t(2,c=mt(1,{duration:2e3}))),ge(c,l=0,l)}function p(k){a=k,t(1,a)}function _(k){a=k,t(1,a)}const b=()=>r(a);function g(k){a=k,t(1,a)}function w(k){Z[k?"unshift":"push"](()=>{d=k,t(3,d)})}return n.$$set=k=>{"setting"in k&&t(0,s=k.setting),"key"in k&&t(7,u=k.key)},n.$$.update=()=>{n.$$.dirty&2&&r(a)},[s,a,c,d,l,r,h,u,f,p,_,b,g,w]}class Hl extends ie{constructor(e){super();oe(this,e,Dl,Pl,te,{setting:0,key:7,scrollToSelf:8})}get scrollToSelf(){return this.$$.ctx[8]}}function Kt(n,e,t){const l=n.slice();return l[6]=e[t],l[7]=e,l[8]=t,l}function Wt(n,e,t){const l=n.slice();return l[6]=e[t],l[8]=t,l}function Jt(n){let e,t,l=Q.data[n[6]].name+"",i,o,s,u;function a(){return n[3](n[8])}return{c(){e=S("li"),t=S("button"),i=he(l),o=j(),v(t,"class","svelte-1r275ni")},m(r,h){P(r,e,h),y(e,t),y(t,i),y(e,o),s||(u=K(t,"click",a),s=!0)},p(r,h){n=r},d(r){r&&D(e),s=!1,u()}}}function Gt(n){let e,t=n[8],l;const i=()=>n[5](e,t),o=()=>n[5](null,t);let s={key:n[6],setting:Q.data[n[6]]};return e=new Hl({props:s}),i(),{c(){U(e.$$.fragment)},m(u,a){E(e,u,a),l=!0},p(u,a){t!==u[8]&&(o(),t=u[8],i());const r={};e.$set(r)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){R(e.$$.fragment,u),l=!1},d(u){o(),I(e,u)}}}function Bl(n){let e,t,l,i,o,s,u,a,r,h,c,d=Object.keys(Q.data),f=[];for(let g=0;g<d.length;g+=1)f[g]=Jt(Wt(n,d,g));u=new ue({props:{icon:"delete",text:"reset all settings"}}),u.$on("click",n[4]);let p=Object.keys(Q.data),_=[];for(let g=0;g<p.length;g+=1)_[g]=Gt(Kt(n,p,g));const b=g=>R(_[g],1,1,()=>{_[g]=null});return{c(){e=S("div"),t=S("div"),l=S("ul");for(let g=0;g<f.length;g+=1)f[g].c();i=j(),o=S("div"),s=S("section"),U(u.$$.fragment),a=j(),r=S("section"),h=S("ul");for(let g=0;g<_.length;g+=1)_[g].c();v(l,"class","svelte-1r275ni"),v(t,"class","outline svelte-1r275ni"),v(s,"class","controls svelte-1r275ni"),v(h,"class","svelte-1r275ni"),v(r,"class","settings svelte-1r275ni"),v(o,"class","content svelte-1r275ni"),v(e,"class","top palette-plain svelte-1r275ni")},m(g,w){P(g,e,w),y(e,t),y(t,l);for(let k=0;k<f.length;k+=1)f[k].m(l,null);y(e,i),y(e,o),y(o,s),E(u,s,null),y(o,a),y(o,r),y(r,h);for(let k=0;k<_.length;k+=1)_[k].m(h,null);c=!0},p(g,[w]){if(w&2){d=Object.keys(Q.data);let k;for(k=0;k<d.length;k+=1){const N=Wt(g,d,k);f[k]?f[k].p(N,w):(f[k]=Jt(N),f[k].c(),f[k].m(l,null))}for(;k<f.length;k+=1)f[k].d(1);f.length=d.length}if(w&1){p=Object.keys(Q.data);let k;for(k=0;k<p.length;k+=1){const N=Kt(g,p,k);_[k]?(_[k].p(N,w),C(_[k],1)):(_[k]=Gt(N),_[k].c(),C(_[k],1),_[k].m(h,null))}for(re(),k=p.length;k<_.length;k+=1)b(k);fe()}},i(g){if(!c){C(u.$$.fragment,g);for(let w=0;w<p.length;w+=1)C(_[w]);c=!0}},o(g){R(u.$$.fragment,g),_=_.filter(Boolean);for(let w=0;w<_.length;w+=1)R(_[w]);c=!1},d(g){g&&D(e),Oe(f,g),I(u),Oe(_,g)}}}function jl(n,e,t){let{closePopup:l}=e;He(()=>{Q.saveToLocalStorage()});let i=[];function o(r){i[r].scrollToSelf()}const s=r=>o(r),u=()=>Q.resetToAuto();function a(r,h){Z[r?"unshift":"push"](()=>{i[h]=r,t(0,i)})}return n.$$set=r=>{"closePopup"in r&&t(2,l=r.closePopup)},[i,o,l,s,u,a]}class Vl extends ie{constructor(e){super();oe(this,e,jl,Bl,te,{closePopup:2})}}function ql(n){let e;return{c(){e=he("no name")},m(t,l){P(t,e,l)},p:ce,d(t){t&&D(e)}}}function zl(n){let e=n[0].content+"",t;return{c(){t=he(e)},m(l,i){P(l,t,i)},p(l,i){i&1&&e!==(e=l[0].content+"")&&we(t,e)},d(l){l&&D(t)}}}function Ul(n){let e,t,l,i,o,s,u,a;function r(d,f){return d[0].content?zl:ql}let h=r(n),c=h(n);return{c(){e=S("div"),t=S("button"),c.c(),v(t,"class","svelte-1iz0948"),W(t,"selected",n[1]),W(t,"empty",n[0].content.length==0),v(e,"class",l=le(`top palette-${n[2]}`)+" svelte-1iz0948"),W(e,"invert",n[0].invert)},m(d,f){P(d,e,f),y(e,t),c.m(t,null),s=!0,u||(a=K(t,"click",n[3]),u=!0)},p(d,[f]){h===(h=r(d))&&c?c.p(d,f):(c.d(1),c=h(d),c&&(c.c(),c.m(t,null))),f&2&&W(t,"selected",d[1]),f&1&&W(t,"empty",d[0].content.length==0),(!s||f&4&&l!==(l=le(`top palette-${d[2]}`)+" svelte-1iz0948"))&&v(e,"class",l),f&5&&W(e,"invert",d[0].invert)},i(d){s||(Se(()=>{o&&o.end(1),i=Be(e,Pn,{}),i.start()}),s=!0)},o(d){i&&i.invalidate(),o=Ue(e,Dn,{}),s=!1},d(d){d&&D(e),c.d(),d&&o&&o.end(),u=!1,a()}}}function El(n,e,t){let{flow:l}=e,{selected:i}=e,o;function s(u){be.call(this,n,u)}return n.$$set=u=>{"flow"in u&&t(0,l=u.flow),"selected"in u&&t(1,i=u.selected)},n.$$.update=()=>{n.$$.dirty&1&&(l.invert?t(2,o="accent-secondary"):t(2,o="accent"))},[l,i,o,s]}class Il extends ie{constructor(e){super();oe(this,e,El,Ul,te,{flow:0,selected:1})}}const{document:We}=kn;function Yt(n,e,t){const l=n.slice();return l[38]=e[t],l[39]=e,l[40]=t,l}function Qt(n){let e,t,l=n[0],i,o,s,u,a=Zt(n);return{c(){e=S("div"),t=S("div"),a.c(),v(t,"class","popups svelte-1ykl876"),v(e,"class","screen svelte-1ykl876")},m(r,h){P(r,e,h),y(e,t),a.m(t,null),o=!0,s||(u=[K(t,"click",vt(n[14])),K(e,"click",vt(n[15]))],s=!0)},p(r,h){h[0]&1&&te(l,l=r[0])?(re(),R(a,1,1,ce),fe(),a=Zt(r),a.c(),C(a),a.m(t,null)):a.p(r,h)},i(r){o||(C(a),Se(()=>{i||(i=Ge(e,yt,{},!0)),i.run(1)}),o=!0)},o(r){R(a),i||(i=Ge(e,yt,{},!1)),i.run(0),o=!1},d(r){r&&D(e),a.d(r),r&&i&&i.end(),s=!1,Fe(u)}}}function Zt(n){let e,t;return e=new ml({props:{component:n[0][0],closeSelf:n[13]}}),{c(){U(e.$$.fragment)},m(l,i){E(e,l,i),t=!0},p(l,i){const o={};i[0]&1&&(o.component=l[0][0]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){I(e,l)}}}function Xl(n){let e,t,l,i,o,s;return e=new ue({props:{icon:"settings",tooltip:"settings"}}),e.$on("click",n[16]),l=new ue({props:{icon:"download",disabled:n[1].length==0,disabledReason:"nothing to download",tooltip:"download as file"}}),l.$on("click",n[17]),o=new ue({props:{icon:"upload",tooltip:"import file"}}),o.$on("click",n[18]),{c(){U(e.$$.fragment),t=j(),U(l.$$.fragment),i=j(),U(o.$$.fragment)},m(u,a){E(e,u,a),P(u,t,a),E(l,u,a),P(u,i,a),E(o,u,a),s=!0},p(u,a){const r={};a[0]&2&&(r.disabled=u[1].length==0),l.$set(r)},i(u){s||(C(e.$$.fragment,u),C(l.$$.fragment,u),C(o.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),R(l.$$.fragment,u),R(o.$$.fragment,u),s=!1},d(u){I(e,u),u&&D(t),I(l,u),u&&D(i),I(o,u)}}}function $t(n){let e,t,l;function i(u){n[19](u,n[40])}function o(){return n[20](n[40])}let s={selected:n[40]==n[2]};return n[1][n[40]]!==void 0&&(s.flow=n[1][n[40]]),e=new Il({props:s}),Z.push(()=>x(e,"flow",i)),e.$on("click",o),{c(){U(e.$$.fragment)},m(u,a){E(e,u,a),l=!0},p(u,a){n=u;const r={};a[0]&4&&(r.selected=n[40]==n[2]),!t&&a[0]&2&&(t=!0,r.flow=n[1][n[40]],ee(()=>t=!1)),e.$set(r)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){R(e.$$.fragment,u),l=!1},d(u){I(e,u)}}}function xt(n){let e=n[2],t,l,i=en(n);return{c(){i.c(),t=Qe()},m(o,s){i.m(o,s),P(o,t,s),l=!0},p(o,s){s[0]&4&&te(e,e=o[2])?(re(),R(i,1,1,ce),fe(),i=en(o),i.c(),C(i),i.m(t.parentNode,t)):i.p(o,s)},i(o){l||(C(i),l=!0)},o(o){R(i),l=!1},d(o){o&&D(t),i.d(o)}}}function en(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b;function g(m){n[24](m)}function w(m){n[25](m)}function k(m){n[26](m)}function N(m){n[27](m)}function H(m){n[28](m)}let B={deleteSelf:n[23]};n[1][n[2]].content!==void 0&&(B.content=n[1][n[2]].content),n[1][n[2]].children!==void 0&&(B.children=n[1][n[2]].children),n[1][n[2]].index!==void 0&&(B.index=n[1][n[2]].index),n[1][n[2]].focus!==void 0&&(B.focus=n[1][n[2]].focus),n[1][n[2]].invert!==void 0&&(B.invert=n[1][n[2]].invert),t=new rl({props:B}),Z.push(()=>x(t,"content",g)),Z.push(()=>x(t,"children",w)),Z.push(()=>x(t,"index",k)),Z.push(()=>x(t,"focus",N)),Z.push(()=>x(t,"invert",H));function T(m){n[29](m)}let V={};n[1][n[2]]!==void 0&&(V.flow=n[1][n[2]]),h=new _l({props:V}),Z.push(()=>x(h,"flow",T));function $(m){n[30](m)}let q={};return n[1][n[2]]!==void 0&&(q.root=n[1][n[2]]),p=new Xn({props:q}),Z.push(()=>x(p,"root",$)),p.$on("focusFlow",n[4]),{c(){e=S("div"),U(t.$$.fragment),a=j(),r=S("div"),U(h.$$.fragment),d=j(),f=S("div"),U(p.$$.fragment),v(e,"class","title svelte-1ykl876"),v(r,"class","box-control svelte-1ykl876"),v(f,"class","flow svelte-1ykl876")},m(m,L){P(m,e,L),E(t,e,null),P(m,a,L),P(m,r,L),E(h,r,null),P(m,d,L),P(m,f,L),E(p,f,null),b=!0},p(m,L){const X={};L[0]&4&&(X.deleteSelf=m[23]),!l&&L[0]&6&&(l=!0,X.content=m[1][m[2]].content,ee(()=>l=!1)),!i&&L[0]&6&&(i=!0,X.children=m[1][m[2]].children,ee(()=>i=!1)),!o&&L[0]&6&&(o=!0,X.index=m[1][m[2]].index,ee(()=>o=!1)),!s&&L[0]&6&&(s=!0,X.focus=m[1][m[2]].focus,ee(()=>s=!1)),!u&&L[0]&6&&(u=!0,X.invert=m[1][m[2]].invert,ee(()=>u=!1)),t.$set(X);const O={};!c&&L[0]&6&&(c=!0,O.flow=m[1][m[2]],ee(()=>c=!1)),h.$set(O);const A={};!_&&L[0]&6&&(_=!0,A.root=m[1][m[2]],ee(()=>_=!1)),p.$set(A)},i(m){b||(C(t.$$.fragment,m),C(h.$$.fragment,m),C(p.$$.fragment,m),b=!0)},o(m){R(t.$$.fragment,m),R(h.$$.fragment,m),R(p.$$.fragment,m),b=!1},d(m){m&&D(e),I(t),m&&D(a),m&&D(r),I(h),m&&D(d),m&&D(f),I(p)}}}function Kl(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b,g,w,k,N,H,B=n[0].length>0&&Qt(n);r=new _t({props:{$$slots:{default:[Xl]},$$scope:{ctx:n}}});let T=n[1],V=[];for(let m=0;m<T.length;m+=1)V[m]=$t(Yt(n,T,m));const $=m=>R(V[m],1,1,()=>{V[m]=null});_=new ue({props:{text:"aff",palette:"accent",icon:"add",tooltip:"create new aff flow"}}),_.$on("click",n[21]),g=new ue({props:{text:"neg",palette:"accent-secondary",icon:"add",tooltip:"create new neg flow"}}),g.$on("click",n[22]);let q=n[1].length>0&&n[1][n[2]]&&xt(n);return{c(){e=j(),t=S("main"),B&&B.c(),l=j(),i=S("input"),o=j(),s=S("div"),u=S("div"),a=S("div"),U(r.$$.fragment),h=j(),c=S("div"),d=S("ul");for(let m=0;m<V.length;m+=1)V[m].c();f=j(),p=S("div"),U(_.$$.fragment),b=j(),U(g.$$.fragment),w=j(),q&&q.c(),v(i,"id","uploadId"),v(i,"type","file"),i.hidden=!0,v(a,"class","header svelte-1ykl876"),v(p,"class","add-tab svelte-1ykl876"),v(d,"class","svelte-1ykl876"),v(c,"class","tabs svelte-1ykl876"),v(u,"class","sidebar svelte-1ykl876"),v(s,"class","grid svelte-1ykl876"),v(t,"class","palette-plain"),W(t,"activeMouse",Ee)},m(m,L){P(m,e,L),P(m,t,L),B&&B.m(t,null),y(t,l),y(t,i),y(t,o),y(t,s),y(s,u),y(u,a),E(r,a,null),y(u,h),y(u,c),y(c,d);for(let X=0;X<V.length;X+=1)V[X].m(d,null);y(d,f),y(d,p),E(_,p,null),y(p,b),E(g,p,null),y(s,w),q&&q.m(s,null),k=!0,N||(H=[K(We.body,"keydown",n[8]),K(We.body,"mousemove",n[7]),K(We.body,"dragenter",Wl),K(We.body,"drop",n[9]),K(i,"change",n[10])],N=!0)},p(m,L){m[0].length>0?B?(B.p(m,L),L[0]&1&&C(B,1)):(B=Qt(m),B.c(),C(B,1),B.m(t,l)):B&&(re(),R(B,1,1,()=>{B=null}),fe());const X={};if(L[0]&2|L[1]&1024&&(X.$$scope={dirty:L,ctx:m}),r.$set(X),L[0]&14){T=m[1];let O;for(O=0;O<T.length;O+=1){const A=Yt(m,T,O);V[O]?(V[O].p(A,L),C(V[O],1)):(V[O]=$t(A),V[O].c(),C(V[O],1),V[O].m(d,f))}for(re(),O=T.length;O<V.length;O+=1)$(O);fe()}m[1].length>0&&m[1][m[2]]?q?(q.p(m,L),L[0]&6&&C(q,1)):(q=xt(m),q.c(),C(q,1),q.m(s,null)):q&&(re(),R(q,1,1,()=>{q=null}),fe())},i(m){if(!k){C(B),C(r.$$.fragment,m);for(let L=0;L<T.length;L+=1)C(V[L]);C(_.$$.fragment,m),C(g.$$.fragment,m),C(q),k=!0}},o(m){R(B),R(r.$$.fragment,m),V=V.filter(Boolean);for(let L=0;L<V.length;L+=1)R(V[L]);R(_.$$.fragment,m),R(g.$$.fragment,m),R(q),k=!1},d(m){m&&D(e),m&&D(t),B&&B.d(),I(r),Oe(V,m),I(_),I(g),q&&q.d(),N=!1,Fe(H)}}}function Wl(n){n.preventDefault()}function Jl(n,e,t){let l,i,o;ke(n,ne,F=>t(1,l=F)),ke(n,Re,F=>t(2,i=F)),ke(n,Ee,F=>t(31,o=F));var s=this&&this.__awaiter||function(F,J,G,ae){function Ve(Le){return Le instanceof G?Le:new G(function(Pe){Pe(Le)})}return new(G||(G=Promise))(function(Le,Pe){function tt(ve){try{qe(ae.next(ve))}catch(ze){Pe(ze)}}function nt(ve){try{qe(ae.throw(ve))}catch(ze){Pe(ze)}}function qe(ve){ve.done?Le(ve.value):Ve(ve.value).then(tt,nt)}qe((ae=ae.apply(F,J||[])).next())})};let u=window.matchMedia("(prefers-color-scheme: dark)");function a(){Q.data.colorTheme.value==0&&document.body.classList.toggle("dark",u.matches)}u.addEventListener("change",a),He(Q.subscribe(["colorTheme"],function(F){Q.data.colorTheme.value==1?document.body.classList.remove("dark"):Q.data.colorTheme.value==2?document.body.classList.add("dark"):a()}));let r={accentHue:{name:"accent-hue",unit:""},accentSecondaryHue:{name:"accent-secondary-hue",unit:""},transitionSpeed:{name:"transition-speed",unit:"ms"},columnWidth:{name:"column-width",unit:"px"},borderRadius:{name:"border-radius",unit:"px"},padding:{name:"padding",unit:"px"},fontSize:{name:"font-size",unit:"rem"},fontWeight:{name:"font-weight",unit:""},gap:{name:"gap",unit:"px"}};He(Q.subscribe(Object.keys(r),function(F){let J=r[F].name,G=Q.data[F].value,ae=r[F].unit;document.body.style.setProperty(`--${J}`,`${G}${ae}`)})),He(Q.subscribe(["fontFamily"],function(F){let J=Q.data.fontFamily;if(J.type!="radio")return;let G=J.value,ae;J.detail.customOption&&J.detail.options.length==G?ae=J.detail.customOptionValue:J.detail.options[G]&&(ae=J.detail.options[G]),ae?document.body.style.setProperty("--font-family",`'${ae}', 'Merriweather Sans', sans-serif`):document.body.style.setProperty("--font-family","'Merriweather Sans', sans-serif")}));function h(F){ge(Re,i=F,i),c()}function c(){var F,J;let G=((F=l[i])===null||F===void 0?void 0:F.lastFocus)&&pe((J=l[i])===null||J===void 0?void 0:J.lastFocus);G?G.focus=!0:ge(ne,l[i].focus=!0,l),ne.set(l)}function d(){var F,J;if(l.length>0){let G=((F=l[i])===null||F===void 0?void 0:F.lastFocus)&&pe((J=l[i])===null||J===void 0?void 0:J.lastFocus);G||(G=l[i]),G.focus=!1,G=G,document.activeElement.blur()}}function f(F){d(),l.push(Tn(l.length,F)),ge(Re,i=l.length-1,i),ne.set(l)}function p(F){return s(this,void 0,void 0,function*(){d(),l.splice(F,1),F==0?ge(Re,i=0,i):ge(Re,i=F-1,i),ne.set(l),l.length>0&&c()})}function _(F){ge(Ee,o=!0,o)}function b(F){ge(Ee,o=!1,o),F.ctrlKey&&F.shiftKey&&F.key=="N"?(F.preventDefault(),f("aff")):F.ctrlKey&&F.key=="n"&&(F.preventDefault(),f("neg")),F.metaKey&&F.shiftKey&&F.key=="z"?(F.preventDefault(),l[i].history.redo()):F.metaKey&&F.key=="z"&&(F.preventDefault(),l[i].history.undo())}function g(F){F.preventDefault();let J=F.dataTransfer.files[0],G=new FileReader;G.onload=function(ae){k(ae.target.result.toString())},G.readAsText(J,"UTF-8")}function w(){let F=document.getElementById("uploadId").files[0],J=new FileReader;J.onload=function(G){k(G.target.result.toString())},J.readAsText(F,"UTF-8")}function k(F){let J=JSON.parse(F);ge(ne,l=[],l);for(let G of J)G.history=new sn,l.push(G)}window.addEventListener("dragover",function(F){F.preventDefault()},!1),window.addEventListener("drop",function(F){F.preventDefault()},!1);let N=[];function H(F){N.splice(F,1),t(0,N)}function B(F){N.push(F),t(0,N)}const T=()=>H(0),V=()=>{H(0)},$=()=>{H(0)},q=()=>B(Vl),m=()=>B(kl),L=()=>B(Sl);function X(F,J){n.$$.not_equal(l[J],F)&&(l[J]=F,ne.set(l))}const O=F=>h(F),A=()=>f("aff"),z=()=>f("neg"),de=()=>p(i);function Ze(F){n.$$.not_equal(l[i].content,F)&&(l[i].content=F,ne.set(l))}function $e(F){n.$$.not_equal(l[i].children,F)&&(l[i].children=F,ne.set(l))}function me(F){n.$$.not_equal(l[i].index,F)&&(l[i].index=F,ne.set(l))}function Ne(F){n.$$.not_equal(l[i].focus,F)&&(l[i].focus=F,ne.set(l))}function xe(F){n.$$.not_equal(l[i].invert,F)&&(l[i].invert=F,ne.set(l))}function et(F){n.$$.not_equal(l[i],F)&&(l[i]=F,ne.set(l))}function je(F){n.$$.not_equal(l[i],F)&&(l[i]=F,ne.set(l))}return[N,l,i,h,c,f,p,_,b,g,w,H,B,T,V,$,q,m,L,X,O,A,z,de,Ze,$e,me,Ne,xe,et,je]}class Gl extends ie{constructor(e){super();oe(this,e,Jl,Kl,te,{},null,[-1,-1])}}new Gl({target:document.body});
