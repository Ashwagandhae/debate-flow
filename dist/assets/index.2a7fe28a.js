import{S as ie,i as oe,s as te,e as F,a as v,b as P,c as He,l as X,n as de,d as D,r as Fe,f as ln,o as Oe,g as we,h as Q,j as pn,w as Ze,q as Ce,k as gn,m as x,p as z,t as le,u as U,v as C,x as Se,y as qe,z as R,A as E,B as Xe,C as ee,D as q,E as K,F as y,G as fe,H as ce,I as mn,J as Ue,K as me,L as ft,M as mt,N as on,O as vn,P as Ge,Q as _e,R as ve,T as Ne,U as vt,V as ct,W as dt,X as ht,Y as _t,Z as Ke,_ as Ye,$ as sn,a0 as he,a1 as bn,a2 as at,a3 as bt,a4 as kn,a5 as kt,a6 as wn}from"./vendor.dae6e1c7.js";const yn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};yn();class Sn{constructor(e){this.callbacks={any:[]},this.data=e,this.loadFromLocalStorage()}setValue(e,t){if(this.data[e].value=t,this.callbacks[e])for(let l of this.callbacks[e])l(e);for(let l of this.callbacks.any)l(e)}subscribe(e,t){for(let l of e)this.callbacks[l]||(this.callbacks[l]=[]),this.callbacks[l].push(t),t(l);return()=>{for(let l of e)this.callbacks[l]=this.callbacks[l].filter(i=>i!=t)}}saveToLocalStorage(){let e={};for(var t in this.data)this.data[t].value!=this.data[t].auto&&(e[t]=this.data[t].value);localStorage.setItem("settings",JSON.stringify(e))}loadFromLocalStorage(){if(localStorage.getItem("settings")){let t=JSON.parse(localStorage.getItem("settings"));try{for(var e in t)this.setValue(e,t[e])}catch{localStorage.setItem("settings",JSON.stringify({})),this.resetToAuto()}}}resetToAuto(){for(var e in this.data)this.setValue(e,this.data[e].auto)}}let J=new Sn({debateStyle:{name:"Debate Style",type:"radio",value:0,auto:0,detail:{options:["Policy","Public forum","Lincoln douglass"]},info:"Already created flows won't be affected by this setting"},colorTheme:{name:"Color theme",type:"radio",value:0,auto:0,detail:{options:["System default","Light theme","Dark theme"]}},columnWidth:{name:"Column width",type:"slider",value:150,auto:150,detail:{min:50,max:300,step:1}},accentHue:{name:"Primary color hue",type:"slider",value:192,auto:192,detail:{min:0,max:360,step:1,hue:!0},info:"This color will be used for aff"},accentSecondaryHue:{name:"Secondary color hue",type:"slider",value:26,auto:26,detail:{min:0,max:360,step:1,hue:!0},info:"This color will be used for neg"},transitionSpeed:{name:"Transition duration",type:"slider",value:300,auto:300,detail:{min:0,max:1e3,step:1}},useTooltips:{name:"Use tooltips",type:"toggle",value:!0,auto:!0},fontSize:{name:"Font size",type:"slider",value:.9,auto:.9,detail:{min:.2,max:2,step:.01}},fontWeight:{name:"Font weight",type:"slider",value:300,auto:300,detail:{min:100,max:900,step:50}},fontFamily:{name:"Font",type:"radio",value:0,auto:0,detail:{options:["Merriweather Sans","Helvetica","Georgia","Courier New"],customOption:!0,customOptionValue:""},info:"Type in a custom font name if it is installed on your computer"},borderRadius:{name:"Border radius",type:"slider",value:12,auto:12,detail:{min:0,max:30,step:1}},padding:{name:"Padding",value:8,auto:8,type:"slider",detail:{min:0,max:30,step:1}},gap:{name:"Grid Gap",value:12,auto:12,type:"slider",detail:{min:0,max:30,step:1}}});function Fn(n){let e,t,l,i;return{c(){e=F("textarea"),v(e,"spellcheck","false"),v(e,"placeholder",n[1]),v(e,"style",t=`--white-space:${n[3]};`),v(e,"class","svelte-1ggsm2f")},m(o,s){P(o,e,s),He(e,n[0]),n[13](e),l||(i=[X(e,"input",n[12]),X(e,"load",n[2]),X(e,"input",n[2]),X(e,"input",n[7]),X(e,"beforeinput",n[8]),X(e,"keydown",n[9]),X(e,"focus",n[10]),X(e,"blur",n[11])],l=!0)},p(o,[s]){s&2&&v(e,"placeholder",o[1]),s&8&&t!==(t=`--white-space:${o[3]};`)&&v(e,"style",t),s&1&&He(e,o[0])},i:de,o:de,d(o){o&&D(e),n[13](null),l=!1,Fe(i)}}}function Cn(n,e,t){let{value:l}=e,{placeholder:i=""}=e,{nowrap:o=!1}=e,s,u;function a(){u&&(t(4,u.value=u.value.replace(/\r?\n|\r/g,""),u),t(4,u.style.height="0px",u),t(4,u.style.height=u.scrollHeight+"px",u))}ln(function(){a()}),Oe(J.subscribe(["fontSize"],a));const r=()=>{u.focus()};function h(g){we.call(this,n,g)}function c(g){we.call(this,n,g)}function d(g){we.call(this,n,g)}function f(g){we.call(this,n,g)}function p(g){we.call(this,n,g)}function _(){l=this.value,t(0,l)}function b(g){Q[g?"unshift":"push"](()=>{u=g,t(4,u)})}return n.$$set=g=>{"value"in g&&t(0,l=g.value),"placeholder"in g&&t(1,i=g.placeholder),"nowrap"in g&&t(5,o=g.nowrap)},n.$$.update=()=>{n.$$.dirty&32&&(o?t(3,s="nowrap"):t(3,s="auto"))},[l,i,a,s,u,o,r,h,c,d,f,p,_,b]}class pt extends ie{constructor(e){super();oe(this,e,Cn,Fn,te,{value:0,placeholder:1,nowrap:5,autoHeight:2,focus:6})}get autoHeight(){return this.$$.ctx[2]}get focus(){return this.$$.ctx[6]}}function Ln(n){let e,t=n[1].svg+"",l;return{c(){e=pn("svg"),v(e,"style",l=`width:${n[0]};height:${n[0]};`),v(e,"viewBox","0 0 "+100+" "+100),v(e,"fill","none"),v(e,"stroke","var(--text)"),v(e,"class","svelte-1pducja")},m(i,o){P(i,e,o),e.innerHTML=t},p(i,[o]){o&2&&t!==(t=i[1].svg+"")&&(e.innerHTML=t),o&1&&l!==(l=`width:${i[0]};height:${i[0]};`)&&v(e,"style",l)},i:de,o:de,d(i){i&&D(e)}}}function Mn(n,e,t){let{name:l}=e,{size:i="1rem"}=e,o=[{name:"arrowRight",svg:'<path d="M27 7L74 50L27 93" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowLeft",svg:'<path d="M74 93L27 50L74 7" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowUp",svg:'<path d="M7.5 73.5L50.5 26.5L93.5 73.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowDown",svg:'<path d="M93.5 26.5L50.5 73.5L7.5 26.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"delete",svg:`<path d="M78.5685 22L22 78.5685" stroke-width="10" stroke-linecap="round"/>
<path d="M22 22L78.5685 78.5685" stroke-width="10" stroke-linecap="round"/>`},{name:"add",svg:`<path d="M50 15L50 85" stroke-width="10" stroke-linecap="round"/>
<path d="M15 50H85" stroke-width="10" stroke-linecap="round"/>`},{name:"download",svg:`<path d="M71 45L50 68L29 45" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 66L50 14" stroke-width="10" stroke-linecap="round"/>`},{name:"upload",svg:`<path d="M29 37L50 14L71 37" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 16L50 68" stroke-width="10" stroke-linecap="round"/>`},{name:"addUp",svg:`<path d="M85 25V25C87.7614 25 90 27.2386 90 30V70C90 75.5228 85.5228 80 80 80H20C14.4772 80 10 75.5228 10 70L10 30C10 27.2386 12.2386 25 15 25V25" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 25H65" stroke-width="10" stroke-linecap="round"/>
<path d="M50 40V10" stroke-width="10" stroke-linecap="round"/>`},{name:"addDown",svg:`<path d="M15 75V75C12.2386 75 10 72.7614 10 70L10 30C10 24.4772 14.4772 20 20 20L80 20C85.5228 20 90 24.4772 90 30L90 70C90 72.7614 87.7614 75 85 75V75" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M65 75H35" stroke-width="10" stroke-linecap="round"/>
<path d="M50 60L50 90" stroke-width="10" stroke-linecap="round"/>`},{name:"addRight",svg:`<path d="M75 85V85C75 87.7614 72.7614 90 70 90H30C24.4772 90 20 85.5228 20 80V20C20 14.4772 24.4772 10 30 10H70C72.7614 10 75 12.2386 75 15V15" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M75 35V65" stroke-width="10" stroke-linecap="round"/>
<path d="M60 50H90" stroke-width="10" stroke-linecap="round"/>`},{name:"undo",svg:`<path d="M10 47H70C81.0457 47 90 55.9543 90 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M36 70L10 47L36 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"redo",svg:`<path d="M90 47H30C18.9543 47 10 55.9543 10 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M64 70L90 47L64 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"settings",svg:`<line x1="10" y1="50" x2="90" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="80" x2="90" y2="80" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>
<circle cx="26.25" cy="50.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="80.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="20.25" r="6.25" stroke-width="10"/>`},{name:"check",svg:'<path d="M88.7817 29.2843L39.2842 78.7817L11 50.4975" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'}],s;function u(){t(1,s=o.find(a=>a.name===l))}return u(),n.$$set=a=>{"name"in a&&t(2,l=a.name),"size"in a&&t(0,i=a.size)},n.$$.update=()=>{n.$$.dirty&4&&u()},[i,s,l]}class un extends ie{constructor(e){super();oe(this,e,Mn,Ln,te,{name:2,size:0})}}const Ee=Ze(!0),ne=Ze([]);let Re=Ze(0),Be=Ze(!1),An={policy:{aff:{columns:["1AC","1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!1},neg:{columns:["1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!0}},publicForum:{aff:{columns:["1AC","1NC","2AC","2NC","AS","NS","AFF","NFF"],invert:!1},neg:{columns:["1NC","2AC","2NC","AS","NS","AFF","NFF"],invert:!0}},lincolnDouglas:{aff:{columns:["AC","NC","1AR","1NR","2AR"],invert:!1},neg:{columns:["NC","1AR","1NR","2AR"],invert:!0}}},Tn=["policy","publicForum","lincolnDouglas"],Qe;ne.subscribe(n=>{Qe=n});function Ie(n,e,t){return{content:"",children:[],index:n,level:e,focus:t}}function Rn(n,e){let t=An[Tn[J.data.debateStyle.value]];return{content:"",level:0,columns:t[e].columns,invert:t[e].invert,focus:!0,index:n,lastFocus:[n],children:[Ie(0,1,!1)],history:new an}}function ge(n,e=0){let t=Qe[n[0]];for(let l=1;l<n.length-e;l++)if(t=t==null?void 0:t.children[n[l]],!t)return null;return t}class an{constructor(){this.index=-1,this.data=[],this.lastFocus=void 0}lastAction(){return this.data[this.index]}add(e,t,l){Be.set(!1),this.resolveAllPending();let i={type:e,path:t,lastFocus:[...this.lastFocus],nextFocus:void 0,other:l,pending:!1};this.data=this.data.slice(0,this.index+1),this.data.push(i),this.index=this.data.length-1}addPending(e,t,l){Be.set(!1),this.data=this.data.slice(0,this.index+1),this.data.push({type:e,path:t,lastFocus:void 0,nextFocus:void 0,other:l,pending:!0}),this.index=this.data.length-1}resolveAllPending(){let e=!1;for(let t=0;t<this.data.length;t++){let l=this.data[t];if(l.pending){let i={type:l.type,path:l.path,lastFocus:l.path,nextFocus:l.path,other:l.other,pending:!1},o=!0;i.type=="edit"&&(i.other.lastContent=l.other.lastContent,i.other.nextContent=l.other.getNextContent(),i.other.lastContent==i.other.nextContent&&(o=!1),l.other.createEditBreak()),o?(e=!0,this.data[t]=i):(this.data[t]=null,this.index>=t&&(this.index-=1))}}this.data=this.data.filter(t=>t!=null),e&&console.log("resolving all pending")}addFocus(e){this.lastFocus=e,this.lastAction()&&this.lastAction().nextFocus==null&&(this.lastAction().nextFocus=e)}undoAction(e){console.log("undo",this.index,this.data);let t=ge(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,1):e.type=="delete"?i.splice(l,0,e.other.box):e.type=="edit"&&(i[l].content=e.other.lastContent);for(let o=l;o<i.length;o++)i[o].index=o;t.children=[...i]}redoAction(e){console.log("redo",this.index,this.data);let t=ge(e.path,1),l=e.path[e.path.length-1],i=[...t.children];e.type=="add"?i.splice(l,0,Ie(l,t.level+1,!1)):e.type=="delete"?i.splice(l,1):e.type=="edit"&&(i[l].content=e.other.nextContent);for(let o=l;o<i.length;o++)i[o].index=o;t.children=[...i]}focus(e){let t=ge(e);t.focus=!0}undo(){if(this.resolveAllPending(),this.index>-1){let e=this.lastAction();this.undoAction(e),this.focus(e.lastFocus),ne.set(Qe),this.index-=1}}redo(){if(this.resolveAllPending(),this.index<this.data.length-1){this.index+=1;let e=this.lastAction();this.redoAction(e),this.focus(e.nextFocus),ne.set(Qe)}}}function On(n,e){const t=n.clientHeight;return{duration:J.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: calc(${i*t}px - var(--padding) * 2);
        overflow: visible;
        clip-path: inset(${(1-i)*t-2}px 0 -${t}px 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function Nn(n,e){const t=n.clientHeight;return{duration:J.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${i*t}px;
        overflow: visible;
        clip-path: inset(${(1-i)*t}px 0 0 0);
        transform: translateY(${(1-i)*-t}px);
        `}}}function Pn(n,e){return{duration:J.data.transitionSpeed.value,css:t=>`
        opacity:${t};
      `}}function wt(n,e){return{duration:J.data.transitionSpeed.value,css:t=>{const l=Ce(t);return`
        clip-path:inset(0% ${(1-l)*100}% 0% 0%);
        transform: translateX(${(1-l)*50}%);
      `}}}function yt(n,e){return{duration:J.data.transitionSpeed.value,css:t=>{const l=gn(t);return`
      clip-path:inset(0% ${(1-l)*100}% 0% 0%);
      transform: translateX(${(1-l)*50}%)`}}}function Dn(n,e){const t=n.clientHeight;return{duration:J.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${t*i}px;
        margin-bottom: calc(${i} * var(--padding));
        overflow: hidden;
        transform: translateX(${-100*(1-i)}%);
      `}}}function Hn(n,e){const t=n.clientHeight;return{duration:J.data.transitionSpeed.value,css:l=>{const i=Ce(l);return`
        height: ${t*i}px;
        margin-bottom: calc(${i} * var(--padding));
        overflow: hidden;
        transform: translateX(${-100*(1-i)}%);
      `}}}function St(n,e){return{duration:J.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function qn(n,e){return{duration:J.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function Bn(n,e){return{duration:J.data.transitionSpeed.value,css:t=>`
        transform: scale(${Ce(t)});
        opacity: ${t};
      `}}function Ft(n,e){return{duration:J.data.transitionSpeed.value,css:t=>`
        opacity: ${t};
      `}}function Ct(n,e,t){const l=n.slice();return l[54]=e[t],l[55]=e,l[56]=t,l}function Lt(n){let e,t,l,i,o,s,u;return t=new un({props:{name:"add"}}),{c(){e=F("button"),z(t.$$.fragment),v(e,"class",l=le(`add palette-${n[13]}`)+" svelte-m947dr")},m(a,r){P(a,e,r),U(t,e,null),o=!0,s||(u=[X(e,"click",n[34]),X(e,"mousedown",rt)],s=!0)},p(a,r){(!o||r[0]&8192&&l!==(l=le(`add palette-${a[13]}`)+" svelte-m947dr"))&&v(e,"class",l)},i(a){o||(C(t.$$.fragment,a),a&&(i||Se(()=>{i=qe(e,Pn,{}),i.start()})),o=!0)},o(a){R(t.$$.fragment,a),o=!1},d(a){a&&D(e),E(t),s=!1,Fe(u)}}}function Mt(n,e){let t,l,i,o,s,u,a,r;function h(b){e[35](b,e[54])}function c(b){e[36](b,e[54])}function d(b){e[37](b,e[54])}function f(b){e[38](b,e[54])}function p(b){e[39](b,e[54])}let _={addSibling:e[22],deleteSelf:e[23],focusSibling:e[24],focusParent:e[25],dispatchSelfFocus:e[17],parentPath:e[8]};return e[54].content!==void 0&&(_.content=e[54].content),e[54].children!==void 0&&(_.children=e[54].children),e[54].index!==void 0&&(_.index=e[54].index),e[54].level!==void 0&&(_.level=e[54].level),e[54].focus!==void 0&&(_.focus=e[54].focus),l=new rn({props:_}),Q.push(()=>x(l,"content",h)),Q.push(()=>x(l,"children",c)),Q.push(()=>x(l,"index",d)),Q.push(()=>x(l,"level",f)),Q.push(()=>x(l,"focus",p)),l.$on("saveFocus",e[40]),{key:n,first:null,c(){t=Xe(),z(l.$$.fragment),this.first=t},m(b,g){P(b,t,g),U(l,b,g),r=!0},p(b,g){e=b;const w={};g[0]&256&&(w.parentPath=e[8]),!i&&g[0]&4&&(i=!0,w.content=e[54].content,ee(()=>i=!1)),!o&&g[0]&4&&(o=!0,w.children=e[54].children,ee(()=>o=!1)),!s&&g[0]&4&&(s=!0,w.index=e[54].index,ee(()=>s=!1)),!u&&g[0]&4&&(u=!0,w.level=e[54].level,ee(()=>u=!1)),!a&&g[0]&4&&(a=!0,w.focus=e[54].focus,ee(()=>a=!1)),l.$set(w)},i(b){r||(C(l.$$.fragment,b),r=!0)},o(b){R(l.$$.fragment,b),r=!1},d(b){b&&D(t),E(l,b)}}}function jn(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b,g,w=[],k=new Map,H,Z,M,T,B,$;function V(O){n[31](O)}let m={placeholder:n[11]};n[1]!==void 0&&(m.value=n[1]),r=new pt({props:m}),Q.push(()=>x(r,"value",V)),n[32](r),r.$on("keydown",n[20]),r.$on("beforeinput",n[21]),r.$on("blur",n[19]),r.$on("focus",n[18]);let L=n[2].length==0&&n[5]<n[15]&&Lt(n),I=n[2];const N=O=>O[54];for(let O=0;O<I.length;O+=1){let j=Ct(n,I,O),se=N(j);k.set(se,w[O]=Mt(se,j))}return{c(){e=F("div"),t=F("div"),l=F("div"),i=F("div"),u=q(),a=F("div"),z(r.$$.fragment),c=q(),d=F("div"),_=q(),L&&L.c(),b=q(),g=F("ul");for(let O=0;O<w.length;O+=1)w[O].c();v(i,"class","line above svelte-m947dr"),K(i,"left",n[2].length>0),K(i,"right",n[4]==0&&n[5]>1),v(a,"class","text svelte-m947dr"),v(d,"class","line below svelte-m947dr"),v(l,"class","barcontainer svelte-m947dr"),v(t,"class","content svelte-m947dr"),v(t,"style",`--this-background: ${n[16]}`),K(t,"root",n[3]),K(t,"left",n[2].length>0),K(t,"right",n[4]==0&&n[5]>1),v(g,"class","children svelte-m947dr"),v(e,"class",H=le(`top palette-${n[12]}`)+" svelte-m947dr"),K(e,"empty",n[2].length==0),K(e,"focus",n[0]),K(e,"childFocus",n[10]),K(e,"activeMouse",n[14]),K(e,"highlight",n[10]||n[0])},m(O,j){P(O,e,j),y(e,t),y(t,l),y(l,i),y(l,u),y(l,a),U(r,a,null),y(l,c),y(l,d),y(t,_),L&&L.m(t,null),y(e,b),y(e,g);for(let se=0;se<w.length;se+=1)w[se].m(g,null);T=!0,B||($=[X(i,"click",n[30]),X(i,"mousedown",rt),X(d,"click",n[33]),X(d,"mousedown",rt)],B=!0)},p(O,j){j[0]&4&&K(i,"left",O[2].length>0),j[0]&48&&K(i,"right",O[4]==0&&O[5]>1);const se={};j[0]&2048&&(se.placeholder=O[11]),!h&&j[0]&2&&(h=!0,se.value=O[1],ee(()=>h=!1)),r.$set(se),O[2].length==0&&O[5]<O[15]?L?(L.p(O,j),j[0]&36&&C(L,1)):(L=Lt(O),L.c(),C(L,1),L.m(t,null)):L&&(fe(),R(L,1,1,()=>{L=null}),ce()),j[0]&8&&K(t,"root",O[3]),j[0]&4&&K(t,"left",O[2].length>0),j[0]&48&&K(t,"right",O[4]==0&&O[5]>1),j[0]&63045892&&(I=O[2],fe(),w=mn(w,j,N,1,O,I,k,g,vn,Mt,null,Ct),ce()),(!T||j[0]&4096&&H!==(H=le(`top palette-${O[12]}`)+" svelte-m947dr"))&&v(e,"class",H),j[0]&4100&&K(e,"empty",O[2].length==0),j[0]&4097&&K(e,"focus",O[0]),j[0]&5120&&K(e,"childFocus",O[10]),j[0]&20480&&K(e,"activeMouse",O[14]),j[0]&5121&&K(e,"highlight",O[10]||O[0])},i(O){if(!T){O&&Se(()=>{s&&s.end(1),o=qe(i,wt,{}),o.start()}),C(r.$$.fragment,O),O&&Se(()=>{p&&p.end(1),f=qe(d,wt,{}),f.start()}),C(L);for(let j=0;j<I.length;j+=1)C(w[j]);O&&Se(()=>{M&&M.end(1),Z=qe(e,On,{}),Z.start()}),T=!0}},o(O){o&&o.invalidate(),O&&(s=Ue(i,yt,{})),R(r.$$.fragment,O),f&&f.invalidate(),O&&(p=Ue(d,yt,{})),R(L);for(let j=0;j<w.length;j+=1)R(w[j]);Z&&Z.invalidate(),O&&(M=Ue(e,Nn,{})),T=!1},d(O){O&&D(e),O&&s&&s.end(),n[32](null),E(r),O&&p&&p.end(),L&&L.d();for(let j=0;j<w.length;j+=1)w[j].d();O&&M&&M.end(),B=!1,Fe($)}}}function rt(n){n.preventDefault()}function Vn(n,e,t){let l,i,o,s;me(n,Re,A=>t(43,i=A)),me(n,ne,A=>t(44,o=A)),me(n,Ee,A=>t(14,s=A));var u=this&&this.__awaiter||function(A,G,ue,pe){function ye(Me){return Me instanceof ue?Me:new ue(function(Ae){Ae(Me)})}return new(ue||(ue=Promise))(function(Me,Ae){function hn(Te){try{st(pe.next(Te))}catch(ut){Ae(ut)}}function _n(Te){try{st(pe.throw(Te))}catch(ut){Ae(ut)}}function st(Te){Te.done?Me(Te.value):ye(Te.value).then(hn,_n)}st((pe=pe.apply(A,G||[])).next())})};const a=ft();let{root:r=!1}=e,{content:h=""}=e,{children:c}=e,{index:d}=e,{level:f}=e,{focus:p=!1}=e,{parentPath:_=[]}=e,{addSibling:b=()=>!1}=e,{deleteSelf:g=()=>{}}=e,{focusSibling:w=()=>{}}=e,{focusParent:k=()=>{}}=e,{dispatchSelfFocus:H=()=>{}}=e;const{getinvert:Z}=mt("invert");let M=Z();const{getColumnCount:T}=mt("columnCount");let B=T(),$,V,m=!1,L=-1;function I(A,G){G?(t(10,m=!0),L=A):A==L&&(t(10,m=!1),L=-1)}let N=!1;function O(){p?(H(d,!0),f>=1&&(o[i].history.addFocus([...l]),a("saveFocus",l),$&&$.focus())):(H(d,!1),N=!1)}on(O);function j(){p&&(H(d,!0),o[i].history.addFocus([...l]))}let se="";function $e(){p||W()}function xe(){p&&t(0,p=!1)}class be{constructor(G,ue=()=>!0,pe=!0,ye=!0,Me=!0){this.require=ue,this.stopRepeat=pe,this.preventDefault=ye,this.blur=Me,this.handle=function(Ae){return!this.require()||(this.preventDefault&&Ae.preventDefault(),this.stopRepeat&&Ae.repeat==!0)?!1:(this.blur&&t(0,p=!1),G(),!0)}}}const Pe={shift:{Enter:new be(()=>{je(0,0)&&S(0,0)})},other:{Enter:new be(()=>{b(d,1)&&w(d,1)}),Backspace:new be(()=>{g(d)},()=>h.length==0),ArrowUp:new be(()=>w(d,-1)),ArrowDown:new be(()=>w(d,1)),ArrowLeft:new be(()=>k()),ArrowRight:new be(()=>{c.length>0?S(0,0):w(d,1)})}};function et(A){A.shiftKey&&Pe.shift[A.key]?Pe.shift[A.key].handle(A):Pe.other[A.key]&&Pe.other[A.key].handle(A)}function tt(A){N||o[i].history.addPending("edit",[...l],{lastContent:h,getNextContent(){return h},createEditBreak(){N=!1}}),N=!0}function je(A,G){let ue=A+G;if(f<B){let pe=[...c];pe.splice(ue,0,Ie(ue,f+1,!0));for(let ye=ue;ye<pe.length;ye++)pe[ye].index=ye;return o[i].history.add("add",[...l,ue]),t(2,c=[...pe]),!0}else return W(),!1}function nt(A){return u(this,void 0,void 0,function*(){if(c.length>1||f>=1){let G=[...c];o[i].history.add("delete",[...l,A],{box:G[A]}),G[A].focus=!1,t(2,c=[...G]),yield Ge(),G.splice(A,1);for(let ue=0;ue<G.length;ue++)G[ue].index=ue;return t(2,c=[...G]),c[A-1]?S(A-1,0):c.length==0?W():A==0&&S(0,0),!0}else return S(0,0),!1})}function S(A,G){let ue=A+G;if(ue<0){W();return}ue>=c.length?c[c.length-1].children.length>0?t(2,c[c.length-1].children[0].focus=!0,c):t(2,c[A].focus=!0,c):t(2,c[ue].focus=!0,c),t(2,c)}function W(){t(0,p=!0)}let Y,re;const lt=()=>{b(d,0)&&w(d,0)};function Le(A){h=A,t(1,h)}function De(A){Q[A?"unshift":"push"](()=>{$=A,t(9,$)})}const it=()=>{b(d,1)&&w(d,1)},ot=()=>{je(0,0),S(0,0)};function Ve(A,G){n.$$.not_equal(G.content,A)&&(G.content=A,t(2,c))}function ke(A,G){n.$$.not_equal(G.children,A)&&(G.children=A,t(2,c))}function ze(A,G){n.$$.not_equal(G.index,A)&&(G.index=A,t(2,c))}function fn(A,G){n.$$.not_equal(G.level,A)&&(G.level=A,t(2,c))}function cn(A,G){n.$$.not_equal(G.focus,A)&&(G.focus=A,t(2,c))}function dn(A){we.call(this,n,A)}return n.$$set=A=>{"root"in A&&t(3,r=A.root),"content"in A&&t(1,h=A.content),"children"in A&&t(2,c=A.children),"index"in A&&t(4,d=A.index),"level"in A&&t(5,f=A.level),"focus"in A&&t(0,p=A.focus),"parentPath"in A&&t(26,_=A.parentPath),"addSibling"in A&&t(6,b=A.addSibling),"deleteSelf"in A&&t(27,g=A.deleteSelf),"focusSibling"in A&&t(7,w=A.focusSibling),"focusParent"in A&&t(28,k=A.focusParent),"dispatchSelfFocus"in A&&t(29,H=A.dispatchSelfFocus)},n.$$.update=()=>{n.$$.dirty[0]&67108880&&t(8,l=[..._,d]),n.$$.dirty[0]&1&&O(),n.$$.dirty[0]&256&&j(),n.$$.dirty[0]&48&&(f==1&&d==0?t(11,se="type here"):t(11,se="")),n.$$.dirty[0]&32&&(f%2==0&&!M||f%2==1&&M?t(12,Y="accent-secondary"):t(12,Y="accent")),n.$$.dirty[0]&32&&(f%2==0&&!M||f%2==1&&M?t(13,re="accent"):t(13,re="accent-secondary"))},[p,h,c,r,d,f,b,w,l,$,m,se,Y,re,s,B,V,I,$e,xe,et,tt,je,nt,S,W,_,g,k,H,lt,Le,De,it,ot,Ve,ke,ze,fn,cn,dn]}class rn extends ie{constructor(e){super();oe(this,e,Vn,jn,te,{root:3,content:1,children:2,index:4,level:5,focus:0,parentPath:26,addSibling:6,deleteSelf:27,focusSibling:7,focusParent:28,dispatchSelfFocus:29},null,[-1,-1])}}function zn(n){let e,t;return{c(){e=F("div"),t=_e(n[0]),v(e,"class","top svelte-10zixka")},m(l,i){P(l,e,i),y(e,t)},p(l,[i]){i&1&&ve(t,l[0])},i:de,o:de,d(l){l&&D(e)}}}function Un(n,e,t){let{column:l}=e;return n.$$set=i=>{"column"in i&&t(0,l=i.column)},[l]}class En extends ie{constructor(e){super();oe(this,e,Un,zn,te,{column:0})}}function At(n,e,t){const l=n.slice();return l[8]=e[t],l[10]=t,l}function Tt(n,e,t){const l=n.slice();return l[11]=e[t],l[10]=t,l}function Rt(n){let e,t,l,i,o;return t=new En({props:{column:n[11]}}),t.$on("focusFlow",n[7]),{c(){e=F("div"),z(t.$$.fragment),l=q(),v(e,"class",i=le(`header palette-${!!(n[10]%2)==n[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666")},m(s,u){P(s,e,u),U(t,e,null),y(e,l),o=!0},p(s,u){const a={};u&1&&(a.column=s[11]),t.$set(a),(!o||u&1&&i!==(i=le(`header palette-${!!(s[10]%2)==s[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666"))&&v(e,"class",i)},i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){R(t.$$.fragment,s),o=!1},d(s){s&&D(e),E(t)}}}function Ot(n){let e,t;return{c(){e=F("div"),v(e,"class",t=le(`column palette-${!!(n[10]%2)==n[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")},m(l,i){P(l,e,i)},p(l,i){i&1&&t!==(t=le(`column palette-${!!(l[10]%2)==l[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")&&v(e,"class",t)},d(l){l&&D(e)}}}function In(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_;function b(m){n[2](m)}function g(m){n[3](m)}function w(m){n[4](m)}function k(m){n[5](m)}function H(m){n[6](m)}let Z={root:!0};n[0].content!==void 0&&(Z.content=n[0].content),n[0].children!==void 0&&(Z.children=n[0].children),n[0].index!==void 0&&(Z.index=n[0].index),n[0].level!==void 0&&(Z.level=n[0].level),n[0].focus!==void 0&&(Z.focus=n[0].focus),i=new rn({props:Z}),Q.push(()=>x(i,"content",b)),Q.push(()=>x(i,"children",g)),Q.push(()=>x(i,"index",w)),Q.push(()=>x(i,"level",k)),Q.push(()=>x(i,"focus",H)),i.$on("saveFocus",n[1]);let M=n[0].columns,T=[];for(let m=0;m<M.length;m+=1)T[m]=Rt(Tt(n,M,m));const B=m=>R(T[m],1,1,()=>{T[m]=null});let $=n[0].columns,V=[];for(let m=0;m<$.length;m+=1)V[m]=Ot(At(n,$,m));return{c(){e=F("div"),t=F("div"),l=F("div"),z(i.$$.fragment),h=q(),c=F("div");for(let m=0;m<T.length;m+=1)T[m].c();d=q(),f=F("div");for(let m=0;m<V.length;m+=1)V[m].c();v(l,"class","content svelte-150s666"),v(c,"class","headers svelte-150s666"),v(f,"class","columns svelte-150s666"),v(t,"class","viewer svelte-150s666"),v(e,"class","top svelte-150s666"),v(e,"style",p=`--column-count: ${n[0].columns.length};`),K(e,"invert",n[0].invert)},m(m,L){P(m,e,L),y(e,t),y(t,l),U(i,l,null),y(t,h),y(t,c);for(let I=0;I<T.length;I+=1)T[I].m(c,null);y(t,d),y(t,f);for(let I=0;I<V.length;I+=1)V[I].m(f,null);_=!0},p(m,[L]){const I={};if(!o&&L&1&&(o=!0,I.content=m[0].content,ee(()=>o=!1)),!s&&L&1&&(s=!0,I.children=m[0].children,ee(()=>s=!1)),!u&&L&1&&(u=!0,I.index=m[0].index,ee(()=>u=!1)),!a&&L&1&&(a=!0,I.level=m[0].level,ee(()=>a=!1)),!r&&L&1&&(r=!0,I.focus=m[0].focus,ee(()=>r=!1)),i.$set(I),L&1){M=m[0].columns;let N;for(N=0;N<M.length;N+=1){const O=Tt(m,M,N);T[N]?(T[N].p(O,L),C(T[N],1)):(T[N]=Rt(O),T[N].c(),C(T[N],1),T[N].m(c,null))}for(fe(),N=M.length;N<T.length;N+=1)B(N);ce()}if(L&1){$=m[0].columns;let N;for(N=0;N<$.length;N+=1){const O=At(m,$,N);V[N]?V[N].p(O,L):(V[N]=Ot(O),V[N].c(),V[N].m(f,null))}for(;N<V.length;N+=1)V[N].d(1);V.length=$.length}(!_||L&1&&p!==(p=`--column-count: ${m[0].columns.length};`))&&v(e,"style",p),L&1&&K(e,"invert",m[0].invert)},i(m){if(!_){C(i.$$.fragment,m);for(let L=0;L<M.length;L+=1)C(T[L]);_=!0}},o(m){R(i.$$.fragment,m),T=T.filter(Boolean);for(let L=0;L<T.length;L+=1)R(T[L]);_=!1},d(m){m&&D(e),E(i),Ne(T,m),Ne(V,m)}}}function Xn(n,e,t){let{root:l}=e;vt("invert",{getinvert:()=>l.invert}),vt("columnCount",{getColumnCount:()=>l.columns.length});function i(c){t(0,l.lastFocus=c.detail,l),t(0,l)}function o(c){n.$$.not_equal(l.content,c)&&(l.content=c,t(0,l))}function s(c){n.$$.not_equal(l.children,c)&&(l.children=c,t(0,l))}function u(c){n.$$.not_equal(l.index,c)&&(l.index=c,t(0,l))}function a(c){n.$$.not_equal(l.level,c)&&(l.level=c,t(0,l))}function r(c){n.$$.not_equal(l.focus,c)&&(l.focus=c,t(0,l))}function h(c){we.call(this,n,c)}return n.$$set=c=>{"root"in c&&t(0,l=c.root)},[l,i,o,s,u,a,r,h]}class Kn extends ie{constructor(e){super();oe(this,e,Xn,In,te,{root:0})}}function Nt(n,e,t){const l=n.slice();return l[2]=e[t],l[4]=t,l}function Wn(n){let e,t=n[2].toUpperCase()+"",l;return{c(){e=F("kbd"),l=_e(t),v(e,"class","key svelte-1ngepvq")},m(i,o){P(i,e,o),y(e,l)},p(i,o){o&1&&t!==(t=i[2].toUpperCase()+"")&&ve(l,t)},d(i){i&&D(e)}}}function Jn(n){let e,t=n[1][n[2]]+"",l;return{c(){e=F("kbd"),l=_e(t),v(e,"class","modifier svelte-1ngepvq")},m(i,o){P(i,e,o),y(e,l)},p(i,o){o&1&&t!==(t=i[1][i[2]]+"")&&ve(l,t)},d(i){i&&D(e)}}}function Pt(n){let e;function t(o,s){return o[2]in o[1]?Jn:Wn}let l=t(n),i=l(n);return{c(){i.c(),e=Xe()},m(o,s){i.m(o,s),P(o,e,s)},p(o,s){l===(l=t(o))&&i?i.p(o,s):(i.d(1),i=l(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&D(e)}}}function Gn(n){let e,t=n[0],l=[];for(let i=0;i<t.length;i+=1)l[i]=Pt(Nt(n,t,i));return{c(){e=F("span");for(let i=0;i<l.length;i+=1)l[i].c();v(e,"class","top svelte-1ngepvq")},m(i,o){P(i,e,o);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(i,[o]){if(o&3){t=i[0];let s;for(s=0;s<t.length;s+=1){const u=Nt(i,t,s);l[s]?l[s].p(u,o):(l[s]=Pt(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},i:de,o:de,d(i){i&&D(e),Ne(l,i)}}}function Yn(n,e,t){let{keys:l}=e,i={command:"\u2318",shift:"\u21E7",option:"\u2325",control:"\u2303",up:"\u2191",down:"\u2193",left:"\u2190",right:"\u2192",escape:"\u238B",return:"\u21B5",space:"\u2423",delete:"\u232B",backspace:"\u2326",tab:"\u21E5",home:"\u21F1",end:"\u21F2",pageup:"\u21DE",pagedown:"\u21DF",insert:"\u2324"};return n.$$set=o=>{"keys"in o&&t(0,l=o.keys)},[l,i]}class Qn extends ie{constructor(e){super();oe(this,e,Yn,Gn,te,{keys:0})}}function Zn(n){let e;const t=n[14].default,l=ct(t,n,n[13],null);return{c(){l&&l.c()},m(i,o){l&&l.m(i,o),e=!0},p(i,o){l&&l.p&&(!e||o&8192)&&dt(l,t,i,i[13],e?_t(t,i[13],o,null):ht(i[13]),null)},i(i){e||(C(l,i),e=!0)},o(i){R(l,i),e=!1},d(i){l&&l.d(i)}}}function $n(n){let e,t,l,i,o,s;const u=n[14].default,a=ct(u,n,n[13],null);let r=n[4]&&Dt(n);return{c(){e=F("div"),a&&a.c(),t=q(),r&&r.c(),l=Xe(),v(e,"class","element svelte-1vroict")},m(h,c){P(h,e,c),a&&a.m(e,null),n[15](e),P(h,t,c),r&&r.m(h,c),P(h,l,c),i=!0,o||(s=[X(e,"mouseover",n[9]),X(e,"focus",n[9]),X(e,"mouseleave",n[11]),X(e,"blur",n[11]),X(e,"mousemove",n[10])],o=!0)},p(h,c){a&&a.p&&(!i||c&8192)&&dt(a,u,h,h[13],i?_t(u,h[13],c,null):ht(h[13]),null),h[4]?r?(r.p(h,c),c&16&&C(r,1)):(r=Dt(h),r.c(),C(r,1),r.m(l.parentNode,l)):r&&(fe(),R(r,1,1,()=>{r=null}),ce())},i(h){i||(C(a,h),C(r),i=!0)},o(h){R(a,h),R(r),i=!1},d(h){h&&D(e),a&&a.d(h),n[15](null),h&&D(t),r&&r.d(h),h&&D(l),o=!1,Fe(s)}}}function Dt(n){let e,t,l,i,o,s,u,a=!n[2]&&n[1]&&Ht(n),r=n[2]&&qt(n);return{c(){e=F("div"),t=F("div"),l=_e(n[0]),i=q(),a&&a.c(),o=q(),r&&r.c(),v(t,"class","content"),Ke(e,"top",n[6]+"px"),Ke(e,"left",n[5]+"px"),v(e,"class","tooltip svelte-1vroict")},m(h,c){P(h,e,c),y(e,t),y(t,l),y(e,i),a&&a.m(e,null),y(e,o),r&&r.m(e,null),n[16](e),u=!0},p(h,c){(!u||c&1)&&ve(l,h[0]),!h[2]&&h[1]?a?(a.p(h,c),c&6&&C(a,1)):(a=Ht(h),a.c(),C(a,1),a.m(e,o)):a&&(fe(),R(a,1,1,()=>{a=null}),ce()),h[2]?r?r.p(h,c):(r=qt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!u||c&64)&&Ke(e,"top",h[6]+"px"),(!u||c&32)&&Ke(e,"left",h[5]+"px")},i(h){u||(C(a),Se(()=>{s||(s=Ye(e,St,{},!0)),s.run(1)}),u=!0)},o(h){R(a),s||(s=Ye(e,St,{},!1)),s.run(0),u=!1},d(h){h&&D(e),a&&a.d(),r&&r.d(),n[16](null),h&&s&&s.end()}}}function Ht(n){let e,t;return e=new Qn({props:{keys:n[1]}}),{c(){z(e.$$.fragment)},m(l,i){U(e,l,i),t=!0},p(l,i){const o={};i&2&&(o.keys=l[1]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function qt(n){let e,t;return{c(){e=F("div"),t=_e(n[2]),v(e,"class","disabled svelte-1vroict")},m(l,i){P(l,e,i),y(e,t)},p(l,i){i&4&&ve(t,l[2])},d(l){l&&D(e)}}}function xn(n){let e,t,l,i;const o=[$n,Zn],s=[];function u(a,r){return a[0]&&a[8]?0:1}return e=u(n),t=s[e]=o[e](n),{c(){t.c(),l=Xe()},m(a,r){s[e].m(a,r),P(a,l,r),i=!0},p(a,[r]){let h=e;e=u(a),e===h?s[e].p(a,r):(fe(),R(s[h],1,1,()=>{s[h]=null}),ce(),t=s[e],t?t.p(a,r):(t=s[e]=o[e](a),t.c()),C(t,1),t.m(l.parentNode,l))},i(a){i||(C(t),i=!0)},o(a){R(t),i=!1},d(a){s[e].d(a),a&&D(l)}}}function el(n,e,t){let{$$slots:l={},$$scope:i}=e;var o=this&&this.__awaiter||function(M,T,B,$){function V(m){return m instanceof B?m:new B(function(L){L(m)})}return new(B||(B=Promise))(function(m,L){function I(j){try{O($.next(j))}catch(se){L(se)}}function N(j){try{O($.throw(j))}catch(se){L(se)}}function O(j){j.done?m(j.value):V(j.value).then(I,N)}O(($=$.apply(M,T||[])).next())})};let{content:s}=e,{shortcut:u}=e,{disabled:a=!1}=e,{layout:r="bottom"}=e,h=!1,c=0,d=0,f,p,_=!0;Oe(J.subscribe(["useTooltips"],function(){t(8,_=J.data.useTooltips.value)}));function b(){t(4,h=!0),g()}function g(){if(p){let M=f.getBoundingClientRect();r=="bottom"||r=="top"?(t(5,c=M.left-p.offsetWidth/2+M.width/2),c<4?t(5,c=4):c+p.offsetWidth>window.innerWidth-4&&t(5,c=window.innerWidth-p.offsetWidth-4),r=="bottom"?t(6,d=M.bottom+4):r=="top"&&t(6,d=M.top-p.offsetHeight-4)):(r=="left"||r=="right")&&(t(6,d=M.top-p.offsetHeight/2+M.height/2),d<4?t(6,d=4):d+p.offsetHeight>window.innerHeight-4&&t(6,d=window.innerHeight-p.offsetHeight-4),r=="left"?t(5,c=M.left-p.offsetWidth-4):r=="right"&&t(5,c=M.right+4))}}function w(){return o(this,void 0,void 0,function*(){yield Ge(),g()})}function k(){t(4,h=!1)}function H(M){Q[M?"unshift":"push"](()=>{f=M,t(7,f)})}function Z(M){Q[M?"unshift":"push"](()=>{p=M,t(3,p)})}return n.$$set=M=>{"content"in M&&t(0,s=M.content),"shortcut"in M&&t(1,u=M.shortcut),"disabled"in M&&t(2,a=M.disabled),"layout"in M&&t(12,r=M.layout),"$$scope"in M&&t(13,i=M.$$scope)},n.$$.update=()=>{n.$$.dirty&4111&&w()},[s,u,a,p,h,c,d,f,_,b,g,k,r,i,l,H,Z]}class tl extends ie{constructor(e){super();oe(this,e,el,xn,te,{content:0,shortcut:1,disabled:2,layout:12})}}function Bt(n){let e,t;return{c(){e=F("p"),t=_e(n[1]),v(e,"class","svelte-14fho1m")},m(l,i){P(l,e,i),y(e,t)},p(l,i){i&2&&ve(t,l[1])},d(l){l&&D(e)}}}function nl(n){let e,t,l,i,o,s,u,a;t=new un({props:{name:n[0],size:"var(--button-size)"}});let r=n[1]&&Bt(n);return{c(){e=F("button"),z(t.$$.fragment),l=q(),r&&r.c(),v(e,"class",i=le(`top ${n[5]?"palette-"+n[5]:""}`)+" svelte-14fho1m"),e.disabled=o=!!n[3],K(e,"disabled",n[3])},m(h,c){P(h,e,c),U(t,e,null),y(e,l),r&&r.m(e,null),s=!0,u||(a=[X(e,"click",n[8]),X(e,"mousedown",il)],u=!0)},p(h,c){const d={};c&1&&(d.name=h[0]),t.$set(d),h[1]?r?r.p(h,c):(r=Bt(h),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!s||c&32&&i!==(i=le(`top ${h[5]?"palette-"+h[5]:""}`)+" svelte-14fho1m"))&&v(e,"class",i),(!s||c&8&&o!==(o=!!h[3]))&&(e.disabled=o),c&40&&K(e,"disabled",h[3])},i(h){s||(C(t.$$.fragment,h),s=!0)},o(h){R(t.$$.fragment,h),s=!1},d(h){h&&D(e),E(t),r&&r.d(),u=!1,Fe(a)}}}function ll(n){let e,t;return e=new tl({props:{content:n[2],disabled:n[3]&&n[6],shortcut:n[4],layout:n[7],$$slots:{default:[nl]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(l,i){U(e,l,i),t=!0},p(l,[i]){const o={};i&4&&(o.content=l[2]),i&72&&(o.disabled=l[3]&&l[6]),i&16&&(o.shortcut=l[4]),i&128&&(o.layout=l[7]),i&555&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function il(n){n.preventDefault()}function ol(n,e,t){let{icon:l}=e,{text:i=null}=e,{tooltip:o=null}=e,{disabled:s=!1}=e,{shortcut:u=null}=e,{palette:a=null}=e,{disabledReason:r="disabled"}=e,{tooltipLayout:h="bottom"}=e;function c(d){we.call(this,n,d)}return n.$$set=d=>{"icon"in d&&t(0,l=d.icon),"text"in d&&t(1,i=d.text),"tooltip"in d&&t(2,o=d.tooltip),"disabled"in d&&t(3,s=d.disabled),"shortcut"in d&&t(4,u=d.shortcut),"palette"in d&&t(5,a=d.palette),"disabledReason"in d&&t(6,r=d.disabledReason),"tooltipLayout"in d&&t(7,h=d.tooltipLayout)},[l,i,o,s,u,a,r,h,c]}class ae extends ie{constructor(e){super();oe(this,e,ol,ll,te,{icon:0,text:1,tooltip:2,disabled:3,shortcut:4,palette:5,disabledReason:6,tooltipLayout:7})}}function sl(n){let e,t;const l=n[1].default,i=ct(l,n,n[0],null);return{c(){e=F("div"),i&&i.c(),v(e,"class","top svelte-p5tbxi")},m(o,s){P(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&dt(i,l,o,o[0],t?_t(l,o[0],s,null):ht(o[0]),null)},i(o){t||(C(i,o),t=!0)},o(o){R(i,o),t=!1},d(o){o&&D(e),i&&i.d(o)}}}function ul(n,e,t){let{$$slots:l={},$$scope:i}=e;return n.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,l]}class gt extends ie{constructor(e){super();oe(this,e,ul,sl,te,{})}}function al(n){let e,t;return e=new ae({props:{icon:"delete",tooltip:"delete flow"}}),e.$on("click",function(){sn(n[3])&&n[3].apply(this,arguments)}),{c(){z(e.$$.fragment)},m(l,i){U(e,l,i),t=!0},p(l,i){n=l},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function rl(n){let e,t,l,i,o,s,u,a,r;function h(d){n[12](d)}let c={nowrap:!0,placeholder:"type name here"};return n[1]!==void 0&&(c.value=n[1]),i=new pt({props:c}),Q.push(()=>x(i,"value",h)),n[13](i),i.$on("blur",n[6]),i.$on("focus",n[7]),i.$on("keydown",n[8]),i.$on("beforeinput",n[9]),u=new gt({props:{$$slots:{default:[al]},$$scope:{ctx:n}}}),{c(){e=F("div"),t=F("div"),l=F("div"),z(i.$$.fragment),s=q(),z(u.$$.fragment),v(l,"class","text svelte-1ys6vmc"),K(l,"focus",n[0]),v(t,"class",a=le(`content palette-${n[5]}`)+" svelte-1ys6vmc"),v(e,"class",le("top")+" svelte-1ys6vmc"),K(e,"invert",n[2])},m(d,f){P(d,e,f),y(e,t),y(t,l),U(i,l,null),y(t,s),U(u,t,null),r=!0},p(d,[f]){const p={};!o&&f&2&&(o=!0,p.value=d[1],ee(()=>o=!1)),i.$set(p),f&1&&K(l,"focus",d[0]);const _={};f&1048584&&(_.$$scope={dirty:f,ctx:d}),u.$set(_),(!r||f&32&&a!==(a=le(`content palette-${d[5]}`)+" svelte-1ys6vmc"))&&v(t,"class",a),f&4&&K(e,"invert",d[2])},i(d){r||(C(i.$$.fragment,d),C(u.$$.fragment,d),r=!0)},o(d){R(i.$$.fragment,d),R(u.$$.fragment,d),r=!1},d(d){d&&D(e),n[13](null),E(i),E(u)}}}function fl(n,e,t){let l,i,o;me(n,Re,T=>t(16,i=T)),me(n,ne,T=>t(17,o=T));const s=ft();let{content:u}=e,{children:a}=e,{index:r}=e,{focus:h}=e,{invert:c}=e,{deleteSelf:d=()=>{}}=e,f;function p(){h&&t(0,h=!1)}function _(){h||t(0,h=!0)}function b(T){(T.key=="Enter"||T.key=="ArrowDown")&&(T.preventDefault(),a.length>0&&(t(10,a[0].focus=!0,a),t(0,h=!1)))}let g=!1;function w(){h?(o[i].history.addFocus([...l]),s("saveFocus",l),he(ne,o[i].lastFocus=[...l],o),ne.set(o),f&&f.focus()):g=!1}on(w);function k(T){g||o[i].history.addPending("edit",[...l],{lastContent:u,getNextContent(){return u},createEditBreak(){g=!1}}),g=!0}let H="plain";function Z(T){u=T,t(1,u)}function M(T){Q[T?"unshift":"push"](()=>{f=T,t(4,f)})}return n.$$set=T=>{"content"in T&&t(1,u=T.content),"children"in T&&t(10,a=T.children),"index"in T&&t(11,r=T.index),"focus"in T&&t(0,h=T.focus),"invert"in T&&t(2,c=T.invert),"deleteSelf"in T&&t(3,d=T.deleteSelf)},n.$$.update=()=>{n.$$.dirty&2048&&(l=[r]),n.$$.dirty&1&&w(),n.$$.dirty&4&&(c?t(5,H="accent-secondary"):t(5,H="accent"))},[h,u,c,d,f,H,p,_,b,k,a,r,Z,M]}class cl extends ie{constructor(e){super();oe(this,e,fl,rl,te,{content:1,children:10,index:11,focus:0,invert:2,deleteSelf:3})}}function dl(n){let e,t,l,i,o,s,u,a,r,h,c,d;return e=new ae({props:{icon:"undo",disabled:n[0].history.index==-1,tooltip:"undo",shortcut:["command","z"],disabledReason:"nothing to undo"}}),e.$on("click",n[5]),l=new ae({props:{disabled:n[0].history.index==n[0].history.data.length-1,icon:"redo",tooltip:"redo",shortcut:["command","shift","z"],disabledReason:"nothing to redo"}}),l.$on("click",n[6]),o=new ae({props:{icon:"addRight",disabled:!n[1],disabledReason:We,tooltip:"add response",shortcut:["shift","return"]}}),o.$on("click",n[3]),u=new ae({props:{icon:"addUp",disabled:!n[1],disabledReason:We,tooltip:"add arguement above"}}),u.$on("click",n[7]),r=new ae({props:{icon:"addDown",disabled:!n[1],disabledReason:We,tooltip:"add arguement below",shortcut:["return"]}}),r.$on("click",n[8]),c=new ae({props:{icon:"delete",disabled:!n[1],disabledReason:We,tooltip:"delete selected"}}),c.$on("click",n[2]),{c(){z(e.$$.fragment),t=q(),z(l.$$.fragment),i=q(),z(o.$$.fragment),s=q(),z(u.$$.fragment),a=q(),z(r.$$.fragment),h=q(),z(c.$$.fragment)},m(f,p){U(e,f,p),P(f,t,p),U(l,f,p),P(f,i,p),U(o,f,p),P(f,s,p),U(u,f,p),P(f,a,p),U(r,f,p),P(f,h,p),U(c,f,p),d=!0},p(f,p){const _={};p&1&&(_.disabled=f[0].history.index==-1),e.$set(_);const b={};p&1&&(b.disabled=f[0].history.index==f[0].history.data.length-1),l.$set(b);const g={};p&2&&(g.disabled=!f[1]),o.$set(g);const w={};p&2&&(w.disabled=!f[1]),u.$set(w);const k={};p&2&&(k.disabled=!f[1]),r.$set(k);const H={};p&2&&(H.disabled=!f[1]),c.$set(H)},i(f){d||(C(e.$$.fragment,f),C(l.$$.fragment,f),C(o.$$.fragment,f),C(u.$$.fragment,f),C(r.$$.fragment,f),C(c.$$.fragment,f),d=!0)},o(f){R(e.$$.fragment,f),R(l.$$.fragment,f),R(o.$$.fragment,f),R(u.$$.fragment,f),R(r.$$.fragment,f),R(c.$$.fragment,f),d=!1},d(f){E(e,f),f&&D(t),E(l,f),f&&D(i),E(o,f),f&&D(s),E(u,f),f&&D(a),E(r,f),f&&D(h),E(c,f)}}}function hl(n){let e,t,l,i,o,s;return l=new gt({props:{$$slots:{default:[dl]},$$scope:{ctx:n}}}),{c(){e=F("div"),t=F("div"),z(l.$$.fragment),v(t,"class","buttons-wrapper svelte-psed4t"),v(e,"class","top svelte-psed4t")},m(u,a){P(u,e,a),y(e,t),U(l,t,null),i=!0,o||(s=X(e,"mousedown",_l),o=!0)},p(u,[a]){const r={};a&2051&&(r.$$scope={dirty:a,ctx:u}),l.$set(r)},i(u){i||(C(l.$$.fragment,u),i=!0)},o(u){R(l.$$.fragment,u),i=!1},d(u){u&&D(e),E(l),o=!1,s()}}}let We="no cell selected";function _l(n){n.preventDefault()}function pl(n,e,t){var l=this&&this.__awaiter||function(p,_,b,g){function w(k){return k instanceof b?k:new b(function(H){H(k)})}return new(b||(b=Promise))(function(k,H){function Z(B){try{T(g.next(B))}catch($){H($)}}function M(B){try{T(g.throw(B))}catch($){H($)}}function T(B){B.done?k(B.value):w(B.value).then(Z,M)}T((g=g.apply(p,_||[])).next())})};let{flow:i}=e,o=!1;function s(){return l(this,void 0,void 0,function*(){if(yield Ge(),i.lastFocus&&i.lastFocus.length>1){let p=ge(i.lastFocus);t(1,o=p==null?void 0:p.focus)}})}ln(function(){s()});function u(){return l(this,void 0,void 0,function*(){if(!o)return;let p=ge(i.lastFocus,1),_=ge(i.lastFocus),b=[...p.children];if(b.length>1||p.level>=1){i.history.add("delete",i.lastFocus,{box:b[_.index]}),b[_.index].focus=!1,p.children=[...b],t(0,i),yield Ge(),b.splice(_.index,1);for(let g=_.index;g<b.length;g++)b[g].index=g;b.length<=0?p.focus=!0:_.index>=b.length?b[b.length-1].focus=!0:b[_.index].focus=!0,p.children=[...b],t(0,i)}})}function a(){if(!o)return;let p=ge(i.lastFocus),_=[...p.children];if(p.level<i.columns.length){_.splice(0,0,Ie(0,p.level+1,!1));for(let b=0;b<_.length;b++)_[b].index=b;i.history.add("add",[...i.lastFocus,0]),p.children=[..._],t(0,i)}}function r(p){if(!o)return;let _=ge(i.lastFocus,1),b=ge(i.lastFocus),g=[..._.children];g.splice(b.index+p,0,Ie(b.index+p,b.level,!1));for(let k=b.index;k<g.length;k++)g[k].index=k;let w=[...i.lastFocus];p==0?(w[w.length-1]-=0,t(0,i.lastFocus[i.lastFocus.length-1]+=1,i)):w[w.length-1]+=1,i.history.add("add",w),_.children=[...g],t(0,i)}const h=()=>i.history.undo(),c=()=>i.history.redo(),d=()=>r(0),f=()=>r(1);return n.$$set=p=>{"flow"in p&&t(0,i=p.flow)},[i,o,u,a,r,h,c,d,f]}class gl extends ie{constructor(e){super();oe(this,e,pl,hl,te,{flow:0})}}function ml(n){let e,t,l,i,o,s,u,a,r,h;l=new ae({props:{icon:"delete",tooltip:"close"}}),l.$on("click",function(){sn(n[1])&&n[1].apply(this,arguments)});var c=n[0];function d(f){return{props:{closePopup:f[1]}}}return c&&(o=new c(d(n))),{c(){e=F("div"),t=F("div"),z(l.$$.fragment),i=q(),o&&z(o.$$.fragment),v(t,"class","close svelte-xzcwlv"),v(e,"class","top svelte-xzcwlv")},m(f,p){P(f,e,p),y(e,t),U(l,t,null),y(e,i),o&&U(o,e,null),a=!0,r||(h=X(window,"keydown",n[2]),r=!0)},p(f,[p]){n=f;const _={};if(p&2&&(_.closePopup=n[1]),c!==(c=n[0])){if(o){fe();const b=o;R(b.$$.fragment,1,0,()=>{E(b,1)}),ce()}c?(o=new c(d(n)),z(o.$$.fragment),C(o.$$.fragment,1),U(o,e,null)):o=null}else c&&o.$set(_)},i(f){a||(C(l.$$.fragment,f),o&&C(o.$$.fragment,f),Se(()=>{u&&u.end(1),s=qe(e,qn,{}),s.start()}),a=!0)},o(f){R(l.$$.fragment,f),o&&R(o.$$.fragment,f),s&&s.invalidate(),u=Ue(e,Bn,{}),a=!1},d(f){f&&D(e),E(l),o&&E(o),f&&u&&u.end(),r=!1,h()}}}function vl(n,e,t){let{component:l}=e,{closeSelf:i}=e;function o(s){s.key==="Escape"&&i()}return n.$$set=s=>{"component"in s&&t(0,l=s.component),"closeSelf"in s&&t(1,i=s.closeSelf)},[l,i,o]}class bl extends ie{constructor(e){super();oe(this,e,vl,ml,te,{component:0,closeSelf:1})}}function kl(n){let e,t,l,i,o,s,u,a,r,h,c;return l=new ae({props:{icon:"download",text:"download as JSON",tooltip:"saves JSON file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),l.$on("click",n[1]),a=new ae({props:{icon:"download",text:"download as XLSX",tooltip:"saves XLSX file on your computer",tooltipLayout:"top",disabled:n[0].length==0,disabledReason:"nothing to download"}}),a.$on("click",n[2]),{c(){e=F("div"),t=F("section"),z(l.$$.fragment),i=q(),o=F("ul"),o.innerHTML=`<li>Can reopen file in this editor</li> 
      <li>More data is saved (last focused cell etc.)</li>`,s=q(),u=F("section"),z(a.$$.fragment),r=q(),h=F("ul"),h.innerHTML="<li>Anyone can view it</li>",v(o,"class","svelte-87ygo3"),v(t,"class","json svelte-87ygo3"),v(h,"class","svelte-87ygo3"),v(u,"class","xlsx svelte-87ygo3"),v(e,"class","top svelte-87ygo3")},m(d,f){P(d,e,f),y(e,t),U(l,t,null),y(t,i),y(t,o),y(e,s),y(e,u),U(a,u,null),y(u,r),y(u,h),c=!0},p(d,[f]){const p={};f&1&&(p.disabled=d[0].length==0),l.$set(p);const _={};f&1&&(_.disabled=d[0].length==0),a.$set(_)},i(d){c||(C(l.$$.fragment,d),C(a.$$.fragment,d),c=!0)},o(d){R(l.$$.fragment,d),R(a.$$.fragment,d),c=!1},d(d){d&&D(e),E(l),E(a)}}}function wl(n,e,t){let l,i;me(n,ne,a=>t(0,l=a)),me(n,Be,a=>t(4,i=a));let{closePopup:o}=e;function s(){he(Be,i=!0,i);let a=JSON.stringify(l,(h,c)=>{if(h!=="history")return c}),r=document.createElement("a");r.setAttribute("href","data:text/json;charset=utf-8, "+encodeURIComponent(a)),r.setAttribute("download","flow.json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),o()}function u(){he(Be,i=!0,i);let a=new bn.exports.Workbook;for(let r of l){let c=function(p,_,b){for(;!h[b];){let g=[];for(let w=0;w<r.columns.length;w++)g.push("");h.push(g)}_>=0&&(h[b][_]=p.content),p.children.forEach(function(g,w){c(g,_+1,b+w)})},h=[];c(r,-1,0);let d=r.content;d.length>=31&&(d=d.substring(0,31));let f=a.addWorksheet(d);f.columns=r.columns.map(function(p){return{header:p,width:25}});for(let p=0;p<h.length;p++){let _=f.getRow(p+2);for(let b=0;b<h[p].length;b++)_.getCell(b+1).value=h[p][b]}f.getRow(1).font={bold:!0}}a.xlsx.writeBuffer({base64:!0}).then(function(r){let h=document.createElement("a"),c=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=URL.createObjectURL(c);h.href=d,h.download="flow.xlsx",document.body.appendChild(h),h.click(),setTimeout(function(){document.body.removeChild(h),window.URL.revokeObjectURL(d)},0)}).catch(function(r){console.log(r.message)}),o()}return n.$$set=a=>{"closePopup"in a&&t(3,o=a.closePopup)},[l,s,u,o]}class yl extends ie{constructor(e){super();oe(this,e,wl,kl,te,{closePopup:3})}}function Sl(n){let e,t,l,i,o;return t=new ae({props:{icon:"upload",text:"choose file from computer",tooltip:"upload a JSON file from your computer",tooltipLayout:"top"}}),t.$on("click",n[0]),{c(){e=F("div"),z(t.$$.fragment),l=q(),i=F("p"),i.textContent="Or drag and drop a JSON file anywhere in this window",v(i,"class","svelte-1vv9x21"),v(e,"class","top svelte-1vv9x21")},m(s,u){P(s,e,u),U(t,e,null),y(e,l),y(e,i),o=!0},p:de,i(s){o||(C(t.$$.fragment,s),o=!0)},o(s){R(t.$$.fragment,s),o=!1},d(s){s&&D(e),E(t)}}}function Fl(n,e,t){let{closePopup:l}=e;function i(){document.getElementById("uploadId").click(),l()}return n.$$set=o=>{"closePopup"in o&&t(1,l=o.closePopup)},[i,l]}class Cl extends ie{constructor(e){super();oe(this,e,Fl,Sl,te,{closePopup:1})}}function Ll(n){let e,t,l,i,o,s,u;return{c(){e=F("label"),t=F("input"),l=q(),i=F("div"),i.innerHTML='<div class="switch svelte-8bq301"></div>',v(t,"type","checkbox"),v(t,"class","svelte-8bq301"),v(i,"class","background svelte-8bq301"),v(e,"class",o=le(`palette-${n[1]}`)+" svelte-8bq301")},m(a,r){P(a,e,r),y(e,t),t.checked=n[0],y(e,l),y(e,i),s||(u=X(t,"change",n[3]),s=!0)},p(a,[r]){r&1&&(t.checked=a[0]),r&2&&o!==(o=le(`palette-${a[1]}`)+" svelte-8bq301")&&v(e,"class",o)},i:de,o:de,d(a){a&&D(e),s=!1,u()}}}function Ml(n,e,t){let{value:l=!0}=e,{auto:i=!0}=e,o;function s(){l=this.checked,t(0,l)}return n.$$set=u=>{"value"in u&&t(0,l=u.value),"auto"in u&&t(2,i=u.auto)},n.$$.update=()=>{n.$$.dirty&5&&(l?l==i?t(1,o="accent-secondary"):t(1,o="accent"):t(1,o="plain"))},[l,o,i,s]}class Al extends ie{constructor(e){super();oe(this,e,Ml,Ll,te,{value:0,auto:2})}}function jt(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function Vt(n){let e;return{c(){e=F("p"),e.textContent="default",v(e,"class","option-info svelte-ac5xa2")},m(t,l){P(t,e,l)},d(t){t&&D(e)}}}function zt(n){let e,t,l,i,o,s,u,a=n[12]+"",r,h,c,d,f=n[14]==n[3]&&Vt();return{c(){e=F("label"),t=F("input"),o=q(),s=F("li"),u=F("p"),r=_e(a),h=q(),f&&f.c(),v(t,"type","radio"),v(t,"name",n[2]),t.checked=l=n[14]==n[0],t.__value=i=n[14],t.value=t.__value,v(t,"class","svelte-ac5xa2"),n[7][0].push(t),v(u,"class","svelte-ac5xa2"),v(s,"class","svelte-ac5xa2"),v(e,"class","svelte-ac5xa2")},m(p,_){P(p,e,_),y(e,t),t.checked=t.__value===n[0],y(e,o),y(e,s),y(s,u),y(u,r),y(s,h),f&&f.m(s,null),c||(d=X(t,"change",n[6]),c=!0)},p(p,_){_&4&&v(t,"name",p[2]),_&1&&l!==(l=p[14]==p[0])&&(t.checked=l),_&1&&(t.checked=t.__value===p[0]),_&2&&a!==(a=p[12]+"")&&ve(r,a),p[14]==p[3]?f||(f=Vt(),f.c(),f.m(s,null)):f&&(f.d(1),f=null)},d(p){p&&D(e),n[7][0].splice(n[7][0].indexOf(t),1),f&&f.d(),c=!1,d()}}}function Ut(n){let e,t,l,i,o,s,u,a,r,h,c,d;function f(b){n[9](b)}let p={placeholder:"custom",nowrap:!0};n[1].customOptionValue!==void 0&&(p.value=n[1].customOptionValue),u=new pt({props:p}),Q.push(()=>x(u,"value",f)),u.$on("input",n[10]),u.$on("focus",n[11]);let _=n[1].customOptionValue!=""&&Et();return{c(){e=F("label"),t=F("input"),o=q(),s=F("li"),z(u.$$.fragment),r=q(),_&&_.c(),v(t,"type","radio"),v(t,"name",n[2]),t.checked=l=n[0]==n[1].options.length,t.__value=i=n[1].options.length,t.value=t.__value,v(t,"class","svelte-ac5xa2"),n[7][0].push(t),v(s,"class","svelte-ac5xa2"),v(e,"class","svelte-ac5xa2")},m(b,g){P(b,e,g),y(e,t),t.checked=t.__value===n[0],y(e,o),y(e,s),U(u,s,null),y(s,r),_&&_.m(s,null),h=!0,c||(d=X(t,"change",n[8]),c=!0)},p(b,g){(!h||g&4)&&v(t,"name",b[2]),(!h||g&3&&l!==(l=b[0]==b[1].options.length))&&(t.checked=l),(!h||g&2&&i!==(i=b[1].options.length))&&(t.__value=i,t.value=t.__value),g&1&&(t.checked=t.__value===b[0]);const w={};!a&&g&2&&(a=!0,w.value=b[1].customOptionValue,ee(()=>a=!1)),u.$set(w),b[1].customOptionValue!=""?_||(_=Et(),_.c(),_.m(s,null)):_&&(_.d(1),_=null)},i(b){h||(C(u.$$.fragment,b),h=!0)},o(b){R(u.$$.fragment,b),h=!1},d(b){b&&D(e),n[7][0].splice(n[7][0].indexOf(t),1),E(u),_&&_.d(),c=!1,d()}}}function Et(n){let e;return{c(){e=F("p"),e.textContent="custom",v(e,"class","option-info svelte-ac5xa2")},m(t,l){P(t,e,l)},d(t){t&&D(e)}}}function Tl(n){let e,t,l,i,o,s,u,a,r,h=n[1].options,c=[];for(let f=0;f<h.length;f+=1)c[f]=zt(jt(n,h,f));let d=n[1].customOption&&Ut(n);return{c(){e=F("div"),t=F("div"),l=F("div"),o=q(),s=F("ul");for(let f=0;f<c.length;f+=1)c[f].c();u=q(),d&&d.c(),v(l,"class","switch svelte-ac5xa2"),v(l,"style",i=`--pos:calc(${n[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`),v(t,"class","background svelte-ac5xa2"),v(s,"class","svelte-ac5xa2"),v(e,"class",a=le(`top palette-${n[4]}`)+" svelte-ac5xa2")},m(f,p){P(f,e,p),y(e,t),y(t,l),y(e,o),y(e,s);for(let _=0;_<c.length;_+=1)c[_].m(s,null);y(s,u),d&&d.m(s,null),r=!0},p(f,[p]){if((!r||p&1&&i!==(i=`--pos:calc(${f[0]} * (var(--button-size) + var(--padding) * 2) + var(--padding-small))`))&&v(l,"style",i),p&15){h=f[1].options;let _;for(_=0;_<h.length;_+=1){const b=jt(f,h,_);c[_]?c[_].p(b,p):(c[_]=zt(b),c[_].c(),c[_].m(s,u))}for(;_<c.length;_+=1)c[_].d(1);c.length=h.length}f[1].customOption?d?(d.p(f,p),p&2&&C(d,1)):(d=Ut(f),d.c(),C(d,1),d.m(s,null)):d&&(fe(),R(d,1,1,()=>{d=null}),ce()),(!r||p&16&&a!==(a=le(`top palette-${f[4]}`)+" svelte-ac5xa2"))&&v(e,"class",a)},i(f){r||(C(d),r=!0)},o(f){R(d),r=!1},d(f){f&&D(e),Ne(c,f),d&&d.d()}}}function Rl(n,e,t){let l,{name:i}=e,{value:o}=e,{auto:s}=e;const u=ft();let{detail:a}=e;const r=[[]];function h(){o=this.__value,t(0,o)}function c(){o=this.__value,t(0,o)}function d(_){n.$$.not_equal(a.customOptionValue,_)&&(a.customOptionValue=_,t(1,a))}const f=()=>u("forceUpdate"),p=()=>t(0,o=a.options.length);return n.$$set=_=>{"name"in _&&t(2,i=_.name),"value"in _&&t(0,o=_.value),"auto"in _&&t(3,s=_.auto),"detail"in _&&t(1,a=_.detail)},n.$$.update=()=>{n.$$.dirty&9&&t(4,l=s==o?"accent-secondary":"accent")},[o,a,i,s,l,u,h,r,c,d,f,p]}class Ol extends ie{constructor(e){super();oe(this,e,Rl,Tl,te,{name:2,value:0,auto:3,detail:1})}}function Nl(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b;return{c(){e=F("div"),t=F("label"),l=F("div"),o=q(),s=F("input"),h=q(),c=F("label"),d=F("input"),v(l,"class","switch svelte-12gyw47"),v(l,"style",i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(n[0],n[1].max),n[1].min)-n[1].min)/(n[1].max-n[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${n[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`),v(s,"class","slider svelte-12gyw47"),v(s,"type","range"),v(s,"min",u=n[1].min),v(s,"max",a=n[1].max),v(s,"step",r=n[1].step),v(t,"class","svelte-12gyw47"),v(d,"type","number"),v(d,"class","svelte-12gyw47"),v(c,"class","small svelte-12gyw47"),v(e,"class",f=le(`top palette-${n[3]}`)+" svelte-12gyw47"),v(e,"style",p=`--value: ${n[0]}`),K(e,"hue",n[1].hue)},m(g,w){P(g,e,w),y(e,t),y(t,l),y(t,o),y(t,s),He(s,n[0]),y(e,h),y(e,c),y(c,d),He(d,n[0]),_||(b=[X(s,"change",n[8]),X(s,"input",n[8]),X(d,"input",n[9]),X(e,"mousedown",n[4]),X(e,"mousemove",n[5]),X(e,"mouseup",n[6])],_=!0)},p(g,[w]){w&7&&i!==(i=`
      left: calc(var(--padding-small) + ${(Math.max(Math.min(g[0],g[1].max),g[1].min)-g[1].min)/(g[1].max-g[1].min)} * (100% - var(--button-size) - var(--padding-small) * 2));
      transition: left ${g[2]?"0":"var(--transition-speed)"}
      , background var(--transition-speed);`)&&v(l,"style",i),w&2&&u!==(u=g[1].min)&&v(s,"min",u),w&2&&a!==(a=g[1].max)&&v(s,"max",a),w&2&&r!==(r=g[1].step)&&v(s,"step",r),w&1&&He(s,g[0]),w&1&&at(d.value)!==g[0]&&He(d,g[0]),w&8&&f!==(f=le(`top palette-${g[3]}`)+" svelte-12gyw47")&&v(e,"class",f),w&1&&p!==(p=`--value: ${g[0]}`)&&v(e,"style",p),w&10&&K(e,"hue",g[1].hue)},i:de,o:de,d(g){g&&D(e),_=!1,Fe(b)}}}function Pl(n,e,t){let l,{value:i}=e,{auto:o}=e,{detail:s}=e,u=!1,a=!1,r=0;function h(_){u=!0,r=_.pageX,t(2,a=!1)}function c(_){u&&Math.abs(r-_.pageX)>3&&t(2,a=!0)}function d(_){u=!1,t(2,a=!1)}function f(){i=at(this.value),t(0,i)}function p(){i=at(this.value),t(0,i)}return n.$$set=_=>{"value"in _&&t(0,i=_.value),"auto"in _&&t(7,o=_.auto),"detail"in _&&t(1,s=_.detail)},n.$$.update=()=>{n.$$.dirty&129&&t(3,l=o==i?"accent-secondary":"accent")},[i,s,a,l,h,c,d,o,f,p]}class Dl extends ie{constructor(e){super();oe(this,e,Pl,Nl,te,{value:0,auto:7,detail:1})}}function It(n){let e,t,l;function i(s){n[9](s)}let o={auto:n[0].auto};return n[1]!==void 0&&(o.value=n[1]),e=new Al({props:o}),Q.push(()=>x(e,"value",i)),{c(){z(e.$$.fragment)},m(s,u){U(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.auto=s[0].auto),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){E(e,s)}}}function Xt(n){let e,t=n[0].info+"",l;return{c(){e=F("p"),l=_e(t),v(e,"class","svelte-1il06s5")},m(i,o){P(i,e,o),y(e,l)},p(i,o){o&1&&t!==(t=i[0].info+"")&&ve(l,t)},d(i){i&&D(e)}}}function Kt(n){let e,t,l;function i(s){n[10](s)}let o={name:n[0].name,auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(o.value=n[1]),e=new Ol({props:o}),Q.push(()=>x(e,"value",i)),e.$on("forceUpdate",n[11]),{c(){z(e.$$.fragment)},m(s,u){U(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.name=s[0].name),u&1&&(a.auto=s[0].auto),u&1&&(a.detail=s[0].detail),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){E(e,s)}}}function Wt(n){let e,t,l;function i(s){n[12](s)}let o={auto:n[0].auto,detail:n[0].detail};return n[1]!==void 0&&(o.value=n[1]),e=new Dl({props:o}),Q.push(()=>x(e,"value",i)),{c(){z(e.$$.fragment)},m(s,u){U(e,s,u),l=!0},p(s,u){const a={};u&1&&(a.auto=s[0].auto),u&1&&(a.detail=s[0].detail),!t&&u&2&&(t=!0,a.value=s[1],ee(()=>t=!1)),e.$set(a)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){E(e,s)}}}function Hl(n){let e,t,l,i=n[0].name+"",o,s,u,a,r,h,c,d,f,p;a=new ae({props:{icon:"delete",tooltip:"reset to default",tooltipLayout:"right"}}),a.$on("click",n[6]);let _=n[0].type=="toggle"&&It(n),b=n[0].info&&Xt(n),g=n[0].type=="radio"&&Kt(n),w=n[0].type=="slider"&&Wt(n);return{c(){e=F("div"),t=F("span"),l=F("h1"),o=_e(i),s=q(),u=F("div"),z(a.$$.fragment),r=q(),_&&_.c(),h=q(),b&&b.c(),c=q(),g&&g.c(),d=q(),w&&w.c(),v(l,"class","svelte-1il06s5"),v(u,"class","reset svelte-1il06s5"),K(u,"hidden",n[1]==n[0].auto),v(t,"class","above svelte-1il06s5"),v(e,"class","top svelte-1il06s5"),v(e,"style",f=`--spotlight:${n[4]}`)},m(k,H){P(k,e,H),y(e,t),y(t,l),y(l,o),y(t,s),y(t,u),U(a,u,null),y(t,r),_&&_.m(t,null),y(t,h),b&&b.m(t,null),y(e,c),g&&g.m(e,null),y(e,d),w&&w.m(e,null),n[13](e),p=!0},p(k,[H]){(!p||H&1)&&i!==(i=k[0].name+"")&&ve(o,i),H&3&&K(u,"hidden",k[1]==k[0].auto),k[0].type=="toggle"?_?(_.p(k,H),H&1&&C(_,1)):(_=It(k),_.c(),C(_,1),_.m(t,h)):_&&(fe(),R(_,1,1,()=>{_=null}),ce()),k[0].info?b?b.p(k,H):(b=Xt(k),b.c(),b.m(t,null)):b&&(b.d(1),b=null),k[0].type=="radio"?g?(g.p(k,H),H&1&&C(g,1)):(g=Kt(k),g.c(),C(g,1),g.m(e,d)):g&&(fe(),R(g,1,1,()=>{g=null}),ce()),k[0].type=="slider"?w?(w.p(k,H),H&1&&C(w,1)):(w=Wt(k),w.c(),C(w,1),w.m(e,null)):w&&(fe(),R(w,1,1,()=>{w=null}),ce()),(!p||H&16&&f!==(f=`--spotlight:${k[4]}`))&&v(e,"style",f)},i(k){p||(C(a.$$.fragment,k),C(_),C(g),C(w),p=!0)},o(k){R(a.$$.fragment,k),R(_),R(g),R(w),p=!1},d(k){k&&D(e),E(a),_&&_.d(),b&&b.d(),g&&g.d(),w&&w.d(),n[13](null)}}}function ql(n,e,t){let l,i=de,o=()=>(i(),i=kn(c,k=>t(4,l=k)),c);n.$$.on_destroy.push(()=>i());let{setting:s}=e,{key:u}=e,a=s.value;function r(k){J.setValue(u,k),k=s.value}function h(){J.setValue(u,s.auto),t(1,a=s.value)}Oe(J.subscribe([u],function(k){s.value!=a&&t(1,a=s.value)}));let c=bt(0);o();let d;function f(){d.scrollIntoView({block:"center"}),o(t(2,c=bt(1,{duration:2e3}))),he(c,l=0,l)}function p(k){a=k,t(1,a)}function _(k){a=k,t(1,a)}const b=()=>r(a);function g(k){a=k,t(1,a)}function w(k){Q[k?"unshift":"push"](()=>{d=k,t(3,d)})}return n.$$set=k=>{"setting"in k&&t(0,s=k.setting),"key"in k&&t(7,u=k.key)},n.$$.update=()=>{n.$$.dirty&2&&r(a)},[s,a,c,d,l,r,h,u,f,p,_,b,g,w]}class Bl extends ie{constructor(e){super();oe(this,e,ql,Hl,te,{setting:0,key:7,scrollToSelf:8})}get scrollToSelf(){return this.$$.ctx[8]}}function Jt(n,e,t){const l=n.slice();return l[6]=e[t],l[7]=e,l[8]=t,l}function Gt(n,e,t){const l=n.slice();return l[6]=e[t],l[8]=t,l}function Yt(n){let e,t,l=J.data[n[6]].name+"",i,o,s,u;function a(){return n[3](n[8])}return{c(){e=F("li"),t=F("button"),i=_e(l),o=q(),v(t,"class","svelte-1r275ni")},m(r,h){P(r,e,h),y(e,t),y(t,i),y(e,o),s||(u=X(t,"click",a),s=!0)},p(r,h){n=r},d(r){r&&D(e),s=!1,u()}}}function Qt(n){let e,t=n[8],l;const i=()=>n[5](e,t),o=()=>n[5](null,t);let s={key:n[6],setting:J.data[n[6]]};return e=new Bl({props:s}),i(),{c(){z(e.$$.fragment)},m(u,a){U(e,u,a),l=!0},p(u,a){t!==u[8]&&(o(),t=u[8],i());const r={};e.$set(r)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){R(e.$$.fragment,u),l=!1},d(u){o(),E(e,u)}}}function jl(n){let e,t,l,i,o,s,u,a,r,h,c,d=Object.keys(J.data),f=[];for(let g=0;g<d.length;g+=1)f[g]=Yt(Gt(n,d,g));u=new ae({props:{icon:"delete",text:"reset all settings"}}),u.$on("click",n[4]);let p=Object.keys(J.data),_=[];for(let g=0;g<p.length;g+=1)_[g]=Qt(Jt(n,p,g));const b=g=>R(_[g],1,1,()=>{_[g]=null});return{c(){e=F("div"),t=F("div"),l=F("ul");for(let g=0;g<f.length;g+=1)f[g].c();i=q(),o=F("div"),s=F("section"),z(u.$$.fragment),a=q(),r=F("section"),h=F("ul");for(let g=0;g<_.length;g+=1)_[g].c();v(l,"class","svelte-1r275ni"),v(t,"class","outline svelte-1r275ni"),v(s,"class","controls svelte-1r275ni"),v(h,"class","svelte-1r275ni"),v(r,"class","settings svelte-1r275ni"),v(o,"class","content svelte-1r275ni"),v(e,"class","top palette-plain svelte-1r275ni")},m(g,w){P(g,e,w),y(e,t),y(t,l);for(let k=0;k<f.length;k+=1)f[k].m(l,null);y(e,i),y(e,o),y(o,s),U(u,s,null),y(o,a),y(o,r),y(r,h);for(let k=0;k<_.length;k+=1)_[k].m(h,null);c=!0},p(g,[w]){if(w&2){d=Object.keys(J.data);let k;for(k=0;k<d.length;k+=1){const H=Gt(g,d,k);f[k]?f[k].p(H,w):(f[k]=Yt(H),f[k].c(),f[k].m(l,null))}for(;k<f.length;k+=1)f[k].d(1);f.length=d.length}if(w&1){p=Object.keys(J.data);let k;for(k=0;k<p.length;k+=1){const H=Jt(g,p,k);_[k]?(_[k].p(H,w),C(_[k],1)):(_[k]=Qt(H),_[k].c(),C(_[k],1),_[k].m(h,null))}for(fe(),k=p.length;k<_.length;k+=1)b(k);ce()}},i(g){if(!c){C(u.$$.fragment,g);for(let w=0;w<p.length;w+=1)C(_[w]);c=!0}},o(g){R(u.$$.fragment,g),_=_.filter(Boolean);for(let w=0;w<_.length;w+=1)R(_[w]);c=!1},d(g){g&&D(e),Ne(f,g),E(u),Ne(_,g)}}}function Vl(n,e,t){let{closePopup:l}=e;Oe(()=>{J.saveToLocalStorage()});let i=[];function o(r){i[r].scrollToSelf()}const s=r=>o(r),u=()=>J.resetToAuto();function a(r,h){Q[r?"unshift":"push"](()=>{i[h]=r,t(0,i)})}return n.$$set=r=>{"closePopup"in r&&t(2,l=r.closePopup)},[i,o,l,s,u,a]}class zl extends ie{constructor(e){super();oe(this,e,Vl,jl,te,{closePopup:2})}}function Ul(n){let e;return{c(){e=_e("no name")},m(t,l){P(t,e,l)},p:de,d(t){t&&D(e)}}}function El(n){let e=n[0].content+"",t;return{c(){t=_e(e)},m(l,i){P(l,t,i)},p(l,i){i&1&&e!==(e=l[0].content+"")&&ve(t,e)},d(l){l&&D(t)}}}function Il(n){let e,t,l,i,o,s,u,a;function r(d,f){return d[0].content?El:Ul}let h=r(n),c=h(n);return{c(){e=F("div"),t=F("button"),c.c(),v(t,"class","svelte-1iz0948"),K(t,"selected",n[1]),K(t,"empty",n[0].content.length==0),v(e,"class",l=le(`top palette-${n[2]}`)+" svelte-1iz0948"),K(e,"invert",n[0].invert)},m(d,f){P(d,e,f),y(e,t),c.m(t,null),s=!0,u||(a=X(t,"click",n[3]),u=!0)},p(d,[f]){h===(h=r(d))&&c?c.p(d,f):(c.d(1),c=h(d),c&&(c.c(),c.m(t,null))),f&2&&K(t,"selected",d[1]),f&1&&K(t,"empty",d[0].content.length==0),(!s||f&4&&l!==(l=le(`top palette-${d[2]}`)+" svelte-1iz0948"))&&v(e,"class",l),f&5&&K(e,"invert",d[0].invert)},i(d){s||(Se(()=>{o&&o.end(1),i=qe(e,Dn,{}),i.start()}),s=!0)},o(d){i&&i.invalidate(),o=Ue(e,Hn,{}),s=!1},d(d){d&&D(e),c.d(),d&&o&&o.end(),u=!1,a()}}}function Xl(n,e,t){let{flow:l}=e,{selected:i}=e,o;function s(u){we.call(this,n,u)}return n.$$set=u=>{"flow"in u&&t(0,l=u.flow),"selected"in u&&t(1,i=u.selected)},n.$$.update=()=>{n.$$.dirty&1&&(l.invert?t(2,o="accent-secondary"):t(2,o="accent"))},[l,i,o,s]}class Kl extends ie{constructor(e){super();oe(this,e,Xl,Il,te,{flow:0,selected:1})}}const{document:Je}=wn;function Zt(n,e,t){const l=n.slice();return l[39]=e[t],l[40]=e,l[41]=t,l}function $t(n){let e,t,l=n[0],i,o,s,u,a=xt(n);return{c(){e=F("div"),t=F("div"),a.c(),v(t,"class","popups svelte-1ykl876"),v(e,"class","screen svelte-1ykl876")},m(r,h){P(r,e,h),y(e,t),a.m(t,null),o=!0,s||(u=[X(t,"click",kt(n[14])),X(e,"click",kt(n[15]))],s=!0)},p(r,h){h[0]&1&&te(l,l=r[0])?(fe(),R(a,1,1,de),ce(),a=xt(r),a.c(),C(a),a.m(t,null)):a.p(r,h)},i(r){o||(C(a),Se(()=>{i||(i=Ye(e,Ft,{},!0)),i.run(1)}),o=!0)},o(r){R(a),i||(i=Ye(e,Ft,{},!1)),i.run(0),o=!1},d(r){r&&D(e),a.d(r),r&&i&&i.end(),s=!1,Fe(u)}}}function xt(n){let e,t;return e=new bl({props:{component:n[0][0],closeSelf:n[13]}}),{c(){z(e.$$.fragment)},m(l,i){U(e,l,i),t=!0},p(l,i){const o={};i[0]&1&&(o.component=l[0][0]),e.$set(o)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function Wl(n){let e,t,l,i,o,s;return e=new ae({props:{icon:"settings",tooltip:"settings"}}),e.$on("click",n[16]),l=new ae({props:{icon:"download",disabled:n[1].length==0,disabledReason:"nothing to download",tooltip:"download as file"}}),l.$on("click",n[17]),o=new ae({props:{icon:"upload",tooltip:"import file"}}),o.$on("click",n[18]),{c(){z(e.$$.fragment),t=q(),z(l.$$.fragment),i=q(),z(o.$$.fragment)},m(u,a){U(e,u,a),P(u,t,a),U(l,u,a),P(u,i,a),U(o,u,a),s=!0},p(u,a){const r={};a[0]&2&&(r.disabled=u[1].length==0),l.$set(r)},i(u){s||(C(e.$$.fragment,u),C(l.$$.fragment,u),C(o.$$.fragment,u),s=!0)},o(u){R(e.$$.fragment,u),R(l.$$.fragment,u),R(o.$$.fragment,u),s=!1},d(u){E(e,u),u&&D(t),E(l,u),u&&D(i),E(o,u)}}}function en(n){let e,t,l;function i(u){n[19](u,n[41])}function o(){return n[20](n[41])}let s={selected:n[41]==n[2]};return n[1][n[41]]!==void 0&&(s.flow=n[1][n[41]]),e=new Kl({props:s}),Q.push(()=>x(e,"flow",i)),e.$on("click",o),{c(){z(e.$$.fragment)},m(u,a){U(e,u,a),l=!0},p(u,a){n=u;const r={};a[0]&4&&(r.selected=n[41]==n[2]),!t&&a[0]&2&&(t=!0,r.flow=n[1][n[41]],ee(()=>t=!1)),e.$set(r)},i(u){l||(C(e.$$.fragment,u),l=!0)},o(u){R(e.$$.fragment,u),l=!1},d(u){E(e,u)}}}function tn(n){let e=n[2],t,l,i=nn(n);return{c(){i.c(),t=Xe()},m(o,s){i.m(o,s),P(o,t,s),l=!0},p(o,s){s[0]&4&&te(e,e=o[2])?(fe(),R(i,1,1,de),ce(),i=nn(o),i.c(),C(i),i.m(t.parentNode,t)):i.p(o,s)},i(o){l||(C(i),l=!0)},o(o){R(i),l=!1},d(o){o&&D(t),i.d(o)}}}function nn(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b;function g(m){n[24](m)}function w(m){n[25](m)}function k(m){n[26](m)}function H(m){n[27](m)}function Z(m){n[28](m)}let M={deleteSelf:n[23]};n[1][n[2]].content!==void 0&&(M.content=n[1][n[2]].content),n[1][n[2]].children!==void 0&&(M.children=n[1][n[2]].children),n[1][n[2]].index!==void 0&&(M.index=n[1][n[2]].index),n[1][n[2]].focus!==void 0&&(M.focus=n[1][n[2]].focus),n[1][n[2]].invert!==void 0&&(M.invert=n[1][n[2]].invert),t=new cl({props:M}),Q.push(()=>x(t,"content",g)),Q.push(()=>x(t,"children",w)),Q.push(()=>x(t,"index",k)),Q.push(()=>x(t,"focus",H)),Q.push(()=>x(t,"invert",Z));function T(m){n[29](m)}let B={};n[1][n[2]]!==void 0&&(B.flow=n[1][n[2]]),h=new gl({props:B}),Q.push(()=>x(h,"flow",T));function $(m){n[30](m)}let V={};return n[1][n[2]]!==void 0&&(V.root=n[1][n[2]]),p=new Kn({props:V}),Q.push(()=>x(p,"root",$)),p.$on("focusFlow",n[4]),{c(){e=F("div"),z(t.$$.fragment),a=q(),r=F("div"),z(h.$$.fragment),d=q(),f=F("div"),z(p.$$.fragment),v(e,"class","title svelte-1ykl876"),v(r,"class","box-control svelte-1ykl876"),v(f,"class","flow svelte-1ykl876")},m(m,L){P(m,e,L),U(t,e,null),P(m,a,L),P(m,r,L),U(h,r,null),P(m,d,L),P(m,f,L),U(p,f,null),b=!0},p(m,L){const I={};L[0]&4&&(I.deleteSelf=m[23]),!l&&L[0]&6&&(l=!0,I.content=m[1][m[2]].content,ee(()=>l=!1)),!i&&L[0]&6&&(i=!0,I.children=m[1][m[2]].children,ee(()=>i=!1)),!o&&L[0]&6&&(o=!0,I.index=m[1][m[2]].index,ee(()=>o=!1)),!s&&L[0]&6&&(s=!0,I.focus=m[1][m[2]].focus,ee(()=>s=!1)),!u&&L[0]&6&&(u=!0,I.invert=m[1][m[2]].invert,ee(()=>u=!1)),t.$set(I);const N={};!c&&L[0]&6&&(c=!0,N.flow=m[1][m[2]],ee(()=>c=!1)),h.$set(N);const O={};!_&&L[0]&6&&(_=!0,O.root=m[1][m[2]],ee(()=>_=!1)),p.$set(O)},i(m){b||(C(t.$$.fragment,m),C(h.$$.fragment,m),C(p.$$.fragment,m),b=!0)},o(m){R(t.$$.fragment,m),R(h.$$.fragment,m),R(p.$$.fragment,m),b=!1},d(m){m&&D(e),E(t),m&&D(a),m&&D(r),E(h),m&&D(d),m&&D(f),E(p)}}}function Jl(n){let e,t,l,i,o,s,u,a,r,h,c,d,f,p,_,b,g,w,k,H,Z,M=n[0].length>0&&$t(n);r=new gt({props:{$$slots:{default:[Wl]},$$scope:{ctx:n}}});let T=n[1],B=[];for(let m=0;m<T.length;m+=1)B[m]=en(Zt(n,T,m));const $=m=>R(B[m],1,1,()=>{B[m]=null});_=new ae({props:{text:"aff",palette:"accent",icon:"add",tooltip:"create new aff flow",shortcut:["control","n"]}}),_.$on("click",n[21]),g=new ae({props:{text:"neg",palette:"accent-secondary",icon:"add",tooltip:"create new neg flow",shortcut:["control","shift","n"]}}),g.$on("click",n[22]);let V=n[1].length>0&&n[1][n[2]]&&tn(n);return{c(){e=q(),t=F("main"),M&&M.c(),l=q(),i=F("input"),o=q(),s=F("div"),u=F("div"),a=F("div"),z(r.$$.fragment),h=q(),c=F("div"),d=F("ul");for(let m=0;m<B.length;m+=1)B[m].c();f=q(),p=F("div"),z(_.$$.fragment),b=q(),z(g.$$.fragment),w=q(),V&&V.c(),v(i,"id","uploadId"),v(i,"type","file"),i.hidden=!0,v(a,"class","header svelte-1ykl876"),v(p,"class","add-tab svelte-1ykl876"),v(d,"class","svelte-1ykl876"),v(c,"class","tabs svelte-1ykl876"),v(u,"class","sidebar svelte-1ykl876"),v(s,"class","grid svelte-1ykl876"),v(t,"class","palette-plain"),K(t,"activeMouse",Ee)},m(m,L){P(m,e,L),P(m,t,L),M&&M.m(t,null),y(t,l),y(t,i),y(t,o),y(t,s),y(s,u),y(u,a),U(r,a,null),y(u,h),y(u,c),y(c,d);for(let I=0;I<B.length;I+=1)B[I].m(d,null);y(d,f),y(d,p),U(_,p,null),y(p,b),U(g,p,null),y(s,w),V&&V.m(s,null),k=!0,H||(Z=[X(Je.body,"keydown",n[8]),X(Je.body,"mousemove",n[7]),X(Je.body,"dragenter",Gl),X(Je.body,"drop",n[9]),X(i,"change",n[10])],H=!0)},p(m,L){m[0].length>0?M?(M.p(m,L),L[0]&1&&C(M,1)):(M=$t(m),M.c(),C(M,1),M.m(t,l)):M&&(fe(),R(M,1,1,()=>{M=null}),ce());const I={};if(L[0]&2|L[1]&2048&&(I.$$scope={dirty:L,ctx:m}),r.$set(I),L[0]&14){T=m[1];let N;for(N=0;N<T.length;N+=1){const O=Zt(m,T,N);B[N]?(B[N].p(O,L),C(B[N],1)):(B[N]=en(O),B[N].c(),C(B[N],1),B[N].m(d,f))}for(fe(),N=T.length;N<B.length;N+=1)$(N);ce()}m[1].length>0&&m[1][m[2]]?V?(V.p(m,L),L[0]&6&&C(V,1)):(V=tn(m),V.c(),C(V,1),V.m(s,null)):V&&(fe(),R(V,1,1,()=>{V=null}),ce())},i(m){if(!k){C(M),C(r.$$.fragment,m);for(let L=0;L<T.length;L+=1)C(B[L]);C(_.$$.fragment,m),C(g.$$.fragment,m),C(V),k=!0}},o(m){R(M),R(r.$$.fragment,m),B=B.filter(Boolean);for(let L=0;L<B.length;L+=1)R(B[L]);R(_.$$.fragment,m),R(g.$$.fragment,m),R(V),k=!1},d(m){m&&D(e),m&&D(t),M&&M.d(),E(r),Ne(B,m),E(_),E(g),V&&V.d(),H=!1,Fe(Z)}}}function Gl(n){n.preventDefault()}function Yl(n,e,t){let l,i,o,s;me(n,Be,S=>t(31,l=S)),me(n,ne,S=>t(1,i=S)),me(n,Re,S=>t(2,o=S)),me(n,Ee,S=>t(32,s=S));var u=this&&this.__awaiter||function(S,W,Y,re){function lt(Le){return Le instanceof Y?Le:new Y(function(De){De(Le)})}return new(Y||(Y=Promise))(function(Le,De){function it(ke){try{Ve(re.next(ke))}catch(ze){De(ze)}}function ot(ke){try{Ve(re.throw(ke))}catch(ze){De(ze)}}function Ve(ke){ke.done?Le(ke.value):lt(ke.value).then(it,ot)}Ve((re=re.apply(S,W||[])).next())})};let a=window.matchMedia("(prefers-color-scheme: dark)");function r(){J.data.colorTheme.value==0&&document.body.classList.toggle("dark",a.matches)}a.addEventListener("change",r),Oe(J.subscribe(["colorTheme"],function(S){J.data.colorTheme.value==1?document.body.classList.remove("dark"):J.data.colorTheme.value==2?document.body.classList.add("dark"):r()}));let h={accentHue:{name:"accent-hue",unit:""},accentSecondaryHue:{name:"accent-secondary-hue",unit:""},transitionSpeed:{name:"transition-speed",unit:"ms"},columnWidth:{name:"column-width",unit:"px"},borderRadius:{name:"border-radius",unit:"px"},padding:{name:"padding",unit:"px"},fontSize:{name:"font-size",unit:"rem"},fontWeight:{name:"font-weight",unit:""},gap:{name:"gap",unit:"px"}};Oe(J.subscribe(Object.keys(h),function(S){let W=h[S].name,Y=J.data[S].value,re=h[S].unit;document.body.style.setProperty(`--${W}`,`${Y}${re}`)})),Oe(J.subscribe(["fontFamily"],function(S){let W=J.data.fontFamily;if(W.type!="radio")return;let Y=W.value,re;W.detail.customOption&&W.detail.options.length==Y?re=W.detail.customOptionValue:W.detail.options[Y]&&(re=W.detail.options[Y]),re?document.body.style.setProperty("--font-family",`'${re}', 'Merriweather Sans', sans-serif`):document.body.style.setProperty("--font-family","'Merriweather Sans', sans-serif")}));function c(S){he(Re,o=S,o),d()}function d(){var S,W;let Y=((S=i[o])===null||S===void 0?void 0:S.lastFocus)&&ge((W=i[o])===null||W===void 0?void 0:W.lastFocus);Y?Y.focus=!0:he(ne,i[o].focus=!0,i),ne.set(i)}function f(){var S,W;if(i.length>0){let Y=((S=i[o])===null||S===void 0?void 0:S.lastFocus)&&ge((W=i[o])===null||W===void 0?void 0:W.lastFocus);Y||(Y=i[o]),Y.focus=!1,Y=Y,document.activeElement.blur()}}function p(S){f(),i.push(Rn(i.length,S)),he(Re,o=i.length-1,o),ne.set(i)}function _(S){return u(this,void 0,void 0,function*(){f(),i.splice(S,1),S==0?he(Re,o=0,o):he(Re,o=S-1,o),ne.set(i),i.length>0&&d()})}function b(S){he(Ee,s=!0,s)}function g(S){he(Ee,s=!1,s),S.ctrlKey&&S.shiftKey&&S.key=="N"?(S.preventDefault(),p("neg")):S.ctrlKey&&S.key=="n"&&(S.preventDefault(),p("aff")),S.metaKey&&S.shiftKey&&S.key=="z"?(S.preventDefault(),i[o].history.redo()):S.metaKey&&S.key=="z"&&(S.preventDefault(),i[o].history.undo())}function w(S){S.preventDefault();let W=S.dataTransfer.files[0],Y=new FileReader;Y.onload=function(re){H(re.target.result.toString())},Y.readAsText(W,"UTF-8")}function k(){let S=document.getElementById("uploadId").files[0],W=new FileReader;W.onload=function(Y){H(Y.target.result.toString())},W.readAsText(S,"UTF-8")}function H(S){let W=JSON.parse(S);he(ne,i=[],i);for(let Y of W)Y.history=new an,i.push(Y)}window.addEventListener("dragover",function(S){S.preventDefault()},!1),window.addEventListener("drop",function(S){S.preventDefault()},!1);let Z=[];function M(S){Z.splice(S,1),t(0,Z)}function T(S){Z.push(S),t(0,Z)}window.addEventListener("beforeunload",function(S){if(i.length>0&&!l){let W="Are you sure you want to leave?";return(S||window.event).returnValue=W,W}});const B=()=>M(0),$=()=>{M(0)},V=()=>{M(0)},m=()=>T(zl),L=()=>T(yl),I=()=>T(Cl);function N(S,W){n.$$.not_equal(i[W],S)&&(i[W]=S,ne.set(i))}const O=S=>c(S),j=()=>p("aff"),se=()=>p("neg"),$e=()=>_(o);function xe(S){n.$$.not_equal(i[o].content,S)&&(i[o].content=S,ne.set(i))}function be(S){n.$$.not_equal(i[o].children,S)&&(i[o].children=S,ne.set(i))}function Pe(S){n.$$.not_equal(i[o].index,S)&&(i[o].index=S,ne.set(i))}function et(S){n.$$.not_equal(i[o].focus,S)&&(i[o].focus=S,ne.set(i))}function tt(S){n.$$.not_equal(i[o].invert,S)&&(i[o].invert=S,ne.set(i))}function je(S){n.$$.not_equal(i[o],S)&&(i[o]=S,ne.set(i))}function nt(S){n.$$.not_equal(i[o],S)&&(i[o]=S,ne.set(i))}return[Z,i,o,c,d,p,_,b,g,w,k,M,T,B,$,V,m,L,I,N,O,j,se,$e,xe,be,Pe,et,tt,je,nt]}class Ql extends ie{constructor(e){super();oe(this,e,Yl,Jl,te,{},null,[-1,-1])}}new Ql({target:document.body});
