import{S as te,i as ne,s as ee,e as D,a as F,b as N,c as We,l as J,n as ue,d as j,r as ge,f as kt,g as de,h as Y,j as Xt,w as Ee,q as ye,k as Wt,m as Z,o as O,p as ie,t as V,u as L,v as he,x as Le,y as R,z as I,A as De,B as $,C as E,D as K,E as q,F as se,G as re,H as Jt,I as Te,J as ce,K as yt,L as Je,M as Ft,N as Yt,O as _e,P as Fe,Q as Se,R as Ye,T as Ct,U as Oe,V as Ve,W as Ie,X as Ke,Y as Me,Z as ke,_ as Gt,$ as Qt,a0 as Ge,a1 as Zt,a2 as Qe,a3 as Re}from"./vendor.3af8b478.js";const $t=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};$t();function xt(l){let e,n,t,o;return{c(){e=D("textarea"),F(e,"spellcheck","false"),F(e,"placeholder",l[1]),F(e,"style",n=`--white-space:${l[2]};`),F(e,"class","svelte-1t3wlx8")},m(i,u){N(i,e,u),We(e,l[0]),l[12](e),t||(o=[J(e,"input",l[11]),J(e,"load",l[4]),J(e,"input",l[4]),J(e,"beforeinput",l[7]),J(e,"keydown",l[8]),J(e,"focus",l[9]),J(e,"blur",l[10])],t=!0)},p(i,[u]){u&2&&F(e,"placeholder",i[1]),u&4&&n!==(n=`--white-space:${i[2]};`)&&F(e,"style",n),u&1&&We(e,i[0])},i:ue,o:ue,d(i){i&&j(e),l[12](null),t=!1,ge(o)}}}function en(l,e,n){let{value:t}=e,{placeholder:o}=e,{nowrap:i=!1}=e,u,r;function s(){n(3,r.value=r.value.replace(/\r?\n|\r/g,""),r),n(3,r.style.height="0px",r),n(3,r.style.height=r.scrollHeight+"px",r)}kt(function(){s()});const a=()=>{r.focus()};function f(_){de.call(this,l,_)}function c(_){de.call(this,l,_)}function p(_){de.call(this,l,_)}function d(_){de.call(this,l,_)}function k(){t=this.value,n(0,t)}function P(_){Y[_?"unshift":"push"](()=>{r=_,n(3,r)})}return l.$$set=_=>{"value"in _&&n(0,t=_.value),"placeholder"in _&&n(1,o=_.placeholder),"nowrap"in _&&n(5,i=_.nowrap)},l.$$.update=()=>{l.$$.dirty&32&&(i?n(2,u="nowrap"):n(2,u="auto"))},[t,o,u,r,s,i,a,f,c,p,d,k,P]}class Lt extends te{constructor(e){super();ne(this,e,en,xt,ee,{value:0,placeholder:1,nowrap:5,focus:6})}get focus(){return this.$$.ctx[6]}}function tn(l){let e,n=l[1].svg+"",t;return{c(){e=Xt("svg"),F(e,"style",t=`width:${l[0]};height:${l[0]};`),F(e,"viewBox","0 0 "+100+" "+100),F(e,"fill","none"),F(e,"stroke","var(--text)"),F(e,"class","svelte-2n1qug")},m(o,i){N(o,e,i),e.innerHTML=n},p(o,[i]){i&1&&t!==(t=`width:${o[0]};height:${o[0]};`)&&F(e,"style",t)},i:ue,o:ue,d(o){o&&j(e)}}}function nn(l,e,n){let{name:t}=e,{size:o="1rem"}=e,u=[{name:"arrowRight",svg:'<path d="M27 7L74 50L27 93" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowLeft",svg:'<path d="M74 93L27 50L74 7" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowUp",svg:'<path d="M7.5 73.5L50.5 26.5L93.5 73.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"arrowDown",svg:'<path d="M93.5 26.5L50.5 73.5L7.5 26.5" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>'},{name:"delete",svg:`<path d="M78.5685 22L22 78.5685" stroke-width="10" stroke-linecap="round"/>
<path d="M22 22L78.5685 78.5685" stroke-width="10" stroke-linecap="round"/>`},{name:"add",svg:`<path d="M50 15L50 85" stroke-width="10" stroke-linecap="round"/>
<path d="M15 50H85" stroke-width="10" stroke-linecap="round"/>`},{name:"download",svg:`<path d="M71 45L50 68L29 45" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 66L50 14" stroke-width="10" stroke-linecap="round"/>`},{name:"upload",svg:`<path d="M29 37L50 14L71 37" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M20 85L80 85" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M50 16L50 68" stroke-width="10" stroke-linecap="round"/>`},{name:"addUp",svg:`<path d="M85 25V25C87.7614 25 90 27.2386 90 30V70C90 75.5228 85.5228 80 80 80H20C14.4772 80 10 75.5228 10 70L10 30C10 27.2386 12.2386 25 15 25V25" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M35 25H65" stroke-width="10" stroke-linecap="round"/>
<path d="M50 40V10" stroke-width="10" stroke-linecap="round"/>`},{name:"addDown",svg:`<path d="M15 75V75C12.2386 75 10 72.7614 10 70L10 30C10 24.4772 14.4772 20 20 20L80 20C85.5228 20 90 24.4772 90 30L90 70C90 72.7614 87.7614 75 85 75V75" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M65 75H35" stroke-width="10" stroke-linecap="round"/>
<path d="M50 60L50 90" stroke-width="10" stroke-linecap="round"/>`},{name:"addRight",svg:`<path d="M75 85V85C75 87.7614 72.7614 90 70 90H30C24.4772 90 20 85.5228 20 80V20C20 14.4772 24.4772 10 30 10H70C72.7614 10 75 12.2386 75 15V15" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M75 35V65" stroke-width="10" stroke-linecap="round"/>
<path d="M60 50H90" stroke-width="10" stroke-linecap="round"/>`},{name:"undo",svg:`<path d="M10 47H70C81.0457 47 90 55.9543 90 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M36 70L10 47L36 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"redo",svg:`<path d="M90 47H30C18.9543 47 10 55.9543 10 67V77" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M64 70L90 47L64 24" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>`},{name:"settings",svg:`<line x1="10" y1="50" x2="90" y2="50" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="80" x2="90" y2="80" stroke-width="10" stroke-linecap="round"/>
<line x1="10" y1="20" x2="90" y2="20" stroke-width="10" stroke-linecap="round"/>
<circle cx="26.25" cy="50.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="80.25" r="6.25" stroke-width="10"/>
<circle cx="71.25" cy="20.25" r="6.25" stroke-width="10"/>`}].find(r=>r.name===t);return l.$$set=r=>{"name"in r&&n(2,t=r.name),"size"in r&&n(0,o=r.size)},[o,u,t]}class St extends te{constructor(e){super();ne(this,e,nn,tn,ee,{name:2,size:0})}}const Q=Ee([]);let we=Ee(0);const ln=Ee({aff:{columns:["1AC","1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!1},neg:{columns:["1NC","2AC","2NC/1NR","1AR","2NR","2AR"],invert:!0}});let Be;Q.subscribe(l=>{Be=l});let Ue;ln.subscribe(l=>{Ue=l});function Ae(l,e,n){return{content:"",children:[],index:l,level:e,focus:n}}function on(l,e){return{content:"",level:0,columns:Ue[e].columns,invert:Ue[e].invert,focus:!0,index:l,lastFocus:void 0,children:[Ae(0,1,!1)],history:new At}}function fe(l,e=0){let n=Be[l[0]];for(let t=1;t<l.length-e;t++)n=n.children[l[t]];return n}class At{constructor(){this.index=-1,this.data=[],this.lastFocus=void 0}lastAction(){return this.data[this.index]}add(e,n,t){this.resolveAllPending();let o={type:e,path:n,lastFocus:[...this.lastFocus],nextFocus:void 0,other:t,pending:!1};this.data=this.data.slice(0,this.index+1),this.data.push(o),this.index=this.data.length-1}addPending(e,n,t){this.data=this.data.slice(0,this.index+1),this.data.push({type:e,path:n,lastFocus:void 0,nextFocus:void 0,other:t,pending:!0}),this.index=this.data.length-1}resolveAllPending(){let e=!1;for(let n=0;n<this.data.length;n++){let t=this.data[n];if(t.pending){let o={type:t.type,path:t.path,lastFocus:t.path,nextFocus:t.path,other:t.other,pending:!1},i=!0;o.type=="edit"&&(o.other.lastContent=t.other.lastContent,o.other.nextContent=t.other.getNextContent(),o.other.lastContent==o.other.nextContent&&(i=!1),t.other.createEditBreak()),i?(e=!0,this.data[n]=o):(this.data[n]=null,this.index>=n&&(this.index-=1))}}this.data=this.data.filter(n=>n!=null),e&&console.log("resolving all pending")}addFocus(e){this.lastFocus=e,this.lastAction()&&this.lastAction().nextFocus==null&&(this.lastAction().nextFocus=e)}undoAction(e){console.log("undo",this.index,this.data);let n=fe(e.path,1),t=e.path[e.path.length-1],o=[...n.children];e.type=="add"?o.splice(t,1):e.type=="delete"?o.splice(t,0,e.other.box):e.type=="edit"&&(o[t].content=e.other.lastContent);for(let i=t;i<o.length;i++)o[i].index=i;n.children=[...o]}redoAction(e){console.log("redo",this.index,this.data);let n=fe(e.path,1),t=e.path[e.path.length-1],o=[...n.children];e.type=="add"?o.splice(t,0,Ae(t,n.level+1,!1)):e.type=="delete"?o.splice(t,1):e.type=="edit"&&(o[t].content=e.other.nextContent);for(let i=t;i<o.length;i++)o[i].index=i;n.children=[...o]}focus(e){let n=fe(e);n.focus=!0}undo(){if(this.resolveAllPending(),this.index>-1){let e=this.lastAction();this.undoAction(e),this.focus(e.lastFocus),Q.set(Be),this.index-=1}}redo(){if(this.resolveAllPending(),this.index<this.data.length-1){this.index+=1;let e=this.lastAction();this.redoAction(e),this.focus(e.nextFocus),Q.set(Be)}}}const ae=300;function sn(l,{duration:e=ae}){const n=l.clientHeight;return{duration:e,css:t=>{const o=ye(t);return`
        height: ${o*n}px;
        overflow: visible;
        clip-path: inset(${(1-o)*n-2}px 0 -${n}px 0);
        transform: translateY(${(1-o)*-n}px);
        `}}}function rn(l,{duration:e=ae}){const n=l.clientHeight;return{duration:e,css:t=>{const o=ye(t);return`
        height: ${o*n}px;
        overflow: visible;
        clip-path: inset(${(1-o)*n}px 0 0 0);
        transform: translateY(${(1-o)*-n}px);
        `}}}function un(l,{delay:e=0,duration:n=ae}){return{delay:e,duration:n,css:t=>`
        opacity:${t};
      `}}function Ze(l,{delay:e=0,duration:n=ae}){return{delay:e,duration:n,css:t=>{const o=ye(t);return`
        clip-path:inset(0% ${(1-o)*100}% 0% 0%);
        transform: translateX(${(1-o)*50}%);
      `}}}function $e(l,{delay:e=0,duration:n=ae}){return{delay:e,duration:n,css:t=>{const o=Wt(t);return`
      clip-path:inset(0% ${(1-o)*100}% 0% 0%);
      transform: translateX(${(1-o)*50}%)`}}}function fn(l,{duration:e=ae}){const n=l.clientHeight;return{duration:e,css:t=>{const o=ye(t);return`
        height: ${n*o}px;
        overflow: hidden;
        transform: translateX(${-100*(1-o)}%);
      `}}}function xe(l,{delay:e=0,duration:n=ae}){return{delay:e,duration:n,css:t=>`
        transform: scale(${ye(t)});
        opacity: ${t};
      `}}function et(l,{delay:e=0,duration:n=ae}){return{delay:e,duration:n,css:t=>`
        transform: scale(${ye(t)});
        opacity: ${t};
      `}}function tt(l,e,n){const t=l.slice();return t[52]=e[n],t[53]=e,t[54]=n,t}function nt(l){let e,n,t,o,i,u,r;return n=new St({props:{name:"add"}}),{c(){e=D("button"),O(n.$$.fragment),F(e,"class",t=ie(`add palette-${l[13]}`)+" svelte-172kgc0")},m(s,a){N(s,e,a),V(n,e,null),i=!0,u||(r=[J(e,"click",l[33]),J(e,"mousedown",ze)],u=!0)},p(s,a){(!i||a[0]&8192&&t!==(t=ie(`add palette-${s[13]}`)+" svelte-172kgc0"))&&F(e,"class",t)},i(s){i||(L(n.$$.fragment,s),s&&(o||he(()=>{o=Le(e,un,{}),o.start()})),i=!0)},o(s){R(n.$$.fragment,s),i=!1},d(s){s&&j(e),I(n),u=!1,ge(r)}}}function lt(l,e){let n,t,o,i,u,r,s,a;function f(_){e[34](_,e[52])}function c(_){e[35](_,e[52])}function p(_){e[36](_,e[52])}function d(_){e[37](_,e[52])}function k(_){e[38](_,e[52])}let P={addSibling:e[21],deleteSelf:e[22],focusSibling:e[23],focusParent:e[24],dispatchSelfFocus:e[16],parentPath:e[8]};return e[52].content!==void 0&&(P.content=e[52].content),e[52].children!==void 0&&(P.children=e[52].children),e[52].index!==void 0&&(P.index=e[52].index),e[52].level!==void 0&&(P.level=e[52].level),e[52].focus!==void 0&&(P.focus=e[52].focus),t=new Mt({props:P}),Y.push(()=>Z(t,"content",f)),Y.push(()=>Z(t,"children",c)),Y.push(()=>Z(t,"index",p)),Y.push(()=>Z(t,"level",d)),Y.push(()=>Z(t,"focus",k)),t.$on("saveFocus",e[39]),{key:l,first:null,c(){n=De(),O(t.$$.fragment),this.first=n},m(_,S){N(_,n,S),V(t,_,S),a=!0},p(_,S){e=_;const A={};S[0]&256&&(A.parentPath=e[8]),!o&&S[0]&4&&(o=!0,A.content=e[52].content,$(()=>o=!1)),!i&&S[0]&4&&(i=!0,A.children=e[52].children,$(()=>i=!1)),!u&&S[0]&4&&(u=!0,A.index=e[52].index,$(()=>u=!1)),!r&&S[0]&4&&(r=!0,A.level=e[52].level,$(()=>r=!1)),!s&&S[0]&4&&(s=!0,A.focus=e[52].focus,$(()=>s=!1)),t.$set(A)},i(_){a||(L(t.$$.fragment,_),a=!0)},o(_){R(t.$$.fragment,_),a=!1},d(_){_&&j(n),I(t,_)}}}function an(l){let e,n,t,o,i,u,r,s,a,f,c,p,d,k,P,_,S=[],A=new Map,H,z,w,M,C,X;function v(m){l[30](m)}let g={placeholder:l[11]};l[1]!==void 0&&(g.value=l[1]),s=new Lt({props:g}),Y.push(()=>Z(s,"value",v)),l[31](s),s.$on("keydown",l[19]),s.$on("beforeinput",l[20]),s.$on("blur",l[18]),s.$on("focus",l[17]);let h=l[2].length==0&&l[5]<l[14]&&nt(l),T=l[2];const U=m=>m[52];for(let m=0;m<T.length;m+=1){let B=tt(l,T,m),b=U(B);A.set(b,S[m]=lt(b,B))}return{c(){e=D("div"),n=D("div"),t=D("div"),o=D("div"),r=E(),O(s.$$.fragment),f=E(),c=D("div"),k=E(),h&&h.c(),P=E(),_=D("ul");for(let m=0;m<S.length;m+=1)S[m].c();F(o,"class","line above svelte-172kgc0"),K(o,"left",l[2].length>0),K(o,"right",l[4]==0&&l[5]>1),F(c,"class","line below svelte-172kgc0"),F(t,"class","barcontainer svelte-172kgc0"),F(n,"class","content svelte-172kgc0"),F(n,"style",`--this-background: ${l[15]}`),K(n,"root",l[3]),K(n,"left",l[2].length>0),K(n,"right",l[4]==0&&l[5]>1),F(_,"class","children svelte-172kgc0"),F(e,"class",H=ie(`top palette-${l[12]}`)+" svelte-172kgc0"),K(e,"empty",l[2].length==0),K(e,"focus",l[0]),K(e,"childFocus",l[10]),K(e,"highlight",l[10]||l[0])},m(m,B){N(m,e,B),q(e,n),q(n,t),q(t,o),q(t,r),V(s,t,null),q(t,f),q(t,c),q(n,k),h&&h.m(n,null),q(e,P),q(e,_);for(let b=0;b<S.length;b+=1)S[b].m(_,null);M=!0,C||(X=[J(o,"click",l[29]),J(o,"mousedown",ze),J(c,"click",l[32]),J(c,"mousedown",ze)],C=!0)},p(m,B){B[0]&4&&K(o,"left",m[2].length>0),B[0]&48&&K(o,"right",m[4]==0&&m[5]>1);const b={};B[0]&2048&&(b.placeholder=m[11]),!a&&B[0]&2&&(a=!0,b.value=m[1],$(()=>a=!1)),s.$set(b),m[2].length==0&&m[5]<m[14]?h?(h.p(m,B),B[0]&36&&L(h,1)):(h=nt(m),h.c(),L(h,1),h.m(n,null)):h&&(se(),R(h,1,1,()=>{h=null}),re()),B[0]&8&&K(n,"root",m[3]),B[0]&4&&K(n,"left",m[2].length>0),B[0]&48&&K(n,"right",m[4]==0&&m[5]>1),B[0]&31523076&&(T=m[2],se(),S=Jt(S,B,U,1,m,T,A,_,Yt,lt,null,tt),re()),(!M||B[0]&4096&&H!==(H=ie(`top palette-${m[12]}`)+" svelte-172kgc0"))&&F(e,"class",H),B[0]&4100&&K(e,"empty",m[2].length==0),B[0]&4097&&K(e,"focus",m[0]),B[0]&5120&&K(e,"childFocus",m[10]),B[0]&5121&&K(e,"highlight",m[10]||m[0])},i(m){if(!M){m&&he(()=>{u&&u.end(1),i=Le(o,Ze,{}),i.start()}),L(s.$$.fragment,m),m&&he(()=>{d&&d.end(1),p=Le(c,Ze,{}),p.start()}),L(h);for(let B=0;B<T.length;B+=1)L(S[B]);m&&he(()=>{w&&w.end(1),z=Le(e,sn,{}),z.start()}),M=!0}},o(m){i&&i.invalidate(),m&&(u=Te(o,$e,{})),R(s.$$.fragment,m),p&&p.invalidate(),m&&(d=Te(c,$e,{})),R(h);for(let B=0;B<S.length;B+=1)R(S[B]);z&&z.invalidate(),m&&(w=Te(e,rn,{})),M=!1},d(m){m&&j(e),m&&u&&u.end(),l[31](null),I(s),m&&d&&d.end(),h&&h.d();for(let B=0;B<S.length;B+=1)S[B].d();m&&w&&w.end(),C=!1,ge(X)}}}function ze(l){l.preventDefault()}function cn(l,e,n){let t,o,i;ce(l,we,y=>n(42,o=y)),ce(l,Q,y=>n(43,i=y));const u=yt();let{root:r=!1}=e,{content:s=""}=e,{children:a}=e,{index:f}=e,{level:c}=e,{focus:p=!1}=e,{parentPath:d=[]}=e,{addSibling:k=()=>!1}=e,{deleteSelf:P=()=>{}}=e,{focusSibling:_=()=>{}}=e,{focusParent:S=()=>{}}=e,{dispatchSelfFocus:A=()=>{}}=e;const{getinvert:H}=Je("invert");let z=H();const{getColumnCount:w}=Je("columnCount");let M=w(),C,X,v=!1,g=-1;function h(y,W){W?(n(10,v=!0),g=y):y==g&&(n(10,v=!1),g=-1)}let T=!1;function U(){p?(A(f,!0),c>=1&&(i[o].history.addFocus([...t]),u("saveFocus",t),C&&C.focus())):(A(f,!1),T=!1)}Ft(U);function m(){p&&(A(f,!0),i[o].history.addFocus([...t]))}let B="";function b(){p||Ce()}function x(){p&&n(0,p=!1)}class G{constructor(W,le=()=>!0,be=!0,ve=!0,Kt=!0){this.require=le,this.stopRepeat=be,this.preventDefault=ve,this.blur=Kt,this.handle=function(Xe){return!this.require()||(this.preventDefault&&Xe.preventDefault(),this.stopRepeat&&Xe.repeat==!0)?!1:(this.blur&&n(0,p=!1),W(),!0)}}}const me={shift:{Enter:new G(()=>{qe(0,0)&&pe(0,0)})},other:{Enter:new G(()=>{k(f,1)&&_(f,1)}),Backspace:new G(()=>{P(f)},()=>s.length==0),ArrowUp:new G(()=>_(f,-1)),ArrowDown:new G(()=>_(f,1)),ArrowLeft:new G(()=>S()),ArrowRight:new G(()=>{a.length>0?pe(0,0):_(f,1)})}};function Pt(y){y.shiftKey&&me.shift[y.key]?me.shift[y.key].handle(y):me.other[y.key]&&me.other[y.key].handle(y)}function Bt(y){T||(console.log("created pneding",t),i[o].history.addPending("edit",[...t],{lastContent:s,getNextContent(){return s},createEditBreak(){T=!1}})),T=!0}function qe(y,W){let le=y+W;if(c<M){let be=[...a];be.splice(le,0,Ae(le,c+1,!0));for(let ve=le;ve<be.length;ve++)be[ve].index=ve;return i[o].history.add("add",[...t,le]),n(2,a=[...be]),!0}else return Ce(),!1}function Dt(y){if(a.length>1||c>=1){let W=[...a];i[o].history.add("delete",[...t,y],{box:W[y]}),W[y].focus=!1,W.splice(y,1);for(let le=0;le<W.length;le++)W[le].index=le;return n(2,a=[...W]),a[y-1]?pe(y-1,0):a.length==0?Ce():y==0&&pe(0,0),!0}else return pe(0,0),!1}function pe(y,W){let le=y+W;if(le<0){Ce();return}le>=a.length?a[a.length-1].children.length>0?n(2,a[a.length-1].children[0].focus=!0,a):n(2,a[y].focus=!0,a):n(2,a[le].focus=!0,a),n(2,a)}function Ce(){n(0,p=!0)}let Ne,je;const qt=()=>{k(f,0)&&_(f,0)};function Nt(y){s=y,n(1,s)}function jt(y){Y[y?"unshift":"push"](()=>{C=y,n(9,C)})}const Tt=()=>{k(f,1)&&_(f,1)},Ht=()=>{qe(0,0),pe(0,0)};function Ut(y,W){l.$$.not_equal(W.content,y)&&(W.content=y,n(2,a))}function zt(y,W){l.$$.not_equal(W.children,y)&&(W.children=y,n(2,a))}function Et(y,W){l.$$.not_equal(W.index,y)&&(W.index=y,n(2,a))}function Ot(y,W){l.$$.not_equal(W.level,y)&&(W.level=y,n(2,a))}function Vt(y,W){l.$$.not_equal(W.focus,y)&&(W.focus=y,n(2,a))}function It(y){de.call(this,l,y)}return l.$$set=y=>{"root"in y&&n(3,r=y.root),"content"in y&&n(1,s=y.content),"children"in y&&n(2,a=y.children),"index"in y&&n(4,f=y.index),"level"in y&&n(5,c=y.level),"focus"in y&&n(0,p=y.focus),"parentPath"in y&&n(25,d=y.parentPath),"addSibling"in y&&n(6,k=y.addSibling),"deleteSelf"in y&&n(26,P=y.deleteSelf),"focusSibling"in y&&n(7,_=y.focusSibling),"focusParent"in y&&n(27,S=y.focusParent),"dispatchSelfFocus"in y&&n(28,A=y.dispatchSelfFocus)},l.$$.update=()=>{l.$$.dirty[0]&33554448&&n(8,t=[...d,f]),l.$$.dirty[0]&1&&U(),l.$$.dirty[0]&256&&m(),l.$$.dirty[0]&48&&(c==1&&f==0?n(11,B="type here"):n(11,B="")),l.$$.dirty[0]&32&&(c%2==0&&!z||c%2==1&&z?n(12,Ne="accent-secondary"):n(12,Ne="accent")),l.$$.dirty[0]&32&&(c%2==0&&!z||c%2==1&&z?n(13,je="accent"):n(13,je="accent-secondary"))},[p,s,a,r,f,c,k,_,t,C,v,B,Ne,je,M,X,h,b,x,Pt,Bt,qe,Dt,pe,Ce,d,P,S,A,qt,Nt,jt,Tt,Ht,Ut,zt,Et,Ot,Vt,It]}class Mt extends te{constructor(e){super();ne(this,e,cn,an,ee,{root:3,content:1,children:2,index:4,level:5,focus:0,parentPath:25,addSibling:6,deleteSelf:26,focusSibling:7,focusParent:27,dispatchSelfFocus:28},null,[-1,-1])}}function dn(l){let e,n;return{c(){e=D("div"),n=_e(l[0]),F(e,"class","top svelte-10zixka")},m(t,o){N(t,e,o),q(e,n)},p(t,[o]){o&1&&Fe(n,t[0])},i:ue,o:ue,d(t){t&&j(e)}}}function hn(l,e,n){let{column:t}=e;return l.$$set=o=>{"column"in o&&n(0,t=o.column)},[t]}class _n extends te{constructor(e){super();ne(this,e,hn,dn,ee,{column:0})}}function ot(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function it(l,e,n){const t=l.slice();return t[11]=e[n],t[10]=n,t}function st(l){let e,n,t,o,i;return n=new _n({props:{column:l[11]}}),n.$on("focusFlow",l[7]),{c(){e=D("h1"),O(n.$$.fragment),t=E(),F(e,"class",o=ie(`header palette-${!!(l[10]%2)==l[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666")},m(u,r){N(u,e,r),V(n,e,null),q(e,t),i=!0},p(u,r){const s={};r&1&&(s.column=u[11]),n.$set(s),(!i||r&1&&o!==(o=ie(`header palette-${!!(u[10]%2)==u[0].invert?"accent":"accent-secondary"}`)+" svelte-150s666"))&&F(e,"class",o)},i(u){i||(L(n.$$.fragment,u),i=!0)},o(u){R(n.$$.fragment,u),i=!1},d(u){u&&j(e),I(n)}}}function rt(l){let e,n;return{c(){e=D("div"),F(e,"class",n=ie(`column palette-${!!(l[10]%2)==l[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")},m(t,o){N(t,e,o)},p(t,o){o&1&&n!==(n=ie(`column palette-${!!(t[10]%2)==t[0].invert?"plain":"plain-secondary"}`)+" svelte-150s666")&&F(e,"class",n)},d(t){t&&j(e)}}}function pn(l){let e,n,t,o,i,u,r,s,a,f,c,p,d,k,P;function _(h){l[2](h)}function S(h){l[3](h)}function A(h){l[4](h)}function H(h){l[5](h)}function z(h){l[6](h)}let w={root:!0};l[0].content!==void 0&&(w.content=l[0].content),l[0].children!==void 0&&(w.children=l[0].children),l[0].index!==void 0&&(w.index=l[0].index),l[0].level!==void 0&&(w.level=l[0].level),l[0].focus!==void 0&&(w.focus=l[0].focus),o=new Mt({props:w}),Y.push(()=>Z(o,"content",_)),Y.push(()=>Z(o,"children",S)),Y.push(()=>Z(o,"index",A)),Y.push(()=>Z(o,"level",H)),Y.push(()=>Z(o,"focus",z)),o.$on("saveFocus",l[1]);let M=l[0].columns,C=[];for(let h=0;h<M.length;h+=1)C[h]=st(it(l,M,h));const X=h=>R(C[h],1,1,()=>{C[h]=null});let v=l[0].columns,g=[];for(let h=0;h<v.length;h+=1)g[h]=rt(ot(l,v,h));return{c(){e=D("div"),n=D("div"),t=D("div"),O(o.$$.fragment),f=E(),c=D("div");for(let h=0;h<C.length;h+=1)C[h].c();p=E(),d=D("div");for(let h=0;h<g.length;h+=1)g[h].c();F(t,"class","content svelte-150s666"),F(c,"class","headers svelte-150s666"),F(d,"class","columns svelte-150s666"),F(n,"class","viewer svelte-150s666"),F(e,"class","top svelte-150s666"),F(e,"style",k=`--column-count: ${l[0].columns.length};`),K(e,"invert",l[0].invert)},m(h,T){N(h,e,T),q(e,n),q(n,t),V(o,t,null),q(n,f),q(n,c);for(let U=0;U<C.length;U+=1)C[U].m(c,null);q(n,p),q(n,d);for(let U=0;U<g.length;U+=1)g[U].m(d,null);P=!0},p(h,[T]){const U={};if(!i&&T&1&&(i=!0,U.content=h[0].content,$(()=>i=!1)),!u&&T&1&&(u=!0,U.children=h[0].children,$(()=>u=!1)),!r&&T&1&&(r=!0,U.index=h[0].index,$(()=>r=!1)),!s&&T&1&&(s=!0,U.level=h[0].level,$(()=>s=!1)),!a&&T&1&&(a=!0,U.focus=h[0].focus,$(()=>a=!1)),o.$set(U),T&1){M=h[0].columns;let m;for(m=0;m<M.length;m+=1){const B=it(h,M,m);C[m]?(C[m].p(B,T),L(C[m],1)):(C[m]=st(B),C[m].c(),L(C[m],1),C[m].m(c,null))}for(se(),m=M.length;m<C.length;m+=1)X(m);re()}if(T&1){v=h[0].columns;let m;for(m=0;m<v.length;m+=1){const B=ot(h,v,m);g[m]?g[m].p(B,T):(g[m]=rt(B),g[m].c(),g[m].m(d,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=v.length}(!P||T&1&&k!==(k=`--column-count: ${h[0].columns.length};`))&&F(e,"style",k),T&1&&K(e,"invert",h[0].invert)},i(h){if(!P){L(o.$$.fragment,h);for(let T=0;T<M.length;T+=1)L(C[T]);P=!0}},o(h){R(o.$$.fragment,h),C=C.filter(Boolean);for(let T=0;T<C.length;T+=1)R(C[T]);P=!1},d(h){h&&j(e),I(o),Se(C,h),Se(g,h)}}}function gn(l,e,n){let{root:t}=e;Ye("invert",{getinvert:()=>t.invert}),Ye("columnCount",{getColumnCount:()=>t.columns.length});function o(c){n(0,t.lastFocus=c.detail,t),n(0,t)}function i(c){l.$$.not_equal(t.content,c)&&(t.content=c,n(0,t))}function u(c){l.$$.not_equal(t.children,c)&&(t.children=c,n(0,t))}function r(c){l.$$.not_equal(t.index,c)&&(t.index=c,n(0,t))}function s(c){l.$$.not_equal(t.level,c)&&(t.level=c,n(0,t))}function a(c){l.$$.not_equal(t.focus,c)&&(t.focus=c,n(0,t))}function f(c){de.call(this,l,c)}return l.$$set=c=>{"root"in c&&n(0,t=c.root)},[t,o,i,u,r,s,a,f]}class mn extends te{constructor(e){super();ne(this,e,gn,pn,ee,{root:0})}}function bn(l){let e,n,t,o,i,u;function r(a){l[11](a)}let s={nowrap:!0,placeholder:"type name here"};return l[1]!==void 0&&(s.value=l[1]),t=new Lt({props:s}),Y.push(()=>Z(t,"value",r)),l[12](t),t.$on("blur",l[5]),t.$on("focus",l[6]),t.$on("keydown",l[7]),t.$on("beforeinput",l[8]),{c(){e=D("div"),n=D("div"),O(t.$$.fragment),F(n,"class","content svelte-gvyz0w"),K(n,"focus",l[0]),F(e,"class",i=ie(`top palette-${l[4]}`)+" svelte-gvyz0w"),K(e,"invert",l[2])},m(a,f){N(a,e,f),q(e,n),V(t,n,null),u=!0},p(a,[f]){const c={};!o&&f&2&&(o=!0,c.value=a[1],$(()=>o=!1)),t.$set(c),f&1&&K(n,"focus",a[0]),(!u||f&16&&i!==(i=ie(`top palette-${a[4]}`)+" svelte-gvyz0w"))&&F(e,"class",i),f&20&&K(e,"invert",a[2])},i(a){u||(L(t.$$.fragment,a),u=!0)},o(a){R(t.$$.fragment,a),u=!1},d(a){a&&j(e),l[12](null),I(t)}}}function vn(l,e,n){let t,o,i;ce(l,we,M=>n(15,o=M)),ce(l,Q,M=>n(16,i=M));const u=yt();let{content:r}=e,{children:s}=e,{index:a}=e,{focus:f}=e,{invert:c}=e,p;function d(){f&&n(0,f=!1)}function k(){f||n(0,f=!0)}function P(M){(M.key=="Enter"||M.key=="ArrowDown")&&(M.preventDefault(),s.length>0&&(n(9,s[0].focus=!0,s),n(0,f=!1)))}let _=!1;function S(){f?(i[o].history.addFocus([...t]),u("saveFocus",t),p&&p.focus()):_=!1}Ft(S);function A(M){_||i[o].history.addPending("edit",[...t],{lastContent:r,getNextContent(){return r},createEditBreak(){_=!1}}),_=!0}let H="plain";function z(M){r=M,n(1,r)}function w(M){Y[M?"unshift":"push"](()=>{p=M,n(3,p)})}return l.$$set=M=>{"content"in M&&n(1,r=M.content),"children"in M&&n(9,s=M.children),"index"in M&&n(10,a=M.index),"focus"in M&&n(0,f=M.focus),"invert"in M&&n(2,c=M.invert)},l.$$.update=()=>{l.$$.dirty&1024&&(t=[a]),l.$$.dirty&1&&S(),l.$$.dirty&4&&(c?n(4,H="accent-secondary"):n(4,H="accent"))},[f,r,c,p,H,d,k,P,A,s,a,z,w]}class wn extends te{constructor(e){super();ne(this,e,vn,bn,ee,{content:1,children:9,index:10,focus:0,invert:2})}}function ut(l,e,n){const t=l.slice();return t[1]=e[n],t[3]=n,t}function kn(l){let e;return{c(){e=_e("+")},m(n,t){N(n,e,t)},d(n){n&&j(e)}}}function ft(l){let e,n,t=l[1]+"",o,i=l[3]!=0&&kn();return{c(){i&&i.c(),e=E(),n=D("kbd"),o=_e(t),F(n,"class","key svelte-eb7adw")},m(u,r){i&&i.m(u,r),N(u,e,r),N(u,n,r),q(n,o)},p(u,r){r&1&&t!==(t=u[1]+"")&&Fe(o,t)},d(u){i&&i.d(u),u&&j(e),u&&j(n)}}}function yn(l){let e,n=l[0],t=[];for(let o=0;o<n.length;o+=1)t[o]=ft(ut(l,n,o));return{c(){e=D("span");for(let o=0;o<t.length;o+=1)t[o].c();F(e,"class","top svelte-eb7adw")},m(o,i){N(o,e,i);for(let u=0;u<t.length;u+=1)t[u].m(e,null)},p(o,[i]){if(i&1){n=o[0];let u;for(u=0;u<n.length;u+=1){const r=ut(o,n,u);t[u]?t[u].p(r,i):(t[u]=ft(r),t[u].c(),t[u].m(e,null))}for(;u<t.length;u+=1)t[u].d(1);t.length=n.length}},i:ue,o:ue,d(o){o&&j(e),Se(t,o)}}}function Fn(l,e,n){let{keys:t}=e;return l.$$set=o=>{"keys"in o&&n(0,t=o.keys)},[t]}class Cn extends te{constructor(e){super();ne(this,e,Fn,yn,ee,{keys:0})}}function Ln(l){let e;const n=l[13].default,t=Oe(n,l,l[12],null);return{c(){t&&t.c()},m(o,i){t&&t.m(o,i),e=!0},p(o,i){t&&t.p&&(!e||i&4096)&&Ve(t,n,o,o[12],e?Ke(n,o[12],i,null):Ie(o[12]),null)},i(o){e||(L(t,o),e=!0)},o(o){R(t,o),e=!1},d(o){t&&t.d(o)}}}function Sn(l){let e,n,t,o,i,u;const r=l[13].default,s=Oe(r,l,l[12],null);let a=l[3]&&at(l);return{c(){e=D("div"),s&&s.c(),n=E(),a&&a.c(),t=De(),F(e,"class","element svelte-1p8z6bu")},m(f,c){N(f,e,c),s&&s.m(e,null),l[14](e),N(f,n,c),a&&a.m(f,c),N(f,t,c),o=!0,i||(u=[J(e,"mouseover",l[8]),J(e,"focus",l[8]),J(e,"mouseleave",l[10]),J(e,"blur",l[10]),J(e,"mousemove",l[9])],i=!0)},p(f,c){s&&s.p&&(!o||c&4096)&&Ve(s,r,f,f[12],o?Ke(r,f[12],c,null):Ie(f[12]),null),f[3]?a?(a.p(f,c),c&8&&L(a,1)):(a=at(f),a.c(),L(a,1),a.m(t.parentNode,t)):a&&(se(),R(a,1,1,()=>{a=null}),re())},i(f){o||(L(s,f),L(a),o=!0)},o(f){R(s,f),R(a),o=!1},d(f){f&&j(e),s&&s.d(f),l[14](null),f&&j(n),a&&a.d(f),f&&j(t),i=!1,ge(u)}}}function at(l){let e,n,t,o,i,u,r,s=!l[2]&&l[1]&&ct(l),a=l[2]&&dt(l);return{c(){e=D("div"),n=D("div"),t=_e(l[0]),o=E(),s&&s.c(),i=E(),a&&a.c(),F(n,"class","content"),Me(e,"top",l[5]+"px"),Me(e,"left",l[4]+"px"),F(e,"class","tooltip svelte-1p8z6bu")},m(f,c){N(f,e,c),q(e,n),q(n,t),q(e,o),s&&s.m(e,null),q(e,i),a&&a.m(e,null),l[15](e),r=!0},p(f,c){(!r||c&1)&&Fe(t,f[0]),!f[2]&&f[1]?s?(s.p(f,c),c&6&&L(s,1)):(s=ct(f),s.c(),L(s,1),s.m(e,i)):s&&(se(),R(s,1,1,()=>{s=null}),re()),f[2]?a?a.p(f,c):(a=dt(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!r||c&32)&&Me(e,"top",f[5]+"px"),(!r||c&16)&&Me(e,"left",f[4]+"px")},i(f){r||(L(s),he(()=>{u||(u=ke(e,xe,{},!0)),u.run(1)}),r=!0)},o(f){R(s),u||(u=ke(e,xe,{},!1)),u.run(0),r=!1},d(f){f&&j(e),s&&s.d(),a&&a.d(),l[15](null),f&&u&&u.end()}}}function ct(l){let e,n;return e=new Cn({props:{keys:l[1]}}),{c(){O(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},p(t,o){const i={};o&2&&(i.keys=t[1]),e.$set(i)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function dt(l){let e,n;return{c(){e=D("div"),n=_e(l[2]),F(e,"class","disabled svelte-1p8z6bu")},m(t,o){N(t,e,o),q(e,n)},p(t,o){o&4&&Fe(n,t[2])},d(t){t&&j(e)}}}function An(l){let e,n,t,o;const i=[Sn,Ln],u=[];function r(s,a){return s[0]?0:1}return e=r(l),n=u[e]=i[e](l),{c(){n.c(),t=De()},m(s,a){u[e].m(s,a),N(s,t,a),o=!0},p(s,[a]){let f=e;e=r(s),e===f?u[e].p(s,a):(se(),R(u[f],1,1,()=>{u[f]=null}),re(),n=u[e],n?n.p(s,a):(n=u[e]=i[e](s),n.c()),L(n,1),n.m(t.parentNode,t))},i(s){o||(L(n),o=!0)},o(s){R(n),o=!1},d(s){u[e].d(s),s&&j(t)}}}function Mn(l,e,n){let{$$slots:t={},$$scope:o}=e;var i=this&&this.__awaiter||function(w,M,C,X){function v(g){return g instanceof C?g:new C(function(h){h(g)})}return new(C||(C=Promise))(function(g,h){function T(B){try{m(X.next(B))}catch(b){h(b)}}function U(B){try{m(X.throw(B))}catch(b){h(b)}}function m(B){B.done?g(B.value):v(B.value).then(T,U)}m((X=X.apply(w,M||[])).next())})};let{content:u}=e,{shortcut:r}=e,{disabled:s=!1}=e,{layout:a="bottom"}=e,f=!1,c=0,p=0,d,k;function P(){n(3,f=!0),_()}function _(){if(k){let w=d.getBoundingClientRect();n(4,c=w.left-k.offsetWidth/2+w.width/2),c<4?n(4,c=4):c+k.offsetWidth>window.innerWidth-4&&n(4,c=window.innerWidth-k.offsetWidth-4),a=="bottom"?n(5,p=w.bottom+4):n(5,p=w.top-k.offsetHeight-4)}}function S(){return i(this,void 0,void 0,function*(){yield Ct(),_()})}function A(){n(3,f=!1)}function H(w){Y[w?"unshift":"push"](()=>{d=w,n(6,d)})}function z(w){Y[w?"unshift":"push"](()=>{k=w,n(7,k)})}return l.$$set=w=>{"content"in w&&n(0,u=w.content),"shortcut"in w&&n(1,r=w.shortcut),"disabled"in w&&n(2,s=w.disabled),"layout"in w&&n(11,a=w.layout),"$$scope"in w&&n(12,o=w.$$scope)},l.$$.update=()=>{l.$$.dirty&2055&&S()},[u,r,s,f,c,p,d,k,P,_,A,a,o,t,H,z]}class Rn extends te{constructor(e){super();ne(this,e,Mn,An,ee,{content:0,shortcut:1,disabled:2,layout:11})}}function ht(l){let e,n;return{c(){e=D("p"),n=_e(l[1]),F(e,"class","svelte-rfejcw")},m(t,o){N(t,e,o),q(e,n)},p(t,o){o&2&&Fe(n,t[1])},d(t){t&&j(e)}}}function Pn(l){let e,n,t,o,i,u,r,s;n=new St({props:{name:l[0],size:"var(--button-size)"}});let a=l[1]&&ht(l);return{c(){e=D("button"),O(n.$$.fragment),t=E(),a&&a.c(),F(e,"class",o=ie(`top palette-${l[3]?"disabled":l[4]}`)+" svelte-rfejcw"),e.disabled=i=!!l[3],K(e,"disabled",l[3])},m(f,c){N(f,e,c),V(n,e,null),q(e,t),a&&a.m(e,null),u=!0,r||(s=[J(e,"click",l[8]),J(e,"mousedown",Dn)],r=!0)},p(f,c){const p={};c&1&&(p.name=f[0]),n.$set(p),f[1]?a?a.p(f,c):(a=ht(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!u||c&24&&o!==(o=ie(`top palette-${f[3]?"disabled":f[4]}`)+" svelte-rfejcw"))&&F(e,"class",o),(!u||c&8&&i!==(i=!!f[3]))&&(e.disabled=i),c&24&&K(e,"disabled",f[3])},i(f){u||(L(n.$$.fragment,f),u=!0)},o(f){R(n.$$.fragment,f),u=!1},d(f){f&&j(e),I(n),a&&a.d(),r=!1,ge(s)}}}function Bn(l){let e,n;return e=new Rn({props:{content:l[2],disabled:l[3]&&l[6],shortcut:l[5],layout:l[7],$$slots:{default:[Pn]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},p(t,[o]){const i={};o&4&&(i.content=t[2]),o&72&&(i.disabled=t[3]&&t[6]),o&32&&(i.shortcut=t[5]),o&128&&(i.layout=t[7]),o&539&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Dn(l){l.preventDefault()}function qn(l,e,n){let{icon:t}=e,{text:o=null}=e,{tooltip:i=null}=e,{disabled:u=!1}=e,{palette:r="plain"}=e,{shortcut:s=null}=e,{disabledReason:a="disabled"}=e,{tooltipLayout:f="bottom"}=e;function c(p){de.call(this,l,p)}return l.$$set=p=>{"icon"in p&&n(0,t=p.icon),"text"in p&&n(1,o=p.text),"tooltip"in p&&n(2,i=p.tooltip),"disabled"in p&&n(3,u=p.disabled),"palette"in p&&n(4,r=p.palette),"shortcut"in p&&n(5,s=p.shortcut),"disabledReason"in p&&n(6,a=p.disabledReason),"tooltipLayout"in p&&n(7,f=p.tooltipLayout)},[t,o,i,u,r,s,a,f,c]}class oe extends te{constructor(e){super();ne(this,e,qn,Bn,ee,{icon:0,text:1,tooltip:2,disabled:3,palette:4,shortcut:5,disabledReason:6,tooltipLayout:7})}}function Nn(l){let e,n;const t=l[1].default,o=Oe(t,l,l[0],null);return{c(){e=D("div"),o&&o.c(),F(e,"class","top svelte-p5tbxi")},m(i,u){N(i,e,u),o&&o.m(e,null),n=!0},p(i,[u]){o&&o.p&&(!n||u&1)&&Ve(o,t,i,i[0],n?Ke(t,i[0],u,null):Ie(i[0]),null)},i(i){n||(L(o,i),n=!0)},o(i){R(o,i),n=!1},d(i){i&&j(e),o&&o.d(i)}}}function jn(l,e,n){let{$$slots:t={},$$scope:o}=e;return l.$$set=i=>{"$$scope"in i&&n(0,o=i.$$scope)},[o,t]}class Rt extends te{constructor(e){super();ne(this,e,jn,Nn,ee,{})}}function Tn(l){let e,n,t,o,i,u,r,s,a,f,c,p;return e=new oe({props:{icon:"undo",disabled:l[2][l[1]].history.index==-1,tooltip:"undo",shortcut:["cmd","z"],disabledReason:"nothing to undo"}}),e.$on("click",l[7]),t=new oe({props:{disabled:l[2][l[1]].history.index==l[2][l[1]].history.data.length-1,icon:"redo",tooltip:"redo",shortcut:["cmd","shift","z"],disabledReason:"nothing to redo"}}),t.$on("click",l[8]),i=new oe({props:{icon:"addRight",disabled:!l[0],disabledReason:Pe,tooltip:"add response",shortcut:["shift","enter"]}}),i.$on("click",l[4]),r=new oe({props:{icon:"addUp",disabled:!l[0],disabledReason:Pe,tooltip:"add arguement above"}}),r.$on("click",l[9]),a=new oe({props:{icon:"addDown",disabled:!l[0],disabledReason:Pe,tooltip:"add arguement below",shortcut:["enter"]}}),a.$on("click",l[10]),c=new oe({props:{icon:"delete",disabled:!l[0],disabledReason:Pe,tooltip:"delete selected"}}),c.$on("click",l[3]),{c(){O(e.$$.fragment),n=E(),O(t.$$.fragment),o=E(),O(i.$$.fragment),u=E(),O(r.$$.fragment),s=E(),O(a.$$.fragment),f=E(),O(c.$$.fragment)},m(d,k){V(e,d,k),N(d,n,k),V(t,d,k),N(d,o,k),V(i,d,k),N(d,u,k),V(r,d,k),N(d,s,k),V(a,d,k),N(d,f,k),V(c,d,k),p=!0},p(d,k){const P={};k&6&&(P.disabled=d[2][d[1]].history.index==-1),e.$set(P);const _={};k&6&&(_.disabled=d[2][d[1]].history.index==d[2][d[1]].history.data.length-1),t.$set(_);const S={};k&1&&(S.disabled=!d[0]),i.$set(S);const A={};k&1&&(A.disabled=!d[0]),r.$set(A);const H={};k&1&&(H.disabled=!d[0]),a.$set(H);const z={};k&1&&(z.disabled=!d[0]),c.$set(z)},i(d){p||(L(e.$$.fragment,d),L(t.$$.fragment,d),L(i.$$.fragment,d),L(r.$$.fragment,d),L(a.$$.fragment,d),L(c.$$.fragment,d),p=!0)},o(d){R(e.$$.fragment,d),R(t.$$.fragment,d),R(i.$$.fragment,d),R(r.$$.fragment,d),R(a.$$.fragment,d),R(c.$$.fragment,d),p=!1},d(d){I(e,d),d&&j(n),I(t,d),d&&j(o),I(i,d),d&&j(u),I(r,d),d&&j(s),I(a,d),d&&j(f),I(c,d)}}}function Hn(l){let e,n,t,o,i,u;return t=new Rt({props:{$$slots:{default:[Tn]},$$scope:{ctx:l}}}),{c(){e=D("div"),n=D("div"),O(t.$$.fragment),F(n,"class","buttons-wrapper svelte-psed4t"),F(e,"class","top svelte-psed4t")},m(r,s){N(r,e,s),q(e,n),V(t,n,null),o=!0,i||(u=J(e,"mousedown",Un),i=!0)},p(r,[s]){const a={};s&8199&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){o||(L(t.$$.fragment,r),o=!0)},o(r){R(t.$$.fragment,r),o=!1},d(r){r&&j(e),I(t),i=!1,u()}}}let Pe="no cell selected";function Un(l){l.preventDefault()}function zn(l,e,n){let t,o;ce(l,we,_=>n(1,t=_)),ce(l,Q,_=>n(2,o=_));var i=this&&this.__awaiter||function(_,S,A,H){function z(w){return w instanceof A?w:new A(function(M){M(w)})}return new(A||(A=Promise))(function(w,M){function C(g){try{v(H.next(g))}catch(h){M(h)}}function X(g){try{v(H.throw(g))}catch(h){M(h)}}function v(g){g.done?w(g.value):z(g.value).then(C,X)}v((H=H.apply(_,S||[])).next())})};let{flow:u}=e,r=!1;function s(){return i(this,void 0,void 0,function*(){if(yield Ct(),u.lastFocus&&u.lastFocus.length>1){let _=fe(u.lastFocus);n(0,r=_==null?void 0:_.focus)}})}kt(function(){s()});function a(){if(!r)return;let _=fe(u.lastFocus,1),S=fe(u.lastFocus),A=[..._.children];if(A.length>1||_.level>=1){o[t].history.add("delete",u.lastFocus,{box:A[S.index]}),A.splice(S.index,1);for(let H=S.index;H<A.length;H++)A[H].index=H;A.length<=0?_.focus=!0:S.index>=A.length?A[A.length-1].focus=!0:A[S.index].focus=!0,_.children=[...A],n(6,u)}}function f(){if(!r)return;let _=fe(u.lastFocus),S=[..._.children];if(_.level<u.columns.length){S.splice(0,0,Ae(0,_.level+1,!1));for(let A=0;A<S.length;A++)S[A].index=A;o[t].history.add("add",[...u.lastFocus,0]),_.children=[...S],n(6,u)}}function c(_){if(!r)return;let S=fe(u.lastFocus,1),A=fe(u.lastFocus),H=[...S.children];H.splice(A.index+_,0,Ae(A.index+_,A.level,!1));for(let w=A.index;w<H.length;w++)H[w].index=w;let z=[...u.lastFocus];_==0?(z[z.length-1]-=0,n(6,u.lastFocus[u.lastFocus.length-1]+=1,u)):z[z.length-1]+=1,o[t].history.add("add",z),S.children=[...H],n(6,u)}const p=()=>o[t].history.undo(),d=()=>o[t].history.redo(),k=()=>c(0),P=()=>c(1);return l.$$set=_=>{"flow"in _&&n(6,u=_.flow)},[r,t,o,a,f,c,u,p,d,k,P]}class En extends te{constructor(e){super();ne(this,e,zn,Hn,ee,{flow:6})}}function On(l){let e,n,t,o,i,u,r;t=new oe({props:{icon:"delete",tooltip:"close"}}),t.$on("click",function(){Gt(l[1])&&l[1].apply(this,arguments)});var s=l[0];function a(f){return{props:{closePopup:f[1]}}}return s&&(i=new s(a(l))),{c(){e=D("div"),n=D("div"),O(t.$$.fragment),o=E(),i&&O(i.$$.fragment),F(n,"class","close svelte-1i1p7so"),F(e,"class","top svelte-1i1p7so")},m(f,c){N(f,e,c),q(e,n),V(t,n,null),q(e,o),i&&V(i,e,null),r=!0},p(f,[c]){l=f;const p={};if(c&2&&(p.closePopup=l[1]),s!==(s=l[0])){if(i){se();const d=i;R(d.$$.fragment,1,0,()=>{I(d,1)}),re()}s?(i=new s(a(l)),O(i.$$.fragment),L(i.$$.fragment,1),V(i,e,null)):i=null}else s&&i.$set(p)},i(f){r||(L(t.$$.fragment,f),i&&L(i.$$.fragment,f),he(()=>{u||(u=ke(e,et,{},!0)),u.run(1)}),r=!0)},o(f){R(t.$$.fragment,f),i&&R(i.$$.fragment,f),u||(u=ke(e,et,{},!1)),u.run(0),r=!1},d(f){f&&j(e),I(t),i&&I(i),f&&u&&u.end()}}}function Vn(l,e,n){let{component:t}=e,{closeSelf:o}=e;return l.$$set=i=>{"component"in i&&n(0,t=i.component),"closeSelf"in i&&n(1,o=i.closeSelf)},[t,o]}class In extends te{constructor(e){super();ne(this,e,Vn,On,ee,{component:0,closeSelf:1})}}function Kn(l){let e,n,t,o,i,u,r,s,a,f,c;return t=new oe({props:{icon:"download",text:"download as JSON",tooltip:"saves JSON file on your computer",tooltipLayout:"top",disabled:l[0].length==0,disabledReason:"nothing to download"}}),t.$on("click",l[1]),s=new oe({props:{icon:"download",text:"download as XLSX",tooltip:"saves XLSX file on your computer",tooltipLayout:"top",disabled:l[0].length==0,disabledReason:"nothing to download"}}),s.$on("click",l[2]),{c(){e=D("div"),n=D("section"),O(t.$$.fragment),o=E(),i=D("ul"),i.innerHTML=`<li>Can reopen file in this editor</li> 
      <li>More data is saved (last focused cell etc.)</li>`,u=E(),r=D("section"),O(s.$$.fragment),a=E(),f=D("ul"),f.innerHTML="<li>Anyone can view it</li>",F(i,"class","svelte-87ygo3"),F(n,"class","json svelte-87ygo3"),F(f,"class","svelte-87ygo3"),F(r,"class","xlsx svelte-87ygo3"),F(e,"class","top svelte-87ygo3")},m(p,d){N(p,e,d),q(e,n),V(t,n,null),q(n,o),q(n,i),q(e,u),q(e,r),V(s,r,null),q(r,a),q(r,f),c=!0},p(p,[d]){const k={};d&1&&(k.disabled=p[0].length==0),t.$set(k);const P={};d&1&&(P.disabled=p[0].length==0),s.$set(P)},i(p){c||(L(t.$$.fragment,p),L(s.$$.fragment,p),c=!0)},o(p){R(t.$$.fragment,p),R(s.$$.fragment,p),c=!1},d(p){p&&j(e),I(t),I(s)}}}function Xn(l,e,n){let t;ce(l,Q,r=>n(0,t=r));let{closePopup:o}=e;function i(){let r=JSON.stringify(t,(a,f)=>{if(a!=="history")return f}),s=document.createElement("a");s.setAttribute("href","data:text/json;charset=utf-8, "+encodeURIComponent(r)),s.setAttribute("download","flow.json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),o()}function u(){let r=new Qt.exports.Workbook;for(let s of t){let f=function(d,k,P){for(;!a[P];){let _=[];for(let S=0;S<s.columns.length;S++)_.push("");a.push(_)}k>=0&&(a[P][k]=d.content),d.children.forEach(function(_,S){f(_,k+1,P+S)})},a=[];f(s,-1,0);let c=s.content;c.length>=31&&(c=c.substring(0,31));let p=r.addWorksheet(c);p.columns=s.columns.map(function(d){return{header:d,width:25}});for(let d=0;d<a.length;d++){let k=p.getRow(d+2);for(let P=0;P<a[d].length;P++)k.getCell(P+1).value=a[d][P]}p.getRow(1).font={bold:!0}}r.xlsx.writeBuffer({base64:!0}).then(function(s){let a=document.createElement("a"),f=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=URL.createObjectURL(f);a.href=c,a.download="flow.xlsx",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(c)},0)}).catch(function(s){console.log(s.message)}),o()}return l.$$set=r=>{"closePopup"in r&&n(3,o=r.closePopup)},[t,i,u,o]}class Wn extends te{constructor(e){super();ne(this,e,Xn,Kn,ee,{closePopup:3})}}function Jn(l){let e,n,t,o,i;return n=new oe({props:{icon:"upload",text:"choose file from computer",tooltip:"upload a JSON file from your computer",tooltipLayout:"top"}}),n.$on("click",Yn),{c(){e=D("div"),O(n.$$.fragment),t=E(),o=D("p"),o.textContent="Or drag and drop a JSON file anywhere in this window",F(o,"class","svelte-1vv9x21"),F(e,"class","top svelte-1vv9x21")},m(u,r){N(u,e,r),V(n,e,null),q(e,t),q(e,o),i=!0},p:ue,i(u){i||(L(n.$$.fragment,u),i=!0)},o(u){R(n.$$.fragment,u),i=!1},d(u){u&&j(e),I(n)}}}function Yn(){document.getElementById("uploadId").click()}function Gn(l,e,n){let{closePopup:t}=e;return l.$$set=o=>{"closePopup"in o&&n(0,t=o.closePopup)},[t]}class Qn extends te{constructor(e){super();ne(this,e,Gn,Jn,ee,{closePopup:0})}}function Zn(l){let e;return{c(){e=_e("no name")},m(n,t){N(n,e,t)},p:ue,d(n){n&&j(e)}}}function $n(l){let e=l[0].content+"",n;return{c(){n=_e(e)},m(t,o){N(t,n,o)},p(t,o){o&1&&e!==(e=t[0].content+"")&&Fe(n,e)},d(t){t&&j(n)}}}function xn(l){let e,n,t,o,i,u;function r(f,c){return f[0].content?$n:Zn}let s=r(l),a=s(l);return{c(){e=D("div"),n=D("button"),a.c(),F(n,"class","svelte-wa6l8r"),K(n,"selected",l[1]),K(n,"empty",l[0].content.length==0),F(e,"class",t=ie(`top palette-${l[2]}`)+" svelte-wa6l8r"),K(e,"invert",l[0].invert)},m(f,c){N(f,e,c),q(e,n),a.m(n,null),i||(u=J(n,"click",l[3]),i=!0)},p(f,[c]){s===(s=r(f))&&a?a.p(f,c):(a.d(1),a=s(f),a&&(a.c(),a.m(n,null))),c&2&&K(n,"selected",f[1]),c&1&&K(n,"empty",f[0].content.length==0),c&4&&t!==(t=ie(`top palette-${f[2]}`)+" svelte-wa6l8r")&&F(e,"class",t),c&5&&K(e,"invert",f[0].invert)},i(f){o||he(()=>{o=Le(e,fn,{}),o.start()})},o:ue,d(f){f&&j(e),a.d(),i=!1,u()}}}function el(l,e,n){let{flow:t}=e,{selected:o}=e,i;function u(r){de.call(this,l,r)}return l.$$set=r=>{"flow"in r&&n(0,t=r.flow),"selected"in r&&n(1,o=r.selected)},l.$$.update=()=>{l.$$.dirty&1&&(t.invert?n(2,i="accent-secondary"):n(2,i="accent"))},[t,o,i,u]}class tl extends te{constructor(e){super();ne(this,e,el,xn,ee,{flow:0,selected:1})}}const{document:He}=Zt;function _t(l,e,n){const t=l.slice();return t[29]=e[n],t[30]=e,t[31]=n,t}function pt(l,e,n){const t=l.slice();return t[32]=e[n],t[31]=n,t}function gt(l){let e,n,t,o,i,u,r=l[0],s=[];for(let f=0;f<r.length;f+=1)s[f]=mt(pt(l,r,f));const a=f=>R(s[f],1,1,()=>{s[f]=null});return{c(){e=D("div"),n=D("div");for(let f=0;f<s.length;f+=1)s[f].c();F(n,"class","popups svelte-13rvab6"),F(e,"class","screen svelte-13rvab6")},m(f,c){N(f,e,c),q(e,n);for(let p=0;p<s.length;p+=1)s[p].m(n,null);o=!0,i||(u=[J(n,"click",Ge(l[12])),J(e,"click",Ge(l[13]))],i=!0)},p(f,c){if(l=f,c[0]&513){r=l[0];let p;for(p=0;p<r.length;p+=1){const d=pt(l,r,p);s[p]?(s[p].p(d,c),L(s[p],1)):(s[p]=mt(d),s[p].c(),L(s[p],1),s[p].m(n,null))}for(se(),p=r.length;p<s.length;p+=1)a(p);re()}},i(f){if(!o){for(let c=0;c<r.length;c+=1)L(s[c]);he(()=>{t||(t=ke(e,Qe,{duration:ae},!0)),t.run(1)}),o=!0}},o(f){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)R(s[c]);t||(t=ke(e,Qe,{duration:ae},!1)),t.run(0),o=!1},d(f){f&&j(e),Se(s,f),f&&t&&t.end(),i=!1,ge(u)}}}function mt(l){let e,n;function t(){return l[11](l[31])}return e=new In({props:{component:l[32],closeSelf:t}}),{c(){O(e.$$.fragment)},m(o,i){V(e,o,i),n=!0},p(o,i){l=o;const u={};i[0]&1&&(u.component=l[32]),e.$set(u)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){R(e.$$.fragment,o),n=!1},d(o){I(e,o)}}}function nl(l){let e,n,t,o,i,u;return e=new oe({props:{icon:"settings",tooltip:"settings"}}),t=new oe({props:{icon:"download",disabled:l[1].length==0,disabledReason:"nothing to download",tooltip:"download as file"}}),t.$on("click",l[14]),i=new oe({props:{icon:"upload",tooltip:"import file"}}),i.$on("click",l[15]),{c(){O(e.$$.fragment),n=E(),O(t.$$.fragment),o=E(),O(i.$$.fragment)},m(r,s){V(e,r,s),N(r,n,s),V(t,r,s),N(r,o,s),V(i,r,s),u=!0},p(r,s){const a={};s[0]&2&&(a.disabled=r[1].length==0),t.$set(a)},i(r){u||(L(e.$$.fragment,r),L(t.$$.fragment,r),L(i.$$.fragment,r),u=!0)},o(r){R(e.$$.fragment,r),R(t.$$.fragment,r),R(i.$$.fragment,r),u=!1},d(r){I(e,r),r&&j(n),I(t,r),r&&j(o),I(i,r)}}}function bt(l){let e,n,t;function o(r){l[16](r,l[31])}function i(){return l[17](l[31])}let u={selected:l[31]==l[2]};return l[1][l[31]]!==void 0&&(u.flow=l[1][l[31]]),e=new tl({props:u}),Y.push(()=>Z(e,"flow",o)),e.$on("click",i),{c(){O(e.$$.fragment)},m(r,s){V(e,r,s),t=!0},p(r,s){l=r;const a={};s[0]&4&&(a.selected=l[31]==l[2]),!n&&s[0]&2&&(n=!0,a.flow=l[1][l[31]],$(()=>n=!1)),e.$set(a)},i(r){t||(L(e.$$.fragment,r),t=!0)},o(r){R(e.$$.fragment,r),t=!1},d(r){I(e,r)}}}function vt(l){let e,n,t,o,i,u,r,s,a,f,c,p,d=l[2],k,P;function _(v){l[20](v)}function S(v){l[21](v)}function A(v){l[22](v)}function H(v){l[23](v)}function z(v){l[24](v)}let w={};l[1][l[2]].content!==void 0&&(w.content=l[1][l[2]].content),l[1][l[2]].children!==void 0&&(w.children=l[1][l[2]].children),l[1][l[2]].index!==void 0&&(w.index=l[1][l[2]].index),l[1][l[2]].focus!==void 0&&(w.focus=l[1][l[2]].focus),l[1][l[2]].invert!==void 0&&(w.invert=l[1][l[2]].invert),n=new wn({props:w}),Y.push(()=>Z(n,"content",_)),Y.push(()=>Z(n,"children",S)),Y.push(()=>Z(n,"index",A)),Y.push(()=>Z(n,"focus",H)),Y.push(()=>Z(n,"invert",z));function M(v){l[25](v)}let C={};l[1][l[2]]!==void 0&&(C.flow=l[1][l[2]]),f=new En({props:C}),Y.push(()=>Z(f,"flow",M));let X=wt(l);return{c(){e=D("div"),O(n.$$.fragment),s=E(),a=D("div"),O(f.$$.fragment),p=E(),X.c(),k=De(),F(e,"class","title svelte-13rvab6"),F(a,"class","box-control svelte-13rvab6")},m(v,g){N(v,e,g),V(n,e,null),N(v,s,g),N(v,a,g),V(f,a,null),N(v,p,g),X.m(v,g),N(v,k,g),P=!0},p(v,g){const h={};!t&&g[0]&6&&(t=!0,h.content=v[1][v[2]].content,$(()=>t=!1)),!o&&g[0]&6&&(o=!0,h.children=v[1][v[2]].children,$(()=>o=!1)),!i&&g[0]&6&&(i=!0,h.index=v[1][v[2]].index,$(()=>i=!1)),!u&&g[0]&6&&(u=!0,h.focus=v[1][v[2]].focus,$(()=>u=!1)),!r&&g[0]&6&&(r=!0,h.invert=v[1][v[2]].invert,$(()=>r=!1)),n.$set(h);const T={};!c&&g[0]&6&&(c=!0,T.flow=v[1][v[2]],$(()=>c=!1)),f.$set(T),g[0]&4&&ee(d,d=v[2])?(se(),R(X,1,1,ue),re(),X=wt(v),X.c(),L(X),X.m(k.parentNode,k)):X.p(v,g)},i(v){P||(L(n.$$.fragment,v),L(f.$$.fragment,v),L(X),P=!0)},o(v){R(n.$$.fragment,v),R(f.$$.fragment,v),R(X),P=!1},d(v){v&&j(e),I(n),v&&j(s),v&&j(a),I(f),v&&j(p),v&&j(k),X.d(v)}}}function wt(l){let e,n,t,o;function i(r){l[26](r)}let u={};return l[1][l[2]]!==void 0&&(u.root=l[1][l[2]]),n=new mn({props:u}),Y.push(()=>Z(n,"root",i)),n.$on("focusFlow",l[4]),{c(){e=D("div"),O(n.$$.fragment),F(e,"class","flow svelte-13rvab6")},m(r,s){N(r,e,s),V(n,e,null),o=!0},p(r,s){const a={};!t&&s[0]&6&&(t=!0,a.root=r[1][r[2]],$(()=>t=!1)),n.$set(a)},i(r){o||(L(n.$$.fragment,r),o=!0)},o(r){R(n.$$.fragment,r),o=!1},d(r){r&&j(e),I(n)}}}function ll(l){let e,n,t,o,i,u,r,s,a,f,c,p,d,k,P,_,S,A,H,z,w=l[0].length>0&&gt(l);s=new Rt({props:{$$slots:{default:[nl]},$$scope:{ctx:l}}});let M=l[1],C=[];for(let g=0;g<M.length;g+=1)C[g]=bt(_t(l,M,g));const X=g=>R(C[g],1,1,()=>{C[g]=null});k=new oe({props:{text:"on case",palette:"accent",icon:"add",tooltip:"create new oncase flow"}}),k.$on("click",l[18]),_=new oe({props:{text:"off case",palette:"accent-secondary",icon:"add",tooltip:"create new offcase flow"}}),_.$on("click",l[19]);let v=l[1].length>0&&vt(l);return{c(){e=E(),w&&w.c(),n=E(),t=D("input"),o=E(),i=D("main"),u=D("div"),r=D("div"),O(s.$$.fragment),a=E(),f=D("div"),c=D("ul");for(let g=0;g<C.length;g+=1)C[g].c();p=E(),d=D("div"),O(k.$$.fragment),P=E(),O(_.$$.fragment),S=E(),v&&v.c(),F(t,"id","uploadId"),F(t,"type","file"),t.hidden=!0,F(r,"class","header svelte-13rvab6"),F(d,"class","add-tab svelte-13rvab6"),F(c,"class","svelte-13rvab6"),F(f,"class","tabs svelte-13rvab6"),F(u,"class","sidebar svelte-13rvab6"),F(i,"class","palette-plain svelte-13rvab6"),F(i,"style",`--transition-speed: ${ae}ms;`)},m(g,h){N(g,e,h),w&&w.m(g,h),N(g,n,h),N(g,t,h),N(g,o,h),N(g,i,h),q(i,u),q(u,r),V(s,r,null),q(u,a),q(u,f),q(f,c);for(let T=0;T<C.length;T+=1)C[T].m(c,null);q(c,p),q(c,d),V(k,d,null),q(d,P),V(_,d,null),q(i,S),v&&v.m(i,null),A=!0,H||(z=[J(He.body,"keydown",l[6]),J(He.body,"dragenter",ol),J(He.body,"drop",l[7]),J(t,"change",l[8])],H=!0)},p(g,h){g[0].length>0?w?(w.p(g,h),h[0]&1&&L(w,1)):(w=gt(g),w.c(),L(w,1),w.m(n.parentNode,n)):w&&(se(),R(w,1,1,()=>{w=null}),re());const T={};if(h[0]&2|h[1]&8&&(T.$$scope={dirty:h,ctx:g}),s.$set(T),h[0]&14){M=g[1];let U;for(U=0;U<M.length;U+=1){const m=_t(g,M,U);C[U]?(C[U].p(m,h),L(C[U],1)):(C[U]=bt(m),C[U].c(),L(C[U],1),C[U].m(c,p))}for(se(),U=M.length;U<C.length;U+=1)X(U);re()}g[1].length>0?v?(v.p(g,h),h[0]&2&&L(v,1)):(v=vt(g),v.c(),L(v,1),v.m(i,null)):v&&(se(),R(v,1,1,()=>{v=null}),re())},i(g){if(!A){L(w),L(s.$$.fragment,g);for(let h=0;h<M.length;h+=1)L(C[h]);L(k.$$.fragment,g),L(_.$$.fragment,g),L(v),A=!0}},o(g){R(w),R(s.$$.fragment,g),C=C.filter(Boolean);for(let h=0;h<C.length;h+=1)R(C[h]);R(k.$$.fragment,g),R(_.$$.fragment,g),R(v),A=!1},d(g){g&&j(e),w&&w.d(g),g&&j(n),g&&j(t),g&&j(o),g&&j(i),I(s),Se(C,g),I(k),I(_),v&&v.d(),H=!1,ge(z)}}}function ol(l){l.preventDefault()}function il(l,e,n){let t,o;ce(l,Q,b=>n(1,t=b)),ce(l,we,b=>n(2,o=b));function i(b){Re(we,o=b,o),u()}function u(){var b,x;let G=((b=t[o])===null||b===void 0?void 0:b.lastFocus)&&fe((x=t[o])===null||x===void 0?void 0:x.lastFocus);G?G.focus=!0:Re(Q,t[o].children[0].focus=!0,t),Q.set(t)}function r(){var b,x;let G=((b=t[o])===null||b===void 0?void 0:b.lastFocus)&&fe((x=t[o])===null||x===void 0?void 0:x.lastFocus);G&&(G.focus=!1)}function s(b){r(),t.push(on(t.length,b)),Re(we,o=t.length-1,o),Q.set(t)}function a(b){b.ctrlKey&&b.shiftKey&&b.key=="N"?(b.preventDefault(),s("aff")):b.ctrlKey&&b.key=="n"&&(b.preventDefault(),s("neg")),b.metaKey&&b.shiftKey&&b.key=="z"?(b.preventDefault(),t[o].history.redo()):b.metaKey&&b.key=="z"&&(b.preventDefault(),t[o].history.undo())}function f(b){b.preventDefault();let x=b.dataTransfer.files[0],G=new FileReader;G.onload=function(me){p(me.target.result)},G.readAsText(x,"UTF-8")}function c(){let b=document.getElementById("uploadId").files[0],x=new FileReader;x.onload=function(G){p(G.target.result)},x.readAsText(b,"UTF-8")}function p(b){let x=JSON.parse(b);Re(Q,t=[],t);for(let G of x)G.history=new At,t.push(G)}window.addEventListener("dragover",function(b){b.preventDefault()},!1),window.addEventListener("drop",function(b){b.preventDefault()},!1);let d=[];function k(b){d.splice(b,1),n(0,d)}function P(b){d.push(b),n(0,d)}const _=b=>k(b),S=()=>{d.length==1&&k(0)},A=()=>{d.length==1&&k(0)},H=()=>P(Wn),z=()=>P(Qn);function w(b,x){l.$$.not_equal(t[x],b)&&(t[x]=b,Q.set(t))}const M=b=>i(b),C=()=>s("aff"),X=()=>s("neg");function v(b){l.$$.not_equal(t[o].content,b)&&(t[o].content=b,Q.set(t))}function g(b){l.$$.not_equal(t[o].children,b)&&(t[o].children=b,Q.set(t))}function h(b){l.$$.not_equal(t[o].index,b)&&(t[o].index=b,Q.set(t))}function T(b){l.$$.not_equal(t[o].focus,b)&&(t[o].focus=b,Q.set(t))}function U(b){l.$$.not_equal(t[o].invert,b)&&(t[o].invert=b,Q.set(t))}function m(b){l.$$.not_equal(t[o],b)&&(t[o]=b,Q.set(t))}function B(b){l.$$.not_equal(t[o],b)&&(t[o]=b,Q.set(t))}return window.document.body.classList.add("dark"),[d,t,o,i,u,s,a,f,c,k,P,_,S,A,H,z,w,M,C,X,v,g,h,T,U,m,B]}class sl extends te{constructor(e){super();ne(this,e,il,ll,ee,{},null,[-1,-1])}}new sl({target:document.body});
